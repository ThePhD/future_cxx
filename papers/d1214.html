<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>D1214R1: Gotta Call 'Em All - INVOKE for free and Projections for Cheap in the Language</title>
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd; border-radius: .5em;
	  margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: medium;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
		border-bottom-width: 3px !important;
		margin-bottom: 0px !important;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li .secno { font-size: 85%; }
	.toc > li li li li li { font-size:   85%;    }
	.toc > li li li li li .secno { font-size: 100%; }

	/* @supports not (display:grid) { */
		.toc > li             { margin: 1.5rem 0;    }
		.toc > li li          { margin: 0.3rem 0;    }
		.toc > li li li       { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}

		.toc li {
			clear: both;
		}

		:not(li) > .toc              { margin-left:  5rem; }
		.toc .secno                  { margin-left: -5rem; }
		.toc > li li li .secno       { margin-left: -7rem; }
		.toc > li li li li .secno    { margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc              { margin-left:  4rem; }
			.toc .secno                  { margin-left: -4rem; }
			.toc > li li li              { margin-left:  1rem; }
			.toc > li li li .secno       { margin-left: -5rem; }
			.toc > li li li li .secno    { margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			   comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover {
			background: rgba(75%, 75%, 75%, .25);
			border-bottom: 3px solid #054572;
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good table positioning:
		   "content column" is 50ems wide at max; less on smaller screens.
		   Extra space (after ToC + content) is empty on the right.

		   1. When table < content column, centers table in column.
		   2. When content < table < available, left-aligns.
		   3. When table > available, fills available + scroll bar.
		*/ 
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
<style type="text/css">
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      vertical-align: top;
    }
    th, td {
      border-left: none;
      border-right: none;
      padding: 0px 10px;
    }
    th {
      text-align: center;
    }

    del { background: #fcc; color: #000; text-decoration: line-through; }
    ins { background: #cfc; color: #000; }
    blockquote .highlight:not(.idl) { background: initial; margin: initial; padding: 0.5em }
    blockquote ul { background: inherit; }
    blockquote code.highlight:not(.idl) { padding: initial; }
    blockquote c-[a] { color: inherit; } /* Keyword.Declaration */
    blockquote c-[b] { color: inherit; } /* Keyword.Type */
    blockquote c-[c] { color: inherit; } /* Comment */
    blockquote c-[d] { color: inherit; } /* Comment.Multiline */
    blockquote c-[e] { color: inherit; } /* Name.Attribute */
    blockquote c-[f] { color: inherit; } /* Name.Tag */
    blockquote c-[g] { color: inherit; } /* Name.Variable */
    blockquote c-[k] { color: inherit; } /* Keyword */
    blockquote c-[l] { color: inherit; } /* Literal */
    blockquote c-[m] { color: inherit; } /* Literal.Number */
    blockquote c-[n] { color: inherit; } /* Name */
    blockquote c-[o] { color: inherit; } /* Operator */
    blockquote c-[p] { color: inherit; } /* Punctuation */
    blockquote c-[s] { color: inherit; } /* Literal.String */
    blockquote c-[t] { color: inherit; } /* Literal.String.Single */
    blockquote c-[u] { color: inherit; } /* Literal.String.Double */
    blockquote c-[cp] { color: inherit; } /* Comment.Preproc */
    blockquote c-[c1] { color: inherit; } /* Comment.Single */
    blockquote c-[cs] { color: inherit; } /* Comment.Special */
    blockquote c-[kc] { color: inherit; } /* Keyword.Constant */
    blockquote c-[kn] { color: inherit; } /* Keyword.Namespace */
    blockquote c-[kp] { color: inherit; } /* Keyword.Pseudo */
    blockquote c-[kr] { color: inherit; } /* Keyword.Reserved */
    blockquote c-[ld] { color: inherit; } /* Literal.Date */
    blockquote c-[nc] { color: inherit; } /* Name.Class */
    blockquote c-[no] { color: inherit; } /* Name.Constant */
    blockquote c-[nd] { color: inherit; } /* Name.Decorator */
    blockquote c-[ni] { color: inherit; } /* Name.Entity */
    blockquote c-[ne] { color: inherit; } /* Name.Exception */
    blockquote c-[nf] { color: inherit; } /* Name.Function */
    blockquote c-[nl] { color: inherit; } /* Name.Label */
    blockquote c-[nn] { color: inherit; } /* Name.Namespace */
    blockquote c-[py] { color: inherit; } /* Name.Property */
    blockquote c-[ow] { color: inherit; } /* Operator.Word */
    blockquote c-[mb] { color: inherit; } /* Literal.Number.Bin */
    blockquote c-[mf] { color: inherit; } /* Literal.Number.Float */
    blockquote c-[mh] { color: inherit; } /* Literal.Number.Hex */
    blockquote c-[mi] { color: inherit; } /* Literal.Number.Integer */
    blockquote c-[mo] { color: inherit; } /* Literal.Number.Oct */
    blockquote c-[sb] { color: inherit; } /* Literal.String.Backtick */
    blockquote c-[sc] { color: inherit; } /* Literal.String.Char */
    blockquote c-[sd] { color: inherit; } /* Literal.String.Doc */
    blockquote c-[se] { color: inherit; } /* Literal.String.Escape */
    blockquote c-[sh] { color: inherit; } /* Literal.String.Heredoc */
    blockquote c-[si] { color: inherit; } /* Literal.String.Interpol */
    blockquote c-[sx] { color: inherit; } /* Literal.String.Other */
    blockquote c-[sr] { color: inherit; } /* Literal.String.Regex */
    blockquote c-[ss] { color: inherit; } /* Literal.String.Symbol */
    blockquote c-[vc] { color: inherit; } /* Name.Variable.Class */
    blockquote c-[vg] { color: inherit; } /* Name.Variable.Global */
    blockquote c-[vi] { color: inherit; } /* Name.Variable.Instance */
    blockquote c-[il] { color: inherit; } /* Literal.Number.Integer.Long */
  </style>
  <meta content="Bikeshed version ae6def1cbca03b321b2ad730ac2f51eeba21ed81" name="generator">
  <link href="https://isocpp.org/favicon.ico" rel="icon">
  <meta content="855af5bba903fe42a47dc14e194a8bb275a88917" name="document-revision">
<style>
<pre class=include-raw line-number=-1 path='wording.css'></pre></style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-syntax-highlighting */

.highlight:not(.idl) { background: hsl(24, 20%, 95%); }
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-selflinks */

.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: gray;
    color: white;
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: black;
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: #005a9c;
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">D1214R1<br>Gotta Call 'Em All - INVOKE for free and Projections for Cheap in the Language</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Draft Proposal, <time class="dt-updated" datetime="2020-05-04">2020-05-04</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Author:
     <dd>
      <dd class="editor p-author h-card vcard"><span class="p-name fn">JeanHeyd Meneide</span>
     <dt>Audience:
     <dd>EWG
     <dt>Project:
     <dd>ISO/IEC JTC1/SC22/WG21 14882: Programming Language — C++
     <dt>Latest:
     <dd><a href="https://thephd.github.io/_vendor/future_cxx/papers/d1214.html">https://thephd.github.io/_vendor/future_cxx/papers/d1214.html</a>
     <dt>Reply To:
     <dd><a href="mailto:phdofthehouse@gmail.com">JeanHeyd Meneide</a>, <a href="https://twitter.com/thephantomderp">@thephantomderp</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This paper proposes making pointer to member objects and pointer to member functions callable.</p>
  </div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#changelog"><span class="secno">1</span> <span class="content">Revision History</span></a>
     <ol class="toc">
      <li><a href="#changelog-r1"><span class="secno">1.1</span> <span class="content">Revision 1 - May 4th, 2020</span></a>
      <li><a href="#changelog-r0"><span class="secno">1.2</span> <span class="content">Revision 0 - October 19th, 2018</span></a>
     </ol>
    <li><a href="#motivation"><span class="secno">2</span> <span class="content">Motivation</span></a>
    <li>
     <a href="#design"><span class="secno">3</span> <span class="content">Design</span></a>
     <ol class="toc">
      <li><a href="#design.ufcs"><span class="secno">3.1</span> <span class="content">But what about UFCS-</span></a>
      <li><a href="#design.callable"><span class="secno">3.2</span> <span class="content">Callable Members</span></a>
      <li><a href="#design.ref"><span class="secno">3.3</span> <span class="content">References, Pointers, and std::reference_wrapper, oh my!</span></a>
      <li><a href="#design-stdlib"><span class="secno">3.4</span> <span class="content">Improvement of usage with the Standard Library</span></a>
     </ol>
    <li>
     <a href="#impact"><span class="secno">4</span> <span class="content">Impact</span></a>
     <ol class="toc">
      <li><a href="#impact-standard"><span class="secno">4.1</span> <span class="content">On the Standard</span></a>
      <li><a href="#impact-user"><span class="secno">4.2</span> <span class="content">On User Code</span></a>
     </ol>
    <li>
     <a href="#wording"><span class="secno">5</span> <span class="content">Proposed Wording and Feature Test Macros</span></a>
     <ol class="toc">
      <li><a href="#wording-feature"><span class="secno">5.1</span> <span class="content">Proposed feature Test Macro</span></a>
      <li><a href="#wording-intent"><span class="secno">5.2</span> <span class="content">Intent</span></a>
      <li><a href="#wording-language"><span class="secno">5.3</span> <span class="content">Proposed Wording</span></a>
     </ol>
    <li><a href="#acknowledgements"><span class="secno">6</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="changelog"><span class="secno">1. </span><span class="content">Revision History</span><a class="self-link" href="#changelog"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="changelog-r1"><span class="secno">1.1. </span><span class="content">Revision 1 - May 4th, 2020</span><a class="self-link" href="#changelog-r1"></a></h3>
   <ul>
    <li data-md>
     <p>From EWG feedback: Combine with ideas from <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>overload</c-></code> (p0051) to form one big cleanup paper. Talk about deprecating the binding operators, whose sole purpose is member function pointers and member object pointers.</p>
    <li data-md>
     <p>Work out some of the differences here.</p>
    <li data-md>
     <p>Add some more depth to the Tony Table.</p>
   </ul>
   <h3 class="heading settled" data-level="1.2" id="changelog-r0"><span class="secno">1.2. </span><span class="content">Revision 0 - October 19th, 2018</span><a class="self-link" href="#changelog-r0"></a></h3>
   <p>Initial release.</p>
   <table>
    <tbody>
     <tr>
      <th colspan="2">Shared Code 
     <tr>
      <td colspan="2">
<pre class="highlight"><c- k>struct</c-> <c- n>widget</c-> <c- p>{</c->
	<c- b>bool</c-> <c- n>on_grid</c-> <c- o>=</c-> false<c- p>;</c->

	<c- n>widget</c-> <c- p>()</c-> <c- o>=</c-> <c- k>default</c-><c- p>;</c->
	<c- n>widget</c-><c- p>(</c-><c- b>int</c-> <c- n>level</c-><c- p>)</c->
	<c- o>:</c-> <c- n>display_level</c-><c- p>(</c-><c- n>level</c-><c- p>)</c-> <c- p>{}</c->

	<c- b>bool</c-> <c- n>is_at_top</c-><c- p>()</c-> <c- k>const</c-> <c- p>{</c-> <c- k>return</c-> <c- n>display_level</c-> <c- o>==</c-> <c- mi>0</c-><c- p>;</c-> <c- p>}</c->

	<c- b>void</c-> <c- n>raise</c-><c- p>()</c-> <c- p>{</c-> <c- n>raise</c-><c- p>(</c-><c- mi>1</c-><c- p>);</c-> <c- p>}</c->
	<c- b>void</c-> <c- n>raise</c-><c- p>(</c-><c- b>int</c-> <c- n>by</c-><c- p>)</c-> <c- p>{</c-> <c- n>display_level</c-> <c- o>+=</c-> <c- n>by</c-><c- p>;</c-> <c- p>}</c->
<c- k>private</c-><c- o>:</c->
	<c- b>int</c-> <c- n>display_level</c-> <c- o>=</c-> <c- mi>0</c-><c- p>;</c->
<c- p>};</c->

<c- n>std</c-><c- o>::</c-><c- n>vector</c-><c- o>&lt;</c-><c- n>widget</c-><c- o>></c-> <c- n>widgets</c-><c- p>(</c-><c- mi>30</c-><c- p>);</c->
<c- n>widgets</c-><c- p>.</c-><c- n>push_back</c-><c- p>(</c-><c- n>widget</c-><c- p>(</c-><c- mi>3</c-><c- p>));</c->
<c- n>widgets</c-><c- p>[</c-><c- mi>15</c-><c- p>].</c-><c- n>on_grid</c-> <c- o>=</c-> true<c- p>;</c->

<c- n>std</c-><c- o>::</c-><c- n>vector</c-><c- o>&lt;</c-><c- n>widget</c-><c- o>*></c-> <c- n>p_widgets</c-><c- p>;</c->
<c- k>for</c-> <c- p>(</c-><c- k>auto</c-><c- o>&amp;</c-> <c- nl>w</c-> <c- p>:</c-> <c- n>widgets</c-><c- p>)</c-> <c- n>p_widgets</c-><c- p>.</c-><c- n>push_back</c-><c- p>(</c-><c- o>&amp;</c-><c- n>w</c-><c- p>);</c->
</pre>
     <tr>
      <th>Currently
      <th>With Proposal
     <tr>
      <td>
<pre class="highlight"><c- n>widget</c-> <c- n>w</c-><c- p>;</c->
<c- n>widget</c-><c- o>*</c-> <c- n>p_w</c-> <c- o>=</c-> <c- o>&amp;</c-><c- n>w</c-><c- p>;</c->
<c- k>using</c-> <c- n>func_t</c-> <c- o>=</c-> <c- b>void</c-><c- p>(</c-><c- n>widget</c-><c- o>::*</c-><c- p>)(</c-><c- b>int</c-><c- p>);</c->
<c- k>auto</c-> <c- n>pmf</c-> <c- o>=</c-> <c- k>static_cast</c-><c- o>&lt;</c-><c- n>func_t</c-><c- o>></c-><c- p>(</c->
	<c- n>widget</c-><c- o>::</c-><c- n>raise</c-><c- p>);</c->
<c- p>(</c-><c- n>w</c-><c- p>.</c-><c- o>*</c-><c- n>pmf</c-><c- p>)(</c-><c- mi>1</c-><c- p>);</c->
<c- p>(</c-><c- n>p_w</c-><c- o>->*</c-><c- n>pmf</c-><c- p>)(</c-><c- mi>2</c-><c- p>);</c->
</pre>
       ✔️ compiles, runs successfully<br> syntax is surprise, not same as others 
      <td>
<pre class="highlight"><c- n>widget</c-> <c- n>w</c-><c- p>;</c->
<c- n>widget</c-><c- o>*</c-> <c- n>p_w</c-> <c- o>=</c-> <c- o>&amp;</c-><c- n>w</c-><c- p>;</c->
<c- k>using</c-> <c- n>func_t</c-> <c- o>=</c-> <c- b>void</c-><c- p>(</c-><c- n>widget</c-><c- o>::*</c-><c- p>)(</c-><c- b>int</c-><c- p>);</c->
<c- k>auto</c-> <c- n>pmf</c-> <c- o>=</c-> <c- k>static_cast</c-><c- o>&lt;</c-><c- n>func_t</c-><c- o>></c-><c- p>(</c->
	<c- n>widget</c-><c- o>::</c-><c- n>raise</c-><c- p>);</c->
<c- n>pmf</c-><c- p>(</c-><c- n>w</c-><c- p>,</c-> <c- mi>1</c-><c- p>);</c->
<c- n>pmf</c-><c- p>(</c-><c- n>p_w</c-><c- p>,</c-> <c- mi>2</c-><c- p>);</c->
</pre>
       ✔️ compiles, runs successfully<br> consistent syntax with everything else 
     <tr>
      <td>
<pre class="highlight"><c- n>widget</c-> <c- n>w</c-><c- p>;</c->
<c- n>widget</c-><c- o>*</c-> <c- n>p_w</c-> <c- o>=</c-> <c- o>&amp;</c-><c- n>w</c-><c- p>;</c->
<c- k>auto</c-> <c- n>pmo</c-> <c- o>=</c-> <c- o>&amp;</c-><c- n>widget</c-><c- o>::</c-><c- n>on_grid</c-><c- p>;</c->
<c- n>assert</c-><c- p>(</c-><c- o>!</c-><c- p>(</c-><c- n>w</c-><c- p>.</c-><c- o>*</c-><c- n>pmo</c-><c- p>));</c->
<c- p>(</c-><c- n>p_w</c-><c- o>->*</c-><c- n>pmo</c-><c- p>)</c-> <c- o>=</c-> true<c- p>;</c->
<c- n>assert</c-><c- p>((</c-><c- n>w</c-><c- p>.</c-><c- o>*</c-><c- n>pmo</c-><c- p>));</c->
</pre>
       ✔️ compiles, runs successfully<br> syntax is surprise, not same as others 
      <td>
<pre class="highlight"><c- n>widget</c-> <c- n>w</c-><c- p>;</c->
<c- n>widget</c-><c- o>*</c-> <c- n>p_w</c-> <c- o>=</c-> <c- o>&amp;</c-><c- n>w</c-><c- p>;</c->
<c- k>auto</c-> <c- n>pmo</c-> <c- o>=</c-> <c- o>&amp;</c-><c- n>widget</c-><c- o>::</c-><c- n>on_grid</c-><c- p>;</c->
<c- n>assert</c-><c- p>(</c-><c- o>!</c-><c- n>pmo</c-><c- p>(</c-><c- n>w</c-><c- p>));</c->
<c- n>pmo</c-><c- p>(</c-><c- n>p_w</c-><c- p>,</c-> true<c- p>);</c->
<c- n>assert</c-><c- p>(</c-><c- n>pmo</c-><c- p>(</c-><c- n>w</c-><c- p>));</c->
</pre>
       ✔️ compiles, runs successfully<br> consistent syntax with everything else 
     <tr>
      <td>
<pre class="highlight"><c- k>auto</c-> <c- n>it</c-> <c- o>=</c-> <c- n>std</c-><c- o>::</c-><c- n>find_if</c-><c- p>(</c-><c- n>widgets</c-><c- p>.</c-><c- n>begin</c-><c- p>(),</c-> 
  <c- n>widgets</c-><c- p>.</c-><c- n>end</c-><c- p>(),</c-> 
  <c- o>&amp;</c-><c- n>widget</c-><c- o>::</c-><c- n>is_at_top</c-><c- p>);</c->
<c- k>if</c-> <c- p>(</c-><c- n>it</c-> <c- o>!=</c-> <c- n>widgets</c-><c- p>.</c-><c- n>end</c-><c- p>())</c-> <c- p>{</c->
	<c- n>assert</c-><c- p>(</c-><c- n>it</c-><c- o>-></c-><c- n>is_at_top</c-><c- p>());</c->
<c- p>}</c->
</pre>
       🚫 compiler error 
      <td>
<pre class="highlight"><c- k>auto</c-> <c- n>it</c-> <c- o>=</c-> <c- n>std</c-><c- o>::</c-><c- n>find_if</c-><c- p>(</c-><c- n>widgets</c-><c- p>.</c-><c- n>begin</c-><c- p>(),</c-> 
  <c- n>widgets</c-><c- p>.</c-><c- n>end</c-><c- p>(),</c-> 
  <c- o>&amp;</c-><c- n>widget</c-><c- o>::</c-><c- n>is_at_top</c-><c- p>);</c->
<c- k>if</c-> <c- p>(</c-><c- n>it</c-> <c- o>!=</c-> <c- n>widgets</c-><c- p>.</c-><c- n>end</c-><c- p>())</c-> <c- p>{</c->
	<c- n>assert</c-><c- p>(</c-><c- n>it</c-><c- o>-></c-><c- n>is_at_top</c-><c- p>());</c->
<c- p>}</c->
</pre>
       ✔️ compiles, runs successfully<br> conditional taken, assert passes 
     <tr>
      <td>
<pre class="highlight"><c- b>bool</c-> <c- n>all_off_grid</c-> <c- o>=</c-> <c- n>std</c-><c- o>::</c-><c- n>none_of</c-><c- p>(</c-><c- n>widgets</c-><c- p>.</c-><c- n>begin</c-><c- p>(),</c-> 
  <c- n>widgets</c-><c- p>.</c-><c- n>end</c-><c- p>(),</c-> 
  <c- o>&amp;</c-><c- n>widget</c-><c- o>::</c-><c- n>on_grid</c-><c- p>);</c->
<c- n>assert</c-><c- p>(</c-><c- o>!</c-><c- n>all_off_grid</c-><c- p>);</c->
</pre>
       🚫 compiler error 
      <td>
<pre class="highlight"><c- b>bool</c-> <c- n>all_off_grid</c-> <c- o>=</c-> <c- n>std</c-><c- o>::</c-><c- n>none_of</c-><c- p>(</c-><c- n>widgets</c-><c- p>.</c-><c- n>begin</c-><c- p>(),</c-> 
  <c- n>widgets</c-><c- p>.</c-><c- n>end</c-><c- p>(),</c-> 
  <c- o>&amp;</c-><c- n>widget</c-><c- o>::</c-><c- n>on_grid</c-><c- p>);</c->
<c- n>assert</c-><c- p>(</c-><c- o>!</c-><c- n>all_off_grid</c-><c- p>);</c->
</pre>
       ✔️ compiles, runs successfully 
   </table>
   <h2 class="heading settled" data-level="2" id="motivation"><span class="secno">2. </span><span class="content">Motivation</span><a class="self-link" href="#motivation"></a></h2>
   <p>One frequent question from beginner and intermediate users of C++ is what <code class="highlight"><c- o>&amp;</c-><c- n>my_class</c-><c- o>::</c-><c- n>some_member_function</c-></code> yields and what is the exact syntax required to use it. It’s even more obscure sibling, <code class="highlight"><c- o>&amp;</c-><c- n>my_class</c-><c- o>::</c-><c- n>some_member_variable</c-></code> also garners quite a <a data-link-type="biblio" href="#biblio-pmf-so">few questions of Stack Overflow and similar</a>. The syntax is often referred to as ugly, weird, and unintuitive to both beginners and experts alike: tutorials are written just to teach what is a basic language construct, and there is special teaching that needs to be poured out into what exactly are both pointer to member functions and that they are <a data-link-type="biblio" href="#biblio-pmf-cg">"not regular pointers"</a>. This is even covered in <a data-link-type="biblio" href="#biblio-pmf-iso">Standard C++'s FAQ</a>.</p>
   <p>The problem grows greater in generic code, where both library developers and standard library vendors often take "callables". Sometimes it works, in the case of <code class="highlight"><c- n>std</c-><c- o>::</c-><c- kr>thread</c-></code>. Other times, it does not, as is the case with nearly every single standard library algorithm:</p>
<pre class="highlight"><c- k>struct</c-> <c- n>my_object</c-> <c- p>{</c->
	<c- b>int</c-> <c- n>value</c-> <c- o>=</c-> <c- mi>0</c-><c- p>;</c->
	<c- b>bool</c-> <c- n>is_anchored</c-> <c- o>=</c-> false<c- p>;</c->

	<c- b>bool</c-> <c- nf>is_zero</c-><c- p>()</c-> <c- k>const</c-> <c- p>{</c->
		<c- k>return</c-> <c- n>value</c-> <c- o>==</c-> <c- mi>0</c-><c- p>;</c->
	<c- p>}</c->

	<c- c1>// ...</c->
<c- p>};</c->

<c- c1>// ...</c->

<c- n>std</c-><c- o>::</c-><c- n>vector</c-><c- o>&lt;</c-><c- n>my_object</c-><c- o>*></c-> <c- n>objects</c-><c- p>;</c->
<c- c1>// uhhh....?</c->
<c- k>auto</c-> <c- n>it</c-> <c- o>=</c-> <c- n>std</c-><c- o>::</c-><c- n>find_if</c-><c- p>(</c-><c- n>objects</c-><c- p>.</c-><c- n>begin</c-><c- p>(),</c-> <c- n>objects</c-><c- p>.</c-><c- n>end</c-><c- p>(),</c-> <c- o>&amp;</c-><c- n>my_object</c-><c- o>::</c-><c- n>is_zero</c-><c- p>);</c->
</pre>
   <p><a data-link-type="biblio" href="#biblio-pmf-so-algo">Individuals want to pass</a> pointer to member functions and pointers to member objects, requiring quite a bit of boilerplate with either a lambda, <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>function</c-></code>, <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>mem_fn</c-></code>, <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>bind</c-></code> or similar. This gets progressively worse because it is impossible to reference a member variable without the lambda approach or other boilerplate.</p>
   <p><code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>mem_fn</c-></code>, <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>bind</c-></code>, and similar also create a severe problem with how errors are reported. One cannot just point to the top-level call to the algorithm for the error: they are bubbled up inside a deep template stack trace from the heart of <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>mem_fn</c-></code> or <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>bind</c-></code> or similar. Even lambdas will produce unwieldy errors, albeit compilers are better at pointing inside the lambda if the error is there rather than in the heart of <code class="highlight"><c- n>_STD</c-> <c- n>_Invoke</c-></code> or some other grotesque amalgamation of template spew:</p>
   <blockquote>
    <p>... it would point directly to the failing call instead of failing inside the code of a mem_fn equivalent, which would be really convenient. It’s worth noting that I had to fix functions several times in my library to add the missing call to as_function, which would have never been a problem with an intuitive call syntax. -- Morwenn, author of <a data-link-type="biblio" href="#biblio-cpp-sort">[cpp-sort]</a></p>
   </blockquote>
   <p>With the introduction of <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>invoke</c-></code> matching the <code class="highlight"><c- n>INVOKE</c-></code> concept in the C++ standard, C++ shifted the burden of implementing callable wrappers from users to the standard library. And while this has saved many developers from writing the code themselves in a post C++17 world, there is a more sinister underlying problem concerning frequent use of <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>invoke</c-></code> by library and application developers.</p>
   <p>While we have been saved from having 31 separate implementations of <code class="highlight"><c- n>call_wrapper</c-></code> and <code class="highlight"><c- n>call_detail</c-></code> and <code class="highlight"><c- n>invoke_detail</c-></code>, we are still suffering from a lower-level problem that a library-based solution cannot provide to us. The amount of generated cruft that infests object files and final debug executables is extraordinarily high, and for those individuals who do not have C++17 this pain is all the more apparent when they read through their executables. Function template instantiations that perfectly forward arguments and take the functions as part of those arguments ensure that there is almost no convergence amongst the tens of thousands and hundreds of thousands of function template instantiations the compiler must generate code for, leaving each one a special template snowflake that contributes to an avalanche of additional generated compiler information. Somewhat sadly, all of this work is then ultimately discarded as unimportant in any non-debug build. The actual compile-time cost that comes from having to SFINAE or struct-specialize on this behavior is non-negligible and we are often forcing heavy-handed template constructs to do something the compiler can implement as a simple transformation.</p>
   <p>Therefore, we propose to obviate <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>invoke</c-></code> and it’s pre-C++17 friends entirely by solving the very root of the problem: make the 2 oddball syntaxes for Pointer to Member Functions and Pointer to Member Objects easily callable functions with consistent syntax. This will save us compiler resources and developer build time. It also improves the bottom line for standard library developers and library developers who need this functionality and are entirely wrapping.</p>
   <h2 class="heading settled" data-level="3" id="design"><span class="secno">3. </span><span class="content">Design</span><a class="self-link" href="#design"></a></h2>
   <p>This design pulls from two previous papers. Peter Dimov’s September 2004 <a data-link-type="biblio" href="#biblio-n1695">N1695 - A Proposal to make Pointers to Members Callable</a> and Barry Revzin’s June 2017 <a data-link-type="biblio" href="#biblio-p0312">p0312 - Making Pointers to Members Callable</a>. It makes both pointer to member functions and pointer to member objects callable.</p>
   <p>The goal of the design for this proposal is to make the simple and non-unique syntax have intrinsic and worthwhile value for both the novice and the expert programmer.</p>
   <h3 class="heading settled" data-level="3.1" id="design.ufcs"><span class="secno">3.1. </span><span class="content">But what about UFCS-</span><a class="self-link" href="#design.ufcs"></a></h3>
   <p><strong>No.</strong> This is not Universal Functional Call Syntax (UFCS), has nothing to do with UFCS, and never will be UFCS. There is no correlation between fully-typed objects that are of type Pointer to Member Object or Pointer to Member Function having a specific invocation syntax and the leviathan that is Name Lookup, the resulting Argument-Dependent Lookup (ADL) and all it implies. Pointer to member objects and pointer to member functions are fully resolved entities that do not deal with overload resolution or name lookup.</p>
   <p>This proposal and other UFCS proposal are not in any way correlated. If anyone claims as such or attempts to use this paper as support for UFCS should be promptly directed to this section of the paper.</p>
   <h3 class="heading settled" data-level="3.2" id="design.callable"><span class="secno">3.2. </span><span class="content">Callable Members</span><a class="self-link" href="#design.callable"></a></h3>
   <p>In line with the goals of this proposal, we propose a very simple syntax that will allow generic code to treat all classes of "callables" -- as conceived by the <code class="highlight"><c- n>INVOKE</c-></code> concept and <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>invoke</c-></code> -- with a similar syntax. Particularly, the function call syntax becomes as follows:</p>
   <ul>
    <li data-md>
     <p>Function pointers, objects with <code class="highlight"><c- k>operator</c-><c- p>()</c-></code>:<br> <code class="highlight"><c- n>f_ptr</c-><c- p>(</c-><c- n>arg1</c-><c- p>,</c-> <c- n>arg2</c-><c- p>,</c-> <c- p>...,</c-> <c- n>argN</c-><c- p>);</c-></code> (no change)<br> <code class="highlight"><c- n>f_obj</c-><c- p>(</c-><c- n>arg1</c-><c- p>,</c-> <c- n>arg2</c-><c- p>,</c-> <c- p>...,</c-> <c- n>argN</c-><c- p>);</c-></code> (no change)</p>
    <li data-md>
     <p>Pointer to member function <code class="highlight"><c- n>pmf</c-></code>:<br> <code class="highlight"><c- p>(</c-><c- n>obj</c-><c- p>.</c-><c- o>*</c-><c- n>pmf</c-><c- p>)(</c-><c- n>arg1</c-><c- p>,</c-> <c- n>arg2</c-><c- p>,</c-> <c- p>...,</c-> <c- n>argN</c-><c- p>);</c-></code> can be written as <code class="highlight"><c- n>pmf</c-><c- p>(</c-><c- n>obj</c-><c- p>,</c-> <c- n>arg1</c-><c- p>,</c-> <c- n>arg2</c-><c- p>,</c-> <c- p>...,</c-> <c- n>argN</c-><c- p>);</c-></code><br></p>
    <li data-md>
     <p>Pointer to member object <code class="highlight"><c- n>pmo</c-></code>:<br> <code class="highlight"><c- k>auto</c-> <c- n>value</c-> <c- o>=</c-> <c- p>(</c-><c- n>obj</c-><c- p>.</c-><c- o>*</c-><c- n>pmo</c-><c- p>);</c-></code> can be written as <code class="highlight"><c- k>auto</c-> <c- n>value</c-> <c- o>=</c-> <c- n>pmo</c-><c- p>(</c-><c- n>obj</c-><c- p>);</c-></code><br> <code class="highlight"><c- p>(</c-><c- n>obj</c-><c- p>.</c-><c- o>*</c-><c- n>pmo</c-><c- p>)</c-> <c- o>=</c-> <c- n>new_value</c-><c- p>;</c-></code> can be written as <code class="highlight"><c- n>pmo</c-><c- p>(</c-><c- n>obj</c-><c- p>,</c-> <c- n>new_value</c-><c- p>);</c-></code></p>
   </ul>
   <p>N.B.: this syntax treats the arguments passed to pointer to members like any other argument, meaning that types which have conversions to <code class="highlight"><c- n>T</c-></code> trigger naturally without the special exceptions or wording that is required by <code class="highlight"><c- n>INVOKE</c-></code> to handle wrapping references, as shown in <a href="#design.ref">§ 3.3 References, Pointers, and std::reference_wrapper, oh my!</a>.</p>
   <p>Callable pointer to member objects are supported by <code class="highlight"><c- n>INVOKE</c-></code>. This syntax extends it slightly by adding the assignment for the 2-argument form of a pointer to member object. We believe this to be important because outside of and prior to <code class="highlight"><c- n>INVOKE</c-></code>, many codebases creating binding interface layers (to ChaiScript, Python, Lua, Javascript, Java, and more) used the 2-argument form to simply assign into the variable. Seeing as this is a common idiom that would also have good use in certain <code class="highlight"><c- n>BinaryOperation</c-></code> algorithms.</p>
   <p>Callable pointer to member objects also enable the following:</p>
<pre class="highlight"><c- n>std</c-><c- o>::</c-><c- n>vector</c-><c- o>&lt;</c-><c- n>my_object</c-><c- o>*></c-> <c- n>objects</c-><c- p>;</c->
<c- k>auto</c-> <c- n>first_anchored_it</c-> <c- o>=</c-> <c- n>std</c-><c- o>::</c-><c- n>find_if</c-><c- p>(</c-><c- n>objects</c-><c- p>.</c-><c- n>begin</c-><c- p>(),</c-> <c- n>objects</c-><c- p>.</c-><c- n>end</c-><c- p>(),</c-> <c- o>&amp;</c-><c- n>my_object</c-><c- o>::</c-><c- n>is_anchored</c-><c- p>);</c->
</pre>
   <h3 class="heading settled" data-level="3.3" id="design.ref"><span class="secno">3.3. </span><span class="content">References, Pointers, and std::reference_wrapper, oh my!</span><a class="self-link" href="#design.ref"></a></h3>
   <p>The additional question is whether or not pointer to member functions and pointer to member objects should work with <code class="highlight"><c- n>obj</c-></code> that is either a cv-qualified <code class="highlight"><c- n>T</c-><c- o>*</c-></code> or a cv-qualified <code class="highlight"><c- n>T</c-><c- o>&amp;</c-></code>. For parity with <code class="highlight"><c- n>INVOKE</c-></code> and <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>invoke</c-></code>, and parity with <code class="highlight"><c- n>std</c-><c- o>::</c-><c- kr>thread</c-></code>/<code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>function</c-></code>/<code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>bind</c-></code> and other places that have <code class="highlight"><c- n>INVOKE</c-></code> in the standard, it is useful to simply have the compiler automatically rewrite the syntax for pointer to member function and pointer to member functions to use the arrow <code class="highlight"><c- o>-></c-></code> when <code class="highlight"><c- n>obj</c-></code> is a pointer. The runtime errors if a user is dealing with an invalid pointer will be the same no matter what, and there seems little benefit here to force the user to specify. It also impacts generic code that uses <code class="highlight"><c- n>INVOKE</c-></code>, and new generic code that wants to write <code class="highlight"><c- n>pointer_to_member_function</c-><c- p>(</c-><c- n>obj</c-><c- p>,</c-> <c- p>...)</c-></code> or <code class="highlight"><c- n>pointer_to_member</c-><c- p>(</c-><c- n>obj</c-><c- p>)</c-></code>. All <code class="highlight"><c- n>obj</c-></code> will have to be wrapped with <code class="highlight"><c- n>detail</c-><c- o>::</c-><c- n>deref</c-></code>, as many codebases do now for little benefit. Note that we only allow <code class="highlight"><c- n>obj</c-></code> to be a pointer or a reference in the case of pointer to members: there is no proposal or extension for regular function types.</p>
   <p>For <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>reference_wrapper</c-></code>, the implementation when calling this function would first let the natural implicit conversion from <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>reference_wrapper</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-></code> to <code class="highlight"><c- n>T</c-><c- o>&amp;</c-></code> happen, before the pointer to member function or pointer to member object is called. There need be no special clauses to allow this to happen, unlike for <code class="highlight"><c- n>INVOKE</c-></code> and <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>invoke</c-></code>. This allows other custom reference wrappers and similar class types to be used like anyone would with the rest of the language.</p>
   <h3 class="heading settled" data-level="3.4" id="design-stdlib"><span class="secno">3.4. </span><span class="content">Improvement of usage with the Standard Library</span><a class="self-link" href="#design-stdlib"></a></h3>
   <p>The code presented in <a href="#motivation">§ 2 Motivation</a> now compiles without problem:</p>
<pre class="highlight"><c- n>std</c-><c- o>::</c-><c- n>vector</c-><c- o>&lt;</c-><c- n>my_object</c-><c- o>*></c-> <c- n>objects</c-><c- p>;</c->
<c- c1>// yay!</c->
<c- k>auto</c-> <c- n>it</c-> <c- o>=</c-> <c- n>std</c-><c- o>::</c-><c- n>find_if</c-><c- p>(</c-><c- n>objects</c-><c- p>.</c-><c- n>begin</c-><c- p>(),</c-> <c- n>objects</c-><c- p>.</c-><c- n>end</c-><c- p>(),</c-> <c- o>&amp;</c-><c- n>my_object</c-><c- o>::</c-><c- n>is_zero</c-><c- p>);</c->
</pre>
   <p>This is an immense boon to both clarity and usability. People who perform this operation expecting a "callable" to work in this scenario have it simply work, and age-old search engine entries for "how to use member function with C++ algorithm" will dramatically decrease as code that people expect to work and have no other valid interpretation actually does exactly that!</p>
   <p>We think lambdas have been an immense boon, but do not cover the terse and simple situations. Lambdas are great general tools to solve this problem, but feel that this paper occupies an important use case in the use of C++. Most intermediate developers who grasp the Standard Library have tried to write the code seen above with one algorithm or another: rewarding programmer intuition is a powerful way to reinforce confidence in both the language and their own skill. C++ is in a unique position in that there are many places where the language has room to reward programmer intuition: this is one such place.</p>
   <h2 class="heading settled" data-level="4" id="impact"><span class="secno">4. </span><span class="content">Impact</span><a class="self-link" href="#impact"></a></h2>
   <p>This proposal is an extension to the Core language. Its potential impacts are as follows.</p>
   <h3 class="heading settled" data-level="4.1" id="impact-standard"><span class="secno">4.1. </span><span class="content">On the Standard</span><a class="self-link" href="#impact-standard"></a></h3>
   <p>If an implementation of <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>invoke</c-></code> used non-evaluated context SFINAE, that code may become ill-formed due to ambiguous overloads. The fix would be to delete the offending overloads for when this paper is adopted, and to date we do not know of any library vendors that have objection to making this fix. It is also easy to do because Feature Test Macros are part of the C++ standard now.</p>
   <p>There are no backwards compatibility compromises or breaks for this feature in the standard. The usage of parenthesis and function call syntax in this case do not conflict or produce grammar or parsing ambiguities or errors.</p>
   <h3 class="heading settled" data-level="4.2" id="impact-user"><span class="secno">4.2. </span><span class="content">On User Code</span><a class="self-link" href="#impact-user"></a></h3>
   <p>The proposal enables syntax that was not previously enabled. This may only break code which relied on the fact that certain non-evaluated context SFINAE’s that implemented their own version of <code class="highlight"><c- n>INVOKE</c-></code>/<code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>invoke</c-></code>. If a set of overloads used said non-evaluated context-style SFINAE (e.g., <code class="highlight"><c- k>decltype</c-><c- p>()</c-></code> SFINAE) and that set of overloads relied exactly on the differences between pointer to member object syntax versus pointer to member function syntax versus regular function call syntax, those set of overloads might be made ambiguous.</p>
   <p>The good news is that the fix is easy: delete the offending overloads since only 1 is valid. In many cases, deleting the function altogether would be a plausible fix and just invoking the callable directly!</p>
   <p>There are also no known cases where the intent of the code changes or the behavior changes into a form that will silently break code, and all breakages due to the above are loud and easily-fixable compile-time errors.</p>
   <h2 class="heading settled" data-level="5" id="wording"><span class="secno">5. </span><span class="content">Proposed Wording and Feature Test Macros</span><a class="self-link" href="#wording"></a></h2>
   <p>The following wording is relative to <a data-link-type="biblio" href="#biblio-n4762">[n4762]</a>.</p>
   <h3 class="heading settled" data-level="5.1" id="wording-feature"><span class="secno">5.1. </span><span class="content">Proposed feature Test Macro</span><a class="self-link" href="#wording-feature"></a></h3>
   <p>The recommended feature test macro is <code class="highlight"><c- n>__cpp_invokable_members</c-></code>.</p>
   <h3 class="heading settled" data-level="5.2" id="wording-intent"><span class="secno">5.2. </span><span class="content">Intent</span><a class="self-link" href="#wording-intent"></a></h3>
   <p>The intent of this wording is to add <code class="highlight"><c- n>pointer_to_member_function</c-><c- p>(</c-><c- n>obj</c-><c- p>,</c-> <c- n>arg1</c-><c- p>,</c-> <c- n>arg2</c-><c- p>,</c-> <c- p>...,</c-> <c- n>argN</c-><c- p>)</c-></code>, <code class="highlight"><c- k>auto</c-> <c- n>value</c-> <c- o>=</c-> <c- n>pointer_to_member_object</c-><c- p>(</c-><c- n>obj</c-><c- p>)</c-></code>, and <code class="highlight"><c- n>pointer_to_member_object</c-><c- p>(</c-><c- n>obj</c-><c- p>,</c-> <c- n>arg1</c-><c- p>)</c-></code> as valid expressions. The last expression would be ill-formed if the <code class="highlight"><c- n>pointer_to_member_object</c-></code> itself refers to a <code class="highlight"><c- k>const</c-></code> member or the object itself is <code class="highlight"><c- k>const</c-></code>. Similarly, neither <code class="highlight"><c- n>pointer_to_member_function</c-></code> or <code class="highlight"><c- n>pointer_to_member_object</c-></code> would work with an <code class="highlight"><c- n>obj</c-></code> that does not match the required cv- and reference-qualifiers on that function (this is not different from how it works currently, but the wording must match).</p>
   <h3 class="heading settled" data-level="5.3" id="wording-language"><span class="secno">5.3. </span><span class="content">Proposed Wording</span><a class="self-link" href="#wording-language"></a></h3>
   <p>Modify §7.6.1.2/1 [<strong>expr.call</strong>]/1 to read as follows:</p>
   <blockquote>
     <sup>1</sup> A function call is a postfix expression followed by parentheses containing a possibly empty, comma-separated list of initializer-clauses which constitute the arguments to the function. The postfix expression shall have 
    <del>function type or function pointer type</del>
    <ins>function type, function pointer type, or pointer-to-member type</ins>
    . For a call to a non-member function or to a static member function, the postfix expression shall be either an lvalue that refers to a function (in which case the function-to-pointer standard conversion (7.3.3) is suppressed on the postfix expression), or it shall have function pointer type. 
   </blockquote>
   <p>Add one clause after §7.6.1.2/2 [<strong>expr.call</strong>]/2:</p>
   <blockquote>
    <ins>
      <sup>3</sup> For a call of the form <code class="highlight"><c- n>pm</c-><c- p>(</c-><c- n>a1</c-><c- p>,</c-> <c- p>...,</c-> <c- n>aN</c-><c- p>)</c-></code>, where <code class="highlight"><c- n>pm</c-></code> is of type "pointer to member of <code class="highlight"><c- n>T</c-></code>". 
     <dl>
      <dd>— if <code class="highlight"><c- n>pm</c-></code> is a pointer to member function taking <code class="highlight"><c- n>M</c-></code> arguments, then <code class="highlight"><c- n>N</c-></code> shall be <code class="highlight"><c- mi>1</c-><c- o>+</c-><c- n>M</c-></code>. The result of the expression shall be equivalent to calling a pointer to member function (7.6.4) with the syntax <code class="highlight"><c- p>(</c-><c- n>a1</c-><c- p>.</c-><c- o>*</c-><c- n>pm</c-><c- p>)(</c-><c- n>a2</c-><c- p>,</c-> <c- p>...,</c-> <c- n>aN</c-><c- p>)</c-></code> if <code class="highlight"><c- n>a1</c-></code> is a possibly cv-qualified class type of which <code class="highlight"><c- n>T</c-></code> is a base class. Otherwise, the behavior of the expression shall be equivalent to <code class="highlight"><c- p>(</c-><c- n>a1</c-><c- o>->*</c-><c- n>pm</c-><c- p>)(</c-><c- n>a2</c-><c- p>,</c-> <c- p>...,</c-> <c- n>aN</c-><c- p>)</c-></code>.
      <dd>— if <code class="highlight"><c- n>pm</c-></code> is a pointer to data member, then either
      <dl>
       <dd>— <code class="highlight"><c- n>N</c-></code> shall be <code class="highlight"><c- mi>1</c-></code>. The behavior of the function call shall be as-if invoking a pointer to member data (<strong>7.6.4</strong>) with <code class="highlight"><c- n>a1</c-><c- p>.</c-><c- o>*</c-><c- n>pm</c-></code> if <code class="highlight"><c- n>a1</c-></code> is a possibly cv-qualified class type of which <code class="highlight"><c- n>T</c-></code> is a base class or is convertible to such a class type, <code class="highlight"><c- n>a1</c-><c- o>->*</c-><c- n>pm</c-></code> otherwise. Or,
       <dd>— <code class="highlight"><c- n>N</c-></code> shall be <code class="highlight"><c- mi>2</c-></code>. The behavior of the function call shall be as-if assigning the second argument <code class="highlight"><c- n>a2</c-></code> to the result of a pointer to member data (<strong>7.6.4</strong>) with <code class="highlight"><c- p>(</c-><c- n>a1</c-><c- p>.</c-><c- o>*</c-><c- n>pm</c-><c- p>)</c-> <c- o>=</c-> <c- n>a2</c-></code> if <code class="highlight"><c- n>a1</c-></code> is a possibly cv-qualified class type of which <code class="highlight"><c- n>T</c-></code> is a base class or is convertible to such a class type, <code class="highlight"><c- p>(</c-><c- n>a1</c-><c- o>->*</c-><c- n>pm</c-><c- p>)</c-> <c- o>=</c-> <c- n>a2</c-></code> otherwise.
      </dl>
     </dl>
    </ins>
   </blockquote>
   <p>Append to §14.8.1 Predefined macro names [<strong>cpp.predefined</strong>]'s <strong>Table 16</strong> with one additional entry:</p>
   <blockquote>
    <table>
     <tbody>
      <tr>
       <th>Macro name
       <th>Value
      <tr>
       <td>
        <ins>__cpp_invokable_members</ins>
       <td>
        <ins>201811L</ins>
    </table>
   </blockquote>
   <h2 class="heading settled" data-level="6" id="acknowledgements"><span class="secno">6. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
   <p>Thank you to Jason Turner for showing me some of the internals of ChaiScript a long time ago and bringing this common problem to light. Thank you to Stephan T. Lavavej for talking about this during one of his talks. Thank you to Barry Revzin and Peter Dimov for their previous work and scholarship on this matter.</p>
  </main>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-cpp-sort">[CPP-SORT]
   <dd>Morwenn. <a href="https://github.com/Morwenn/cpp-sort">cpp-sort</a>. October 7th, 2018. URL: <a href="https://github.com/Morwenn/cpp-sort">https://github.com/Morwenn/cpp-sort</a>
   <dt id="biblio-n1695">[N1695]
   <dd>Peter Dimov. <a href="https://wg21.link/n1695">A Proposal to Make Pointers to Members Callable</a>. 9 September 2004. URL: <a href="https://wg21.link/n1695">https://wg21.link/n1695</a>
   <dt id="biblio-n4762">[N4762]
   <dd>ISO/IEC JTC1/SC22/WG21 - The C++ Standards Committee; Richard Smith. <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/n4762.pdf">N4762 - Working Draft, Standard for Programming Language C++</a>. May 7th, 2018. URL: <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/n4762.pdf">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/n4762.pdf</a>
   <dt id="biblio-p0312">[P0312]
   <dd>Barry Revzin. <a href="https://wg21.link/p0312">Making Pointers to Members Callable</a>. October 12th, 2018. URL: <a href="https://wg21.link/p0312">https://wg21.link/p0312</a>
   <dt id="biblio-pmf-cg">[pmf-CG]
   <dd>CodeGuru. <a href="https://www.codeguru.com/cpp/cpp/article.php/c17401/C-Tutorial-PointertoMember-Function.htm">C++ Tutorial: Pointer to Member Function</a>. June 30th, 2010. URL: <a href="https://www.codeguru.com/cpp/cpp/article.php/c17401/C-Tutorial-PointertoMember-Function.htm">https://www.codeguru.com/cpp/cpp/article.php/c17401/C-Tutorial-PointertoMember-Function.htm</a>
   <dt id="biblio-pmf-iso">[PMF-ISO]
   <dd>C++ Standard Foundation. <a href="https://isocpp.org/wiki/faq/pointers-to-members">Pointers to Member Functions</a>. 2018. URL: <a href="https://isocpp.org/wiki/faq/pointers-to-members">https://isocpp.org/wiki/faq/pointers-to-members</a>
   <dt id="biblio-pmf-so">[pmf-SO]
   <dd>Johannes Schaub - litb. <a href="https://stackoverflow.com/a/2402607">Function pointer to member function</a>. March 8th, 2010. URL: <a href="https://stackoverflow.com/a/2402607">https://stackoverflow.com/a/2402607</a>
   <dt id="biblio-pmf-so-algo">[pmf-SO-algo]
   <dd>Piotr Skotnicki. <a href="https://stackoverflow.com/a/30355058">Passing C++ Member Function Pointer to STL Algorithm</a>. May 20th, 2015. URL: <a href="https://stackoverflow.com/a/30355058">https://stackoverflow.com/a/30355058</a>
  </dl>