<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>N3074: More Modern Bit Utilities</title>
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in § N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *     -> ins/del.c### for candidate and proposed changes (amendments)
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *   - .correction for "candidate corrections"       (div, aside, details, section)
 *   - .addition   for "candidate additions"         (div, aside, details, section)
 *   - .correction.proposed for "proposed corrections" (div, aside, details, section)
 *   - .addition.proposed   for "proposed additions"   (div, aside, details, section)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Outdated warning for old specs
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                    Body                                    */
/******************************************************************************/

	html {
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;			  /* limit line length to 50em for readability   */
		margin: 0 auto;				/* center text within page                    */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag    */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		color: black;
		color: var(--text);
		background: white top left fixed no-repeat;
		background: var(--bg) top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em; }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small; }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 3;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;	/* Inherit the font family. */
		line-height: 1.2;		/* Keep wrapped headings compact */
		hyphens: manual;		/* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#profile-and-date {
		/* #profile-and-date is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	border-left: 0.5em solid #DEF;
	border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	 padding: .5em;
	 border: thin solid #ddd;
	 border: thin solid var(--algo-border);
	 border-radius: .5em;
	 margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	 margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	 margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	margin-left: -2em;
	}
	dl.switch {
	padding-left: 2em;
	}
	dl.switch > dt {
	text-indent: -1.5em;
	margin-top: 1em;
	}
	dl.switch > dt + dt {
	margin-top: 0;
	}
	dl.switch > dt::before {
	content: '\21AA';
	padding: 0 0.5em 0 0;
	display: inline-block;
	width: 1em;
	text-align: right;
	line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: #aa0000;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #006100;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

	/* for amendments (candidate/proposed changes) */

	.amendment ins, .correction ins, .addition ins,
	ins[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment del, .correction del, .addition del,
	del[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment.proposed ins, .correction.proposed ins, .addition.proposed ins,
	ins[class^=c].proposed {
		text-decoration-style: double;
	}
	.amendment.proposed del, .correction.proposed del, .addition.proposed del,
	del[class^=c].proposed {
		text-decoration-style: double;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

	/* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: underline #707070;
		text-decoration: underline var(--a-normal-underline);
		text-decoration-skip-ink: none;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		text-decoration-color: #bbb;
		text-decoration-color: var(--a-visited-underline);
	}

	/* Indicate interaction with the link */
	a[href]:focus,
	a[href]:hover {
		text-decoration-thickness: 2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		text-decoration-color: #c00;
		text-decoration-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	  .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,	.sidefigure img,	figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em;
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em; }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote,
	.amendment, .correction, .addition {
		margin: 1em auto;
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	blockquote > :first-child,
	.note  > p:first-child,
	.issue > p:first-child,
	.amendment > p:first-child,
	.correction > p:first-child,
	.addition > p:first-child {
		margin-top: 0;
	}
	blockquote > :last-child,
	.note  > p:last-child,
	.issue > p:last-child,
	.amendment > p:last-child,
	.correction > p:last-child,
	.addition > p:last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker,
	.amendment::before, .amendment > .marker,
	details.amendment > summary > .marker,
	.addition::before, .addition > .marker,
	addition.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	correction.amendment > summary > .marker
	{
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	  or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	  or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	  or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Amendment Box *************************************************************/

	.amendment, .correction, .addition {
		border-color: #330099;
		border-color: var(--amendment-border);
		background: #F5F0FF;
		background: var(--amendment-bg);
		color: black;
		color: var(--amendment-text);
	}
	.amendment.proposed, .correction.proposed, .addition.proposed {
		border-style: solid;
		border-block-width: 0.25em;
	}
	.amendment::before, .amendment > .marker,
	details.amendment > summary::before, details.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	details.correction > summary::before, details.correction > summary > .marker,
	.addition::before, .addition > .marker,
	details.addition > summary::before, details.addition > summary > .marker {
		color: #220066;
		color: var(--amendmentheading-text);
	}
	.amendment.proposed::before, .amendment.proposed > .marker,
	details.amendment.proposed > summary::before, details.amendment.proposed > summary > .marker,
	.correction.proposed::before, .correction.proposed > .marker,
	details.correction.proposed > summary::before, details.correction.proposed > summary > .marker,
	.addition.proposed::before, .addition.proposed > .marker,
	details.addition.proposed > summary::before, details.addition.proposed > summary > .marker {
		font-weight: bold;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 2em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		<table class="data"> highlights structural relationships in a table
		when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		Use class="complex data" for particularly complicated tables --
		(This will draw more lines: busier, but clearer.)

		Use class="long" on table cells with paragraph-like contents
		(This will adjust text alignment accordingly.)
		Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding: 0.1rem 1px 0;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Switch to using border-bottom for underlines */
		text-decoration: none;
		border-bottom: 1px solid;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:focus,
	.toc a:hover {
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
	}
	.toc {
		line-height: 1.1em;
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li			{ font-weight: bold;   }
	.toc > li li		 { font-weight: normal; }
	.toc > li li li	  { font-size:   95%;	}
	.toc > li li li li	{ font-size:   90%;	}
	.toc > li li li li li { font-size:   85%;	}

	/* @supports not (display:grid) { */
		.toc > li			{ margin: 1.5rem 0;	}
		.toc > li li		 { margin: 0.3rem 0;	}
		.toc > li li li	  { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}
		.toc > li li li li .secno { font-size: 85%; }
		.toc > li li li li li .secno { font-size: 100%; }

		.toc li {
			clear: both;
		}

		:not(li) > .toc			 { margin-left:  5rem; }
		.toc .secno				 { margin-left: -5rem; }
		.toc > li li li .secno	  { margin-left: -7rem; }
		.toc > li li li li .secno	{ margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc			 { margin-left:  4rem; }
			.toc .secno				 { margin-left: -4rem; }
			.toc > li li li			 { margin-left:  1rem; }
			.toc > li li li .secno	  { margin-left: -5rem; }
			.toc > li li li li .secno	{ margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc			 { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno				 { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li			 { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno	  { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno	{ margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			  comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom: 3px solid #054572;
			border-bottom: 3px solid var(--toclink-underline);
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index	  { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li	{ margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em; }
	ul.index dl	{ margin-top: 0; }
	ul.index dt	{ margin: .2em 0 .2em 20px;}
	ul.index dd	{ margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li a + span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/** Outdated warning **********************************************************/

.outdated-spec {
	color: black;
	color: var(--outdatedspec-text);
	background-color: rgba(0,0,0,0.5);
	background-color: var(--outdatedspec-bg);
}

.outdated-warning {
	position: fixed;
	bottom: 50%;
	left: 0;
	right: 0;
	margin: 0 auto;
	width: 50%;
	background: maroon;
	background: var(--outdated-bg);
	color: white;
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	position: absolute;
	top: 0;
	right:0;
	margin: 0;
	border: 0;
	padding: 0.25em 0.5em;
	background: transparent;
	color: white;
	color: var(--outdated-text);
	font:1em sans-serif;
	text-align:center;
}

.outdated-warning span {
	display: block;
}

.outdated-collapsed {
	bottom: 0;
	border-radius: 0;
	width: 100%;
	padding: 0;
}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}

		.outdated-warning {
			position: absolute;
			border-style: solid;
			border-color: red;
		}

		.outdated-warning input {
			display: none;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good item positioning:
		  "content column" is 50ems wide at max; less on smaller screens.
		  Extra space (after ToC + content) is empty on the right.

		  1. When item < content column, centers item in column.
		  2. When content < item < available, left-aligns.
		  3. When item > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			* http://lea.verou.me/2012/04/background-attachment-local/
			*
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
						top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
						top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
<style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      vertical-align: top;
    }
    th, td {
      border-left: none;
      border-right: none;
      padding: 0px 10px;
    }
    th {
      text-align: center;
    }
  </style>
  <meta content="Bikeshed version 26e85e599, updated Thu Dec 8 15:29:31 2022 -0800" name="generator">
  <link href="https://thephd.dev/_vendor/future_cxx/papers/C%20-%20More%20Moder%20Bit%20Utilities.html" rel="canonical">
  <link href="https://isocpp.org/favicon.ico" rel="icon">
  <meta content="7a169a798492489712421d0e8a3ca3775ad8befe" name="document-revision">
<style>

:root {
	/* Default (light) theme */
	--del-text-color: rgb(255, 25, 25);
	--del-text-decoration-color: rgba(180, 6, 6, 0.5);
	--del-text-background-color: rgba(255, 175, 175, 0.5);
	--ins-text-color: rgb(10, 180, 35);
	--ins-text-decoration-color: rgba(10, 180, 35, 0.5);
	--ins-text-background-color: rgba(175, 250, 190, 0.5);
	--diff-ins-text-color: rgb(0, 238, 255);
	--diff-ins-text-decoration-color: rgba(99, 0, 129, 0.5);
	--diff-ins-text-background-color: rgba(175, 222, 250, 0.5);
	--diff-del-text-color: rgb(225, 148, 255);
	--diff-del-text-decoration-color: rgba(99, 0, 129, 0.5);
	--diff-del-text-background-color: rgba(244, 175, 250, 0.5);
}

/* dark theme */
@media (prefers-color-scheme: dark) {
	:root {
		--del-text-color: rgb(255, 52, 52);
		--del-text-decoration-color: rgba(82, 25, 25, 0.5);
		--del-text-background-color: rgba(82, 25, 25, 0.5);
		--ins-text-color: rgb(140, 255, 140);
		--ins-text-decoration-color: rgba(140, 255, 140, 0.5);
		--ins-text-background-color: rgba(25, 82, 25, 0.5);
		--diff-ins-text-color: rgb(91, 250, 255);
		--diff-ins-text-decoration-color: rgba(91, 250, 255, 0.5);
		--diff-ins-text-background-color: rgba(0, 56, 94, 0.5);
		--diff-del-text-color: rgb(244, 175, 250);
		--diff-del-text-decoration-color: rgba(244, 175, 250, 0.5);
		--diff-del-text-background-color: rgba(152, 0, 199, 0.5);
	}
}

@media print {
	.pagebreak { break-after: always }
}

.tg  {
	border-collapse: collapse;
	border-spacing:0;
}

.tg td{
	padding:10px 10px;
	border-style: solid;
	border-width:1px;
	overflow: hidden;
	word-break: normal;
	border-color: var(--table-border-color, inherit);
}
.tg th{
	font-weight: normal;
	padding: 10px 10px;
	border-style: solid;
	border-width: 1px;
	overflow: hidden;
	word-break: normal;
	border-color: black;
}
.tg .tg-c3ow { 
	border-color: inherit;
	text-align: center;
	vertical-align: top
}

.ins, ins, ins p, ins div, span.ins, span.ins * {
	background-color: var(--ins-text-background-color);
	background: var(--ins-text-background-color);
	color: var(--ins-text-color);
	text-decoration: underline;
	text-decoration-color: var(--ins-text-decoration-color);
}

.diff-ins, diff-ins, diff-ins p, diff-ins div, span.diff-ins, span.diff-ins * {
	background-color: var(--diff-ins-text-background-color);
	background: var(--diff-ins-text-background-color);
	color: var(--diff-ins-text-color);
	text-decoration: underline double;
	text-decoration-color: var(--diff-ins-text-decoration-color);
}

.del, del, del p, del div, span.del, span.del * {
	background-color: var(--del-text-background-color);
	background: var(--del-text-background-color);
	color: var(--del-text-color);
	text-decoration: line-through;
	text-decoration-color: var(--del-text-decoration-color);
}

.diff-del, diff-del, diff-del p, diff-del div, span.diff-del, span.diff-del * {
	background-color: var(--diff-del-text-background-color);
	background: var(--diff-del-text-background-color);
	color: var(--diff-del-text-color);
	text-decoration: line-through double;
	text-decoration-color: var(--diff-del-text-decoration-color);
}

code.c-kw {
	font-weight: bold;
}

math, span.math {
	font-family: serif;
	font-style: italic;
}

ul {
	list-style-type: "— ";
}

.wording-clause {
	counter-reset: wording-paragraph;
}

.wording-clause-header {
	font-size: 115%;
	display: block;
	padding-bottom: 1em;
	clear: both;
}

.wording-clause-number {
	font-weight: bold;
}

.wording-clause-title {
	font-weight: bold;
	margin: 2em;
}

.wording-clause-stable-tag {
	float: right;
}

.wording-clause-section-title {
	font-size: 105%;
	font-weight: bold;
}

.clause-stable-tag {
	float: right;
}

.footnote-ref {
	font-size: 75%;
	vertical-align: super;
}

.footnote {
	font-size: 75%;
	vertical-align: bottom;
}

div.wording-section {
	counter-reset: wording-paragraph;
}

div.wording-numbered, div.wording-newnumbered {
	margin-left: 2.5em;
	margin-top: 1em;
	margin-bottom: 1em;
}

div.wording-numbered:before, div.wording-newnumbered:before {
	position: absolute;
	margin-left: -2.5em;
	display: block;
}

div.wording-numbered:before {
	content: counter(wording-paragraph);
	counter-increment: wording-paragraph;
	font-size: smaller;
}

div.wording-newnumbered:before {
	content: counter(wording-paragraph)"✨";
	counter-increment: wording-paragraph;
	font-size: smaller;
}

div.wording-numbered-list ul, div.wording-newnumbered ul {
	counter-reset: wording-list-item;
}

div.wording-numbered-list li, div.wording-newnumbered li {
	margin-left: 4em;
}

div.wording-numbered-list li:before, div.wording-newnumbered li:before {
	position: absolute;
	margin-left: -4em;
	display: block;
}

div.wording-numbered-list li:before {
	font-size: smaller;
	content: "(" counter(wording-paragraph) "." counter(wording-list-item) ")";
	counter-increment: wording-list-item;
}

div.wording-newnumbered-list li:before {
	content: "(✨" counter(wording-paragraph) "." counter(wording-list-item) ")";
	counter-increment: wording-list-item;
}

div.wording-numbered-0 {
	counter-reset: wording-paragraph -1;
}

div.wording-numbered-1 {
	counter-reset: wording-paragraph 0;
}

div.wording-numbered-2 {
	counter-reset: wording-paragraph 1;
}

div.wording-numbered-3 {
	counter-reset: wording-paragraph 2;
}

div.wording-numbered-4 {
	counter-reset: wording-paragraph 3;
}

div.wording-numbered-5 {
	counter-reset: wording-paragraph 4;
}

div.wording-numbered-6 {
	counter-reset: wording-paragraph 5;
}

div.wording-numbered-7 {
	counter-reset: wording-paragraph 6;
}

div.wording-numbered-8 {
	counter-reset: wording-paragraph 7;
}

div.wording-numbered-9 {
	counter-reset: wording-paragraph 8;
}

div.wording-numbered-10 {
	counter-reset: wording-paragraph 9;
}

div.wording-numbered-11 {
	counter-reset: wording-paragraph 10;
}

div.wording-numbered-12 {
	counter-reset: wording-paragraph 11;
}

div.wording-numbered-13 {
	counter-reset: wording-paragraph 12;
}

div.wording-numbered-14 {
	counter-reset: wording-paragraph 13;
}

div.wording-numbered-15 {
	counter-reset: wording-paragraph 14;
}

div.wording-numbered-16 {
	counter-reset: wording-paragraph 15;
}

div.wording-numbered-17 {
	counter-reset: wording-paragraph 16;
}

div.wording-numbered-18 {
	counter-reset: wording-paragraph 17;
}

div.wording-numbered-19 {
	counter-reset: wording-paragraph 18;
}

div.wording-numbered-20 {
	counter-reset: wording-paragraph 19;
}
</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-issues */

a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">N3074<br>More Modern Bit Utilities</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">Published Proposal, <time class="dt-updated" datetime="2023-01-05">2023-01-05</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Previous Revisions:
     <dd>None
     <dt>Predecessor:
     <dd><a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3022.htm">n3022 (r4)</a>
     <dt class="editor">Author:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:phdofthehouse@gmail.com">JeanHeyd Meneide</a>
     <dt>Latest:
     <dd><a href="https://thephd.dev/_vendor/future_cxx/papers/C%20-%20More%20Moder%20Bit%20Utilities.html">https://thephd.dev/_vendor/future_cxx/papers/C - More Modern Bit Utilities.html</a>
     <dt>Paper Source:
     <dd><a href="https://github.com/ThePhD/future_cxx/blob/main/papers/source/C%20-%20More%20Modern%20Bit%20Utilities.bs">github.com/ThePhD/future_cxx</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/ThePhD/future_cxx/issues">GitHub</a>
     <dt>Proposal Category:
     <dd>Feature Request
     <dt>Target:
     <dd>C23/C2y/C3a
     <dt>Project:
     <dd>ISO/IEC JTC1/SC22/WG14 9899: Programming Language — C
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Byte swapping, big endian / little endian load and store, and bit rotate functions widely implemented and optimized by existing compiler infrastructure today.</p>
  </div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#changelog"><span class="secno">1</span> <span class="content">Changelog</span></a>
     <ol class="toc">
      <li><a href="#changelog-r0"><span class="secno">1.1</span> <span class="content">Revision 5 - December 14<sup>th</sup>, 2022</span></a>
     </ol>
    <li><a href="#polls"><span class="secno">2</span> <span class="content">Polls</span></a>
    <li><a href="#motivation"><span class="secno">3</span> <span class="content">Introduction &amp; Motivation</span></a>
    <li>
     <a href="#design"><span class="secno">4</span> <span class="content">Design</span></a>
     <ol class="toc">
      <li><a href="#design-stdc"><span class="secno">4.1</span> <span class="content">Preliminary: Why the <code class="highlight"><c- n>stdc_</c-></code> prefix?</span></a>
      <li><a href="#design-static.size"><span class="secno">4.2</span> <span class="content">Charter: <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- k>const</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>uintN_t</c-><c- p>)]</c-></code> and More?</span></a>
      <li>
       <a href="#design-signed.vs.unsigned"><span class="secno">4.3</span> <span class="content">Signed vs. Unsigned</span></a>
       <ol class="toc">
        <li><a href="#design-signed.vs.unsigned-signed"><span class="secno">4.3.1</span> <span class="content">In Defense of Signed Integers</span></a>
        <li><a href="#design-signed.vs.unsigned-unsigned"><span class="secno">4.3.2</span> <span class="content">In Defense of Unsigned</span></a>
        <li><a href="#design-signed.vs.unsigned-choice"><span class="secno">4.3.3</span> <span class="content">Which Does This Paper Choose?</span></a>
       </ol>
      <li>
       <a href="#design-memreverse"><span class="secno">4.4</span> <span class="content">Generic 8-bit Memory Reverse and Exact-width 8-bit Memory Reverse</span></a>
       <ol class="toc">
        <li><a href="#design-memreverse-danger"><span class="secno">4.4.1</span> <span class="content">But Memory Reverse Is Dangerous?</span></a>
        <li><a href="#design-memreverse-implementation"><span class="secno">4.4.2</span> <span class="content">Vetting the Implementation / Algorithm for <code class="highlight"><c- n>memreverse</c-></code></span></a>
       </ol>
      <li>
       <a href="#design-endianness"><span class="secno">4.5</span> <span class="content"><code class="highlight"><c- n>stdc_load8_</c-><c- o>*</c-></code>/<code class="highlight"><c- n>stdc_store8_</c-><c- o>*</c-></code> Endian-Aware Functions</span></a>
       <ol class="toc">
        <li><a href="#design-endianness-implementation"><span class="secno">4.5.1</span> <span class="content">Vetting the Implementation / Algorithm for 8-bit loads and stores</span></a>
       </ol>
      <li>
       <a href="#design-bit"><span class="secno">4.6</span> <span class="content">Additional Modern Bit Utilities</span></a>
       <ol class="toc">
        <li><a href="#design-bit-generic"><span class="secno">4.6.1</span> <span class="content">Type-Generic Macros and Counts for Types</span></a>
        <li><a href="#design-bit-arguments"><span class="secno">4.6.2</span> <span class="content">Argument Types</span></a>
        <li><a href="#design-bit-returns"><span class="secno">4.6.3</span> <span class="content">Return Types</span></a>
        <li><a href="#design-bit-stdc_rotate_left.stdc_rotate_right"><span class="secno">4.6.4</span> <span class="content"><code class="highlight"><c- n>stdc_rotate_left</c-></code>/<code class="highlight"><c- n>stdc_rotate_right</c-></code></span></a>
       </ol>
     </ol>
    <li>
     <a href="#wording"><span class="secno">5</span> <span class="content">Wording</span></a>
     <ol class="toc">
      <li><a href="#wording-7.18.✨17.18.memory-reversal"><span class="secno">5.1</span> <span class="content">Add a new §7.18.✨17 and §7.18.✨18 sub-sub-clauses for "8-bit Memory Reversal" in §7.18</span></a>
      <li><a href="#wording-§7.18.✨19.endian.aware.load.store"><span class="secno">5.2</span> <span class="content">Add a new §7.18.✨19 sub-sub-clause for "Endian-Aware" functions in §7.18</span></a>
      <li><a href="#wording-7.18.✨21.22.rotate_left.rotate_right"><span class="secno">5.3</span> <span class="content">Add a new §7.18.✨21 sub-sub-clause for Rotate Left and Rotate Right Bit Utilities in §7.18</span></a>
     </ol>
    <li>
     <a href="#appendix"><span class="secno">6</span> <span class="content">Appendix</span></a>
     <ol class="toc">
      <li><a href="#appendix-implementations"><span class="secno">6.1</span> <span class="content">Example Implementations in Publicly-Available Libraries</span></a>
     </ol>
    <li><a href="#acknowledgements"><span class="secno">7</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
<script>
MathJax = {
	tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
};
</script>
<script async id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
   <div class="pagebreak"></div>
   <h2 class="heading settled" data-level="1" id="changelog"><span class="secno">1. </span><span class="content">Changelog</span><a class="self-link" href="#changelog"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="changelog-r0"><span class="secno">1.1. </span><span class="content">Revision 5 - December 14<sup>th</sup>, 2022</span><a class="self-link" href="#changelog-r0"></a></h3>
   <ul>
    <li data-md>
     <p>Initial release. ✨</p>
    <li data-md>
     <p>Removed all of the components from <a data-link-type="biblio" href="#biblio-n3022" title="N3022 - Modern Bit Utilities">[n3022]</a> that were accepted, and migrated all of the non-accepted parts to this in response to feedback from many individuals.</p>
    <li data-md>
     <p>Changed the conditions on the 8-bit memory reversal functions to be <code class="highlight"><c- n>CHAR_BIT</c-> <c- o>==</c-> <c- mi>8</c-></code>, rather than a multiple of 8. This excludes many DSP, FPGA, ASIC, and other specialized processors and hardware and implementations on that hardware.</p>
     <ul>
      <li data-md>
       <p>Users who want this functionality on those platforms should begin to converge on a design that works for them, preferably in the fashion as described by this paper and its predecessors.</p>
      <li data-md>
       <p>That designs should be implemented by those users on those platforms and brought forward for standardization at another point in time.</p>
     </ul>
   </ul>
   <h2 class="heading settled" data-level="2" id="polls"><span class="secno">2. </span><span class="content">Polls</span><a class="self-link" href="#polls"></a></h2>
   <p>No polls except for the ones noted in the older version of this paper for C23 was taken (<a data-link-type="biblio" href="#biblio-n3022" title="N3022 - Modern Bit Utilities">[n3022]</a>).</p>
   <h2 class="heading settled" data-level="3" id="motivation"><span class="secno">3. </span><span class="content">Introduction &amp; Motivation</span><a class="self-link" href="#motivation"></a></h2>
   <p>There is a lot of proposals and work that goes into figuring out the "byte order" of integer values that occupy more than 1 octet (8 bits). This is nominally important when dealing with data that comes over network interfaces and is read from files, where the data can be laid out in various orders of octets for 2-, 3-, 4-, 6-, or 8-tuples of octets. The most well-known endian structures on existing architectures include "Big Endian", where the least significant bit comes "last" and is featured prominently in network protocols and file protocols; and, "Little Endian", where the least significant bit comes "first" and is typically the orientation of data for processor and user architectures most prevalent today.</p>
   <p>In more legacy architectures (Honeywell, PDP), there also exists other orientations called "mixed" or "middle" endian. The uses of such endianness are of dubious benefit and are vanishingly rare amongst commodity and readily available hardware today, but nevertheless still represent an applicable ordering of octets.</p>
   <p>In other related programming interfaces, the C functions/macros <code class="highlight"><c- n>ntoh</c-></code> ("network to host") and <code class="highlight"><c- n>hton</c-></code> ("host to network") (usually suffixed with <code class="highlight"><c- n>l</c-></code> or <code class="highlight"><c- n>ul</c-></code> or others to specify which native data type it was being performed on such as <code class="highlight"><c- b>long</c-></code>) were used to change the byte order of a value (<a data-link-type="biblio" href="#biblio-ntohl" title="ntohl(3)">[ntohl]</a>). This became such a common operation that many compilers - among them Clang and GCC - optimized the code down to use an intrinsic <code class="highlight"><c- n>__builtin_bytewap</c-><c- p>(...)</c-></code>/<code class="highlight"><c- n>__builtin_bswap</c-><c- p>(...)</c-></code> (<a data-link-type="biblio" href="#biblio-msvc-builtins" title="_byteswap_uint64, _byteswap_ulong, _byteswap_ushort">for MSVC</a>, <a data-link-type="biblio" href="#biblio-clang-builtins" title="Clang Language Extensions: Clang Documentation">for Clang</a>, and <a data-link-type="biblio" href="#biblio-gcc-builtins" title="Other Built-in Functions Provided by GCC">for GCC</a>). These intrinsics often compiled into binary code representing cheap, simple, and fast byte swapping instructions available on many CPUs for 16, 32, 64, and sometimes 128 bit numbers. The <code class="highlight"><c- n>bswap</c-></code>/<code class="highlight"><c- n>byteswap</c-></code> intrinsics were used as the fundamental underpinning for the <code class="highlight"><c- n>ntoh</c-></code> and <code class="highlight"><c- n>hton</c-></code> functions, where a check for the translation-time endianness of the program determined if the byte order would be flipped or not.</p>
   <p>This proposal puts forth the fundamentals that make a homegrown implementation of <code class="highlight"><c- n>htonl</c-></code>, <code class="highlight"><c- n>ntoh</c-></code>, and other endianness-based functions possible in Standard C code. It also addresses many of the compiler-based intrinsics found to generate efficient machine code, with a few simpler utilities layered on top of it.</p>
   <h2 class="heading settled" data-level="4" id="design"><span class="secno">4. </span><span class="content">Design</span><a class="self-link" href="#design"></a></h2>
   <p>This is a library addition. It is meant to expose both macros and functions that can be used for translation time-suitable checks. It provides a way to check endianness within the preprocessor, and gives definitive names that allow for knowing whether the endianness is big, little, or neither. We state big, little, or neither, because there is no settled-upon name for the legacy endianness of "middle" or "mixed", nor any agreed upon ordering for such a "middle" or "mixed" endianness between architectures. This is not the case for big endian or little endian, where one is simply the reverse of the other, always, in every case, across architectures, file protocols, and network specifications.</p>
   <p>The next part of the design is functions for working with groupings of 8 bits. They are meant to communicate with network or file protocols and formats that have become ubiquitous in computing for the last 30 years.</p>
   <p>Finally, this design adds new left/right bit rotation functions, all within the <code class="highlight"><c- cp>#include</c-> &lt;stdbit.h></code> header.</p>
   <h3 class="heading settled" data-level="4.1" id="design-stdc"><span class="secno">4.1. </span><span class="content">Preliminary: Why the <code class="highlight"><c- n>stdc_</c-></code> prefix?</span><a class="self-link" href="#design-stdc"></a></h3>
   <p>We use the <code class="highlight"><c- n>stdc_</c-></code> prefix for these functions so that we do not have to struggle with taking common words away from the end user. Because we now have 31 bytes of linker name significance, we can afford to have some sort of prefix rather than spend all of our time carving out reserved words or header-specific extensions. This will let us have good names that very clearly map to industry practice, without replacing industry code or being forced to be compatible with existing code that already has taken the name with sometimes-conflicting argument conventions.</p>
   <h3 class="heading settled" data-level="4.2" id="design-static.size"><span class="secno">4.2. </span><span class="content">Charter: <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- k>const</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>uintN_t</c-><c- p>)]</c-></code> and More?</span><a class="self-link" href="#design-static.size"></a></h3>
   <p>There are 2 choices on how to represent sized pointer arguments. The first is a <code class="highlight"><c- b>void</c-><c- o>*</c-> <c- n>ptr</c-></code> convention for functions arguments in this proposal. The second is an <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]</c-></code>/<code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>sizeof</c-><c- p>(</c-><c- n>uintN_t</c-><c- p>)]</c-></code> convention.</p>
   <p>To start, we still put any <code class="highlight"><c- n>size</c-></code> + <code class="highlight"><c- n>ptr</c-></code> arguments in the proper "size first, pointer second" configuration so that implementation extensions which allow <code class="highlight"><c- b>void</c-> <c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]</c-></code> can exist no matter what choice is made here. That part does not change. The <code class="highlight"><c- b>void</c-><c- o>*</c-></code> argument convention mean that pointers to structures, or similar, can be passed to these functions without needing a cast. This represents the totality of the ease of use argument. The <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]</c-></code> argument convention can produce both better compile-time safety and articulate requirements using purely the function declaration, without needing to look up prose from the C Standard or implementation documentation. The cost is that any use of the function will require a cast in strictly conforming code.</p>
   <p>One of the tipping arguments in favor of our choice of <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]</c-></code> is that <code class="highlight"><c- b>void</c-><c- o>*</c-></code> can be dangerous, especially since we still do not have a <code class="highlight"><c- n>nullptr</c-></code> constant in the language and <code class="highlight"><c- mi>0</c-></code> can be used for both the size and the pointer argument. (Which is, very sadly, an actual bug that happens in existing code. Especially when users mix <code class="highlight"><c- n>memset</c-></code> and <code class="highlight"><c- n>memcpy</c-></code> calls and use the wrong <code class="highlight"><c- mi>0</c-></code> argument because of writing one and meaning the other, and copying values over a large part of their 0-pointer in their low-level driver code.) Using an <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-><c- o>*</c-></code> (or its statically-sized array function argument form) means that usage of the functions below would require explicit casting on the part of the user. This is, in fact, the way it is presented in <a data-link-type="biblio" href="#biblio-portable-endianness" title="portable-endianness">[portable-endianness]</a>: as far as existing practice is concerned, users of the code would rather cast and preserve safety rather than easily use something like <code class="highlight"><c- n>stdc_memreverse8</c-></code> with the guts of their structure.</p>
   <h3 class="heading settled" data-level="4.3" id="design-signed.vs.unsigned"><span class="secno">4.3. </span><span class="content">Signed vs. Unsigned</span><a class="self-link" href="#design-signed.vs.unsigned"></a></h3>
   <p>This paper has gone back and forth between signed vs. unsigned <code class="highlight"><c- n>count</c-></code> offsets for the <code class="highlight"><c- n>rotl</c-></code>/<code class="highlight"><c- n>rotr</c-></code> instruction-based functions, and similarly the return types for many of the types which return purely a "count"-style value. Some important properties and facts follow:</p>
   <ul>
    <li data-md>
     <p>All of the values returned from the functions here return conceptually unsigned/natural numbers (0 to potentially infinity, but not negative).</p>
    <li data-md>
     <p>Some existing practice — e.g., C++ — has in recent years struggled against unsigned integers and tried to move towards signed. "Anything that is a count should just be an <code class="highlight"><c- b>int</c-></code>", and similar guidance, grows from these functions and their types.</p>
    <li data-md>
     <p>Conversely, some of C’s most fierce proponents use unsigned numbers almost exclusively until they have a proper justification for a signed number. For them, <code class="highlight"><c- b>unsigned</c-></code>/<code class="highlight"><c- b>size_t</c-></code> is the default.</p>
    <li data-md>
     <p>Whatever decision we make for one (e.g., for the argument type of <code class="highlight"><c- n>rotate_left</c-></code> or <code class="highlight"><c- n>rotate_right</c-></code>), we must make the identical decision for the return values of other functions (e.g., <code class="highlight"><c- n>count_ones</c-></code>/<code class="highlight"><c- n>popcount</c-></code>, or similar).</p>
   </ul>
   <p>This brings up a lot of questions about whether or not the functions here should be signed or unsigned. We will analyze this primarily from the standpoint of <code class="highlight"><c- n>rotate_left</c-></code> and <code class="highlight"><c- n>rotate_right</c-></code>, as that has the greatest impacts for the portability and semantics of the code presented here.</p>
   <h4 class="heading settled" data-level="4.3.1" id="design-signed.vs.unsigned-signed"><span class="secno">4.3.1. </span><span class="content">In Defense of Signed Integers</span><a class="self-link" href="#design-signed.vs.unsigned-signed"></a></h4>
   <p>Let us consider a universe where <code class="highlight"><c- n>stdc_rotate_left</c-></code> and friends take a signed <code class="highlight"><c- n>count</c-></code>. This allows negative numbers to be passed to the count value for the rotate left. So, when <code class="highlight"><c- n>stdc_rotate_left_uc</c-><c- p>(</c-><c- mi>1</c-><c- p>,</c-> <c- mi>-1</c-><c- p>)</c-></code> is called, it will call itself again with <code class="highlight"><c- n>stdc_rotate_right_uc</c-><c- p>(</c-><c- n>value</c-><c- p>,</c-> <c- o>-</c-><c- n>count</c-><c- p>)</c-></code>; if (e.g.) <code class="highlight"><c- n>stdc_rotate_right_uc</c-><c- p>(</c-><c- mi>1</c-><c- p>,</c-> <c- mi>-1</c-><c- p>)</c-></code> is called, it will call itself again with <code class="highlight"><c- n>stdc_rotate_left_uc</c-><c- p>(</c-><c- n>value</c-><c- p>,</c-> <c- o>-</c-><c- n>count</c-><c- p>)</c-></code>. This is because, specification-wise, these functions are symmetric and cyclical in what they are meant to do. This matches the behavior from C++ and avoids undefined behavior for negative numbers, while also avoiding too-large shift errors from signed-to-unsigned conversions.</p>
   <p>SDCC and several other compilers optimize for left and right shifts (<a data-link-type="biblio" href="#biblio-sdcc" title="SDCC Manual §8.1.9 - Bit Rotations">[sdcc]</a>). Texas Instruments and a handful of other specialist architectures also have "variable shift" instructions (SSHVL), which uses the sign of the argument to shift in one direction or the other (<a data-link-type="biblio" href="#biblio-ti-tms320c64x" title="TMS320C64x/C64x+ DSP: CPU and Instruction Set">[ti-tms320c64x]</a>). Having a <code class="highlight"><c- n>rotate_left</c-></code> where the a negative number produces the opposite <code class="highlight"><c- n>rotate_right</c-></code> cyclic operation (and vice-versa) means that both of these architectures can optimize efficiently in the case of hardcoded constants, and still produce well-defined behavior otherwise (<code class="highlight"><c- n>SSHVL</c-></code> instructions just deploy a "negated by default" for the count value or not, depending on whether the <code class="highlight"><c- n>left</c-></code> or <code class="highlight"><c- n>right</c-></code> variant is called, other architectures propagate the information to shift left or right). This also follows existing practice with analogous functions from the C++ standard library.</p>
   <p>To test code generation for using a signed integer and 2’s complement arithmetic, we used both C++ and C code samples. The C++ code is based on its accepted C++20 proposal, <a data-link-type="biblio" href="#biblio-p0463" title="endian. Just endian.">[p0463]</a>. It’s a fairly accurate predictor of how notable compilers handle this kind of specification. The generated assembly for the compilers turns out to be optimal, so long as an implementation does not do a literal copy-paste of the specification’s text</p>
   <p><a href="https://godbolt.org/z/xxbxbrdj1">Using non-constant offset, with generated x86_64 assembly</a>:</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;bit>

<c- k>extern</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>x</c-><c- p>;</c->
<c- k>extern</c-> <c- b>int</c-> <c- n>offset</c-><c- p>;</c->

<c- b>int</c-> <c- nf>main</c-> <c- p>()</c-> <c- p>{</c->
    <c- b>int</c-> <c- n>l</c-> <c- o>=</c-> <c- n>std</c-><c- o>::</c-><c- n>rotl</c-><c- p>(</c-><c- n>x</c-><c- p>,</c-> <c- n>offset</c-><c- p>);</c->
    <c- b>int</c-> <c- n>r</c-> <c- o>=</c-> <c- n>std</c-><c- o>::</c-><c- n>rotr</c-><c- p>(</c-><c- n>x</c-><c- p>,</c-> <c- n>offset</c-><c- p>);</c->
    <c- k>return</c-> <c- n>l</c-> <c- o>+</c-> <c- n>r</c-><c- p>;</c->
<c- p>}</c->
</pre>
<pre class="language-s highlight"><c- n>main</c-><c- o>:</c-> <c- c1># @main</c->
	<c- n>mov</c->     <c- n>eax</c-><c- p>,</c-> <c- n>dword</c-> <c- n>ptr</c-> <c- p>[</c-><c- n>rip</c-> <c- o>+</c-> <c- n>x</c-><c- p>]</c->
	<c- n>mov</c->     <c- n>cl</c-><c- p>,</c-> <c- n>byte</c-> <c- n>ptr</c-> <c- p>[</c-><c- n>rip</c-> <c- o>+</c-> <c- n>offset</c-><c- p>]</c->
	<c- n>mov</c->     <c- n>edx</c-><c- p>,</c-> <c- n>eax</c->
	<c- n>rol</c->     <c- n>edx</c-><c- p>,</c-> <c- n>cl</c->
	<c- n>ror</c->     <c- n>eax</c-><c- p>,</c-> <c- n>cl</c->
	<c- n>add</c->     <c- n>eax</c-><c- p>,</c-> <c- n>edx</c->
	<c- n>ret</c->
</pre>
   <p>— And, <a href="https://godbolt.org/z/z6vTqWoTj">using constant offset, with generated x86_64 assembly</a>.</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;bit>

<c- k>extern</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>x</c-><c- p>;</c->

<c- b>int</c-> <c- nf>main</c-> <c- p>()</c-> <c- p>{</c->
    <c- b>int</c-> <c- n>l</c-> <c- o>=</c-> <c- n>std</c-><c- o>::</c-><c- n>rotl</c-><c- p>(</c-><c- n>x</c-><c- p>,</c-> <c- mi>-13</c-><c- p>);</c->
    <c- b>int</c-> <c- n>r</c-> <c- o>=</c-> <c- n>std</c-><c- o>::</c-><c- n>rotr</c-><c- p>(</c-><c- n>x</c-><c- p>,</c-> <c- mi>-13</c-><c- p>);</c->
    <c- k>return</c-> <c- n>l</c-> <c- o>+</c-> <c- n>r</c-><c- p>;</c->
<c- p>}</c->
</pre>
<pre class="language-s highlight"><c- n>main</c-><c- o>:</c-> <c- c1># @main</c->
	<c- n>mov</c->     <c- n>eax</c-><c- p>,</c-> <c- n>dword</c-> <c- n>ptr</c-> <c- p>[</c-><c- n>rip</c-> <c- o>+</c-> <c- n>x</c-><c- p>]</c->
	<c- n>mov</c->     <c- n>ecx</c-><c- p>,</c-> <c- n>eax</c->
	<c- n>rol</c->     <c- n>ecx</c-><c- p>,</c-> <c- m>19</c->
	<c- n>rol</c->     <c- n>eax</c-><c- p>,</c-> <c- m>13</c->
	<c- n>add</c->     <c- n>eax</c-><c- p>,</c-> <c- n>ecx</c->
	<c- n>ret</c->
</pre>
   <p>The generated code shows that the compiler understands the symmetric nature of the operations (from the constant code) and also shows that it will appropriately handle it even when it cannot see through constant values. The same can be shown when writing C code using a variety of styles, <a href="https://godbolt.org/z/f7zEaTsoc">as shown here</a>:</p>
<pre class="language-cpp highlight"><c- cp>#if UNSIGNED_COUNT == 1</c->

<c- k>static</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- nf>rotate_right</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->

<c- kr>inline</c-> <c- k>static</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- nf>rotate_left</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>)</c-> <c- p>{</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>c</c-> <c- o>=</c-> <c- n>count</c-> <c- o>%</c-> <c- mi>32</c-><c- p>;</c->
	<c- k>return</c-> <c- n>value</c-> <c- o>>></c-> <c- n>c</c-> 
		<c- o>|</c-> <c- n>value</c-> <c- o>&lt;&lt;</c-> <c- p>(</c-><c- mi>32</c-> <c- o>-</c-> <c- n>c</c-><c- p>);</c->
<c- p>}</c->

<c- kr>inline</c-> <c- k>static</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- nf>rotate_right</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>)</c-> <c- p>{</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>c</c-> <c- o>=</c-> <c- n>count</c-> <c- o>%</c-> <c- mi>32</c-><c- p>;</c->
	<c- k>return</c-> <c- n>value</c-> <c- o>&lt;&lt;</c-> <c- n>c</c->
		<c- o>|</c-> <c- n>value</c-> <c- o>>></c-> <c- p>(</c-><c- mi>32</c-> <c- o>-</c-> <c- n>c</c-><c- p>);</c->
<c- p>}</c->

<c- cp>#elif TWOS_COMPLEMENT_CAST == 1</c->

<c- k>static</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- nf>rotate_right</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->

<c- kr>inline</c-> <c- k>static</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- nf>rotate_left</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>)</c-> <c- p>{</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>c</c-> <c- o>=</c-> <c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-><c- p>)</c-><c- n>count</c-><c- p>;</c->
	<c- n>c</c-> <c- o>=</c-> <c- n>c</c-> <c- o>%</c-> <c- mi>32</c-><c- p>;</c->
	<c- k>return</c-> <c- n>value</c-> <c- o>>></c-> <c- n>c</c->
		<c- o>|</c-> <c- n>value</c-> <c- o>&lt;&lt;</c-> <c- p>(</c-><c- mi>32</c-> <c- o>-</c-> <c- n>c</c-><c- p>);</c->
<c- p>}</c->

<c- kr>inline</c-> <c- k>static</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- nf>rotate_right</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>)</c-> <c- p>{</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>c</c-> <c- o>=</c-> <c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-><c- p>)</c-><c- n>count</c-><c- p>;</c->
	<c- n>c</c-> <c- o>=</c-> <c- n>c</c-> <c- o>%</c-> <c- mi>32</c-><c- p>;</c->
	<c- k>return</c-> <c- n>value</c-> <c- o>&lt;&lt;</c-> <c- n>c</c->
		<c- o>|</c-> <c- n>value</c-> <c- o>>></c-> <c- p>(</c-><c- mi>32</c-> <c- o>-</c-> <c- n>c</c-><c- p>);</c->
<c- p>}</c->

<c- cp>#else</c->

<c- k>static</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- nf>rotate_right</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->

<c- kr>inline</c-> <c- k>static</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- nf>rotate_left</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>)</c-> <c- p>{</c->
	<c- b>int</c-> <c- n>c</c-> <c- o>=</c-> <c- n>count</c-> <c- o>%</c-> <c- mi>32</c-><c- p>;</c->
	<c- k>if</c-> <c- p>(</c-><c- n>c</c-> <c- o>&lt;</c-> <c- mi>0</c-><c- p>)</c->  <c- p>{</c->
		<c- k>return</c-> <c- n>rotate_right</c-><c- p>(</c-><c- n>value</c-><c- p>,</c-> <c- o>-</c-><c- n>c</c-><c- p>);</c->
	<c- p>}</c->
	<c- k>return</c-> <c- n>value</c-> <c- o>>></c-> <c- n>c</c->
		<c- o>|</c-> <c- n>value</c-> <c- o>&lt;&lt;</c-> <c- p>(</c-><c- mi>32</c-> <c- o>-</c-> <c- n>c</c-><c- p>);</c->
<c- p>}</c->

	<c- kr>inline</c-> <c- k>static</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- nf>rotate_right</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>)</c-> <c- p>{</c->
	<c- b>int</c-> <c- n>c</c-> <c- o>=</c-> <c- n>count</c-> <c- o>%</c-> <c- mi>32</c-><c- p>;</c->
	<c- k>if</c-> <c- p>(</c-><c- n>c</c-> <c- o>&lt;</c-> <c- mi>0</c-><c- p>)</c->  <c- p>{</c->
		<c- k>return</c-> <c- n>rotate_left</c-><c- p>(</c-><c- n>value</c-><c- p>,</c-> <c- o>-</c-><c- n>c</c-><c- p>);</c->
	<c- p>}</c->
	<c- k>return</c-> <c- n>value</c-> <c- o>&lt;&lt;</c-> <c- n>c</c->
		<c- o>|</c-> <c- n>value</c-> <c- o>>></c-> <c- p>(</c-><c- mi>32</c-> <c- o>-</c-> <c- n>c</c-><c- p>);</c->
<c- p>}</c->

<c- cp>#endif</c->

<c- cp>#if UNSIGNED_COUNT == 1</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- nf>f</c-> <c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>x</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>offset</c-><c- p>)</c-> <c- p>{</c->
<c- cp>#else</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- n>f</c-> <c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>x</c-><c- p>,</c-> <c- b>int</c-> <c- n>offset</c-><c- p>)</c-> <c- p>{</c->
<c- cp>#endif</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>l</c-> <c- o>=</c-> <c- n>rotate_left</c-><c- p>(</c-><c- n>x</c-><c- p>,</c-> <c- n>offset</c-><c- p>);</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>r</c-> <c- o>=</c-> <c- n>rotate_right</c-><c- p>(</c-><c- n>x</c-><c- p>,</c-> <c- n>offset</c-><c- p>);</c->
	<c- k>return</c-> <c- n>l</c-> <c- o>+</c-> <c- n>r</c-><c- p>;</c->
<c- p>}</c->
</pre>
   <p>When using the various definitions, we find that the generated assembly for <code class="highlight"><c- n>f</c-></code> is identically good using either the internal unsigned "two’s complement" cast, or by just using an unsigned number. Because of how poorly basic mathematics with unsigned numbers happens, we want to avoid a situation where negation or subtraction with unsigned qualities may yield undesirable results or promotions. Therefore, we used signed integers for both the offset count and the return values of these functions. Note that even in purely standard C, converting from a signed integer to an unsigned integer is perfectly well-defined behavior and does not raise any signals:</p>
   <blockquote>
    <p><sup>2</sup>   Otherwise, if the new type is unsigned, the value is converted by repeatedly adding or subtracting one more than the maximum value that can be represented in the new type until the value is in the range of the new type.</p>
    <p>— §6.3.1.3, ¶2, ISO/IEC 9899:202x "C2x" Standard</p>
   </blockquote>
   <p>Finally, the vast majority of existing practice takes the offset value in as a signed integer, and all the return types are also still some form of signed integer (unless the intrinsic is returning the exact same unsigned value put in that was manipulated). It also allows "plain math" being done on the type to naturally manifest negative numbers without accidentally having roundtripping or signed/unsigned conversion issues.</p>
   <h4 class="heading settled" data-level="4.3.2" id="design-signed.vs.unsigned-unsigned"><span class="secno">4.3.2. </span><span class="content">In Defense of Unsigned</span><a class="self-link" href="#design-signed.vs.unsigned-unsigned"></a></h4>
   <p>Unsigned, on the other hand, has existing practice <strong>in hardware</strong>. While the intrinsics defined by glibc, C++'s standard libraries, and many more use signed integers, they are conceptually <strong>unsigned</strong> in their implementations. For example, for a 32-bit rotate, most standard libraries taking an <code class="highlight"><c- b>int</c-></code> offset parameter perform:</p>
<pre class="language-cpp highlight"><c- n>count</c-> <c- o>=</c-> <c- n>count</c-> <c- o>&amp;</c-> <c- mi>31</c-><c- p>;</c->
</pre>
   <p>This is <strong>critical</strong> for optimization here. Note that, if we were to provide a specification using a <code class="highlight"><c- b>signed</c-></code> offset, our specification has to very deliberately specify that we are going to negate the value and then pass it to the rotate of the opposite direction. This is, effectively, the same as obliterating the sign value and then calling the (symmetrical, cyclical) rotate: a 32-bit rotate therefore can get identical codegen as a signed variant by using the a bit <code class="highlight"><c- n>AND</c-></code> (NOT a normal <code class="highlight"><c- o>%</c-> <c- mi>32</c-></code>, as that preserves the sign as we do NOT want that). For an unsigned variant, no such trickery is necessary. Simply truncating the value using:</p>
<pre class="language-cpp highlight"><c- n>count</c-> <c- o>=</c-> <c- n>count</c-> <c- o>%</c-> <c- mi>32</c-><c- p>;</c->
</pre>
   <p>produces optimal code generation for most compilers, as they understand that bit <code class="highlight"><c- n>AND</c-></code> for hexadecimal <code class="highlight"><c- mh>0x1F</c-></code> (decimal <code class="highlight"><c- mi>31</c-></code>) is identical to modulus of decimal <code class="highlight"><c- mi>32</c-></code>. This means that, by default, unsigned values are the same here. Abusing 2’s complement, one can save this by simply doing <code class="highlight"><c- b>unsigned</c-> <c- n>u_count</c-> <c- o>=</c-> <c- p>(</c-><c- b>unsigned</c-><c- p>)</c-><c- n>count</c-><c- p>;</c-></code> and then perform modulus to get the same behavior as performing bit <code class="highlight"><c- n>AND</c-></code> with <code class="highlight"><c- mi>31</c-></code>. The "obvious" code is the efficient code here, as shown by the example of the assembly above.</p>
   <p>Rust is one of the few languages that provides optimal versions of this code using <code class="highlight"><c- b>unsigned</c-></code> <a data-link-type="biblio" href="#biblio-rust-rotate_left" title="u32 methods: rotate_left">[rust-rotate_left]</a>. Their code is optimal under both optimizations and a lack thereof, compared to C and C++ code which struggles with function call elision and similar. This may be aided in the future by having this paper put into the C standard, which would allow compilers to treat standard-specific rotate calls as intrinsics to be replaced with the instructions directly.</p>
   <p>All in all, unsigned naturally optimizes better and matches the size type of C. It has no undefined behavior on overflow and produces better assembly in-general when it comes to bit intrinsics. Shifting behavior is also well-defined for unsigned types and not signed types, further compounding unsigned types as far better than their signed counterparts.</p>
   <h4 class="heading settled" data-level="4.3.3" id="design-signed.vs.unsigned-choice"><span class="secno">4.3.3. </span><span class="content">Which Does This Paper Choose?</span><a class="self-link" href="#design-signed.vs.unsigned-choice"></a></h4>
   <p>Ultimately, this paper chooses unsigned integer types. The core of the reasoning is that this avoids undefined behavior in the specification and is also morally and spiritually what architectures expect (at least for 2’s complement). Since C23 embraces 2’s complement, using unsigned here would work more or less identically to a signed integer anyways and therefore it just does not matter enough to want to write an exception for <code class="highlight"><c- n>INT_MIN</c-></code>/<code class="highlight"><c- n>INT_MAX</c-></code> into the specification for handling e.g. the <code class="highlight"><c- n>count</c-></code> parameter of <code class="highlight"><c- n>stdc_rotate_left</c-></code> or <code class="highlight"><c- n>stdc_rotate_right</c-></code>.</p>
   <h3 class="heading settled" data-level="4.4" id="design-memreverse"><span class="secno">4.4. </span><span class="content">Generic 8-bit Memory Reverse and Exact-width 8-bit Memory Reverse</span><a class="self-link" href="#design-memreverse"></a></h3>
   <p>In order to accommodate both a wide variety of architectures but also support minimum-width integer optimized intrinsics, this proposal takes from the industry 2 forms of byteswap:</p>
   <ul>
    <li data-md>
     <p>one generic <code class="highlight"><c- n>mem_</c-></code> version which takes a pointer and the number of bytes to perform a reverse operation; and,</p>
    <li data-md>
     <p>a sequence of exact-width byte swapping instructions which (typically) map directly to intrinsics available in compilers and instructions in hardware.</p>
   </ul>
   <p>These end up inhabiting the <code class="highlight"><c- n>stdbit</c-><c- p>.</c-><c- n>h</c-></code> header and have the following interface:</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>
<c- cp>#include</c-> &lt;limits.h>
<c- cp>#include</c-> &lt;stdint.h>

<c- cp>#if (CHAR_BIT % 8 == 0)</c->
<c- b>void</c-> <c- nf>stdc_memreverse8</c-><c- p>(</c-><c- b>size_t</c-> <c- n>n</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]);</c->
<c- n>uintN_t</c-> <c- nf>stdc_memreverse8uN</c-><c- p>(</c-><c- n>uintN_t</c-> <c- n>value</c-><c- p>);</c->
<c- cp>#endif</c->
</pre>
   <p>where <code class="highlight"><c- n>N</c-></code> is one of the minimum-width integer types such as <code class="highlight"><c- mi>8</c-></code>, <code class="highlight"><c- mi>24</c-></code>, <code class="highlight"><c- mi>16</c-></code>, <code class="highlight"><c- mi>32</c-></code>, <code class="highlight"><c- mi>64</c-></code>, <code class="highlight"><c- mi>128</c-></code>, and others. On most architectures, this matches the builtins (<a data-link-type="biblio" href="#biblio-msvc-builtins" title="_byteswap_uint64, _byteswap_ulong, _byteswap_ushort">MSVC</a>, <a data-link-type="biblio" href="#biblio-clang-builtins" title="Clang Language Extensions: Clang Documentation">Clang</a>, <a data-link-type="biblio" href="#biblio-gcc-builtins" title="Other Built-in Functions Provided by GCC">GCC</a>) and the result of compiler optimizations that produce instructions for many existing architectures as shown in the <a data-link-type="biblio" href="#biblio-portable-endianness" title="portable-endianness">README of this portable endianness function implementation</a>. We use the exact-width values for the <code class="highlight"><c- n>uN</c-></code>-suffixed functions because we <strong>expect</strong> that C compilers would want to lower the <code class="highlight"><c- n>stdc_memreverse8uN</c-></code> call to existing practice of <code class="highlight"><c- n>byteswapN</c-></code> instructions and compiler intrinsics. Using <code class="highlight"><c- n>uint_leastN_t</c-></code> reduces the ability to match these existing optimizations in the case where <code class="highlight"><c- n>uintN_t</c-></code> functions are not defined.</p>
<pre class="language-cpp highlight"><c- k>const</c-> <c- b>uint32_t</c-> <c- n>normal</c-> <c- o>=</c-> <c- mh>0xAABBCCDDu</c-><c- p>;</c->
<c- k>const</c-> <c- b>uint32_t</c-> <c- n>reversed</c-> <c- o>=</c-> <c- mh>0xDDCCBBAAu</c-><c- p>;</c->
<c- n>assert</c-><c- p>(</c-><c- n>stdc_memreverse8u32</c-><c- p>(</c-><c- n>normal</c-><c- p>)</c-> <c- o>==</c-> <c- n>reversed</c-><c- p>);</c->
</pre>
   <h4 class="heading settled" data-level="4.4.1" id="design-memreverse-danger"><span class="secno">4.4.1. </span><span class="content">But Memory Reverse Is Dangerous?</span><a class="self-link" href="#design-memreverse-danger"></a></h4>
   <p>Byte swapping, by itself, is absolutely dangerous in terms of code portability. Users often program strictly for their own architecture when doing serialization, and do not take into consideration that their endianness can change. This means that, while <code class="highlight"><c- n>stdc_memreverse</c-></code> functions can compile down to intrinsics, those intrinsics get employed to change "little endian" to "big endian" without performing the necessary "am I already in the right endianness" check. Values that are <em>already</em> in the proper byte order for their target serialization get swapped, resulting in an incorrect byte order for the target network protocol, file format, or other binary serialization target.</p>
   <p>The inclusion of the <code class="highlight"><c- o>&lt;</c-><c- n>stdbit</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> header reduces this problem by giving access to the <code class="highlight"><c- n>__STDC_NATIVE_ENDIAN__</c-></code> macro definition, but does not fully eliminate it. This is why many Linux and BSDs include functions which directly transcribe from one endianness to another. This is why the <a data-link-type="biblio" href="#biblio-endian-fallacy" title="The Byte Order Fallacy">Byte Order Fallacy</a> has spread so far in Systems Programming communities, and why many create their own versions of this both in official widespread vendor code (<a data-link-type="biblio" href="#biblio-linux-endian" title="endian(3)">[linux-endian]</a>) and in more personal code used for specific distributions (<a data-link-type="biblio" href="#biblio-portable-endianness" title="portable-endianness">[portable-endianness]</a>). Thusly, this proposal includes some endianness functions, specified just below.</p>
   <h4 class="heading settled" data-level="4.4.2" id="design-memreverse-implementation"><span class="secno">4.4.2. </span><span class="content">Vetting the Implementation / Algorithm for <code class="highlight"><c- n>memreverse</c-></code></span><a class="self-link" href="#design-memreverse-implementation"></a></h4>
   <p>In previous iterations of the paper, there were various off-by-one errors in transcribing the algorithm used to get the job done. Therefore, we more directly lifted the code for the algorithm from <a href="https://github.com/soasis/idk/blob/main/include/ztd/idk/detail/bit.memreverse.impl.h#L55-L75">the example implementation here</a>. To further prove that it works on "bytes" that may be larger than 8 bits, we also took the following steps.</p>
   <ul>
    <li data-md>
     <p>Implemented it as a macro (as shown from the link above).</p>
    <li data-md>
     <p>Use that macro implementation in the normal <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-></code>-based <a href="https://github.com/soasis/idk/blob/main/source/ztd/idk/bit.memreverse.c#L54">implementation</a>;</p>
    <li data-md>
     <p>Use that macro implementation all unsigned integer types that are larger than <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-></code> to <a href="https://github.com/soasis/idk/blob/main/tests/idk/basic_run_time_c%2B%2B/source/bit.memreverse.8.no-alias.cpp#L44-L65">test if it deals with sub-8-bit-groups correctly</a>;</p>
    <li data-md>
     <p>Apply <code class="highlight"><c- o>-</c-><c- n>fno</c-><c- o>-</c-><c- n>strict</c-><c- o>-</c-><c- n>alias</c-></code> or <a href="https://github.com/soasis/idk/blob/main/tests/idk/basic_run_time_c%2B%2B/CMakeLists.txt#L62">equivalent flag to the compiler</a> and test across platforms.</p>
   </ul>
   <p>All of the tests pass across the three major compilers (MSVC, GCC, and Clang) and across platforms (Windows, Linux, Mac OS). We find this to be compelling enough to ensure that the implementation and the algorithm in the wording is suitably correct. Nevertheless, any wording failures present here represent the authors' collective inability to properly serialize wording, not that an implementation is not possible or too inventive.</p>
   <p>Regardless of how well its tested and checked, the paper still restricts the content to <code class="highlight"><c- n>CHAR_BIT</c-> <c- o>==</c-> <c- mi>8</c-></code> bits, and we know that this has both wide implementation experience and is implementable.</p>
   <h3 class="heading settled" data-level="4.5" id="design-endianness"><span class="secno">4.5. </span><span class="content"><code class="highlight"><c- n>stdc_load8_</c-><c- o>*</c-></code>/<code class="highlight"><c- n>stdc_store8_</c-><c- o>*</c-></code> Endian-Aware Functions</span><a class="self-link" href="#design-endianness"></a></h3>
   <p>Functions meant to transport bytes to a specific endianness need 3 pieces of information:</p>
   <ul>
    <li data-md>
     <p>the sign of the input/output;</p>
    <li data-md>
     <p>the byte order of the input; and,</p>
    <li data-md>
     <p>the desired byte order of the output.</p>
   </ul>
   <p>To represent any operation that goes from/to the byte order that things like <code class="highlight"><c- b>long</c-> <c- b>long</c-></code>s are kept in, the Linux/BSD/etc. APIs use the term "host", represented by <code class="highlight"><c- n>h</c-></code>. Every other operation is represented by explicitly naming it, particularly as <code class="highlight"><c- n>be</c-></code> or <code class="highlight"><c- n>le</c-></code> for "big endian" or "little endian". Again, because of the severe confusion that comes from what the exact byte order a "mixed endian" multi byte scalar is meant to be in, there seems not to exist any widely available practice regarding what to call a PDP/Honeywell endian configuration. Therefore, mixed/bi/middle-endian is not included in this proposal. It can be added at a later date if the community ever settles on a well-defined naming convention that can be shared between codebases, standards, and industries.</p>
   <p>The specification for the endianness functions borrows from many different sources listed above, and is as follows:</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>
<c- cp>#include</c-> &lt;limits.h>
<c- cp>#include</c-> &lt;stdint.h>

<c- cp>#if (CHAR_BIT) == 8</c->
<c- b>void</c-> <c- nf>stdc_store8_leuN</c-><c- p>(</c-><c- n>uint_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_beuN</c-><c- p>(</c-><c- n>uint_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>uint_leastN_t</c-> <c- nf>stdc_load8_leuN</c-><c- p>(</c->
	<c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>uint_leastN_t</c-> <c- nf>stdc_load8_beuN</c-><c- p>(</c->
	<c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_aligned_leuN</c-><c- p>(</c-><c- n>uint_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_aligned_beuN</c-><c- p>(</c-><c- n>uint_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>uint_leastN_t</c-> <c- nf>stdc_load8_aligned_leuN</c-><c- p>(</c->
	<c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>uint_leastN_t</c-> <c- nf>stdc_load8_aligned_beuN</c-><c- p>(</c->
	<c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->

<c- b>void</c-> <c- nf>stdc_store8_lesN</c-><c- p>(</c-><c- n>int_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_besN</c-><c- p>(</c-><c- n>int_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>int_leastN_t</c-> <c- nf>stdc_load8_lesN</c-><c- p>(</c->
	<c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>int_leastN_t</c-> <c- nf>stdc_load8_besN</c-><c- p>(</c->
	<c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_aligned_lesN</c-><c- p>(</c-><c- n>int_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_aligned_besN</c-><c- p>(</c-><c- n>int_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>int_leastN_t</c-> <c- nf>stdc_load8_aligned_lesN</c-><c- p>(</c->
	<c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>int_leastN_t</c-> <c- nf>stdc_load8_aligned_besN</c-><c- p>(</c->
	<c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- cp>#endif</c->
</pre>
   <p>Thanks to some feedback from implementers and librarians, this first implementation would also need an added signed variant to the load and store functions as well as aligned and unaligned loads and stores. While C23 will mandate a two’s complement representation for integers, because we are using the <code class="highlight"><c- n>uint_leastN_t</c-></code> functions (which may be larger than the intended <code class="highlight"><c- n>N</c-> <c- o>==</c-> <c- mi>24</c-></code> or <code class="highlight"><c- n>N</c-> <c- o>==</c-> <c- mi>32</c-></code> specification), it is important for the sign bit to be properly serialized an transported. Therefore, during <code class="highlight"><c- n>stdc_load8_</c-><c- p>(</c-><c- n>le</c-><c- o>/</c-><c- n>be</c-><c- p>)</c-><c- n>sN</c-></code>/<code class="highlight"><c- n>stdc_load8_</c-><c- p>(</c-><c- n>le</c-><c- o>/</c-><c- n>be</c-><c- p>)</c-><c- n>uN</c-></code> operations, the sign bit will be directly serialized into resulting signed value or byte array where necessary.</p>
   <p>This specification is marginally more complicated than the <code class="highlight"><c- n>stdc_memreverseuN</c-></code> functions because they operate on <code class="highlight"><c- n>uint_leastN_t</c-></code>, where <code class="highlight"><c- n>N</c-></code> is the minimum-width bit value. These functions, on most normal implementations, will just fill in the exact number of 8, 16, 32, 64, etc. bits.</p>
   <p>We are fine with not making these precisely <code class="highlight"><c- n>uintN_t</c-></code>/<code class="highlight"><c- n>intN_t</c-></code> because the upcoming C23 Standard includes a specific requirement that if <code class="highlight"><c- n>uintN_t</c-></code>/<code class="highlight"><c- n>intN_t</c-></code> exist, then <code class="highlight"><c- n>uint_leastN_t</c-></code>/<code class="highlight"><c- n>int_leastN_t</c-></code> must match their exact-width counterparts exactly, which has been existing practice on almost all implementations for quite some time now.</p>
   <h4 class="heading settled" data-level="4.5.1" id="design-endianness-implementation"><span class="secno">4.5.1. </span><span class="content">Vetting the Implementation / Algorithm for 8-bit loads and stores</span><a class="self-link" href="#design-endianness-implementation"></a></h4>
   <p>In previous iterations of the paper, getting the algorithm written down properly in a way that does not rely on any kind of implementation-defined behavior for signed and unsigned endian-aware loads and stores was tough and resulted in many errors in the wording. Still, we know that the implementation is solid because we have tested it (both theoretically and factually) by writing implementations which base "unit" for writing into has a width greater than <code class="highlight"><c- n>CHAR_BIT</c-></code>. It is similar to the design</p>
   <ul>
    <li data-md>
     <p>Implemented the core bodies of the functions as macros whose base unit is not necessarily <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-></code> (as <a href="https://github.com/soasis/idk/blob/main/include/ztd/idk/detail/bit.load_store.impl.h#L54-L122">shown here</a>).</p>
    <li data-md>
     <p>Use that macro implementation in the normal <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-></code>-based <a href="https://github.com/soasis/idk/blob/main/source/ztd/idk/bit.load_store.c">implementation</a>;</p>
    <li data-md>
     <p>Use that macro implementation all unsigned integer types that are larger than <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-></code> to <a href="https://github.com/soasis/idk/blob/main/tests/idk/basic_run_time_c%2B%2B/source/bit.load_store.8.no-alias.cpp#L126-L445">test if it deals with sub-8-bit-groups correctly</a>;</p>
    <li data-md>
     <p>Apply <code class="highlight"><c- o>-</c-><c- n>fno</c-><c- o>-</c-><c- n>strict</c-><c- o>-</c-><c- n>alias</c-></code> or <a href="https://github.com/soasis/idk/blob/main/tests/idk/basic_run_time_c%2B%2B/CMakeLists.txt#L62">equivalent flag to the compiler</a> and test across platforms.</p>
   </ul>
   <p>All of the tests pass across the three major compilers (MSVC, GCC, and Clang) and across platforms (Windows, Linux, Mac OS). We find this to be compelling enough to ensure that the implementation is suitably correct, even if the wording may not be proper or ideal. Therefore, we hope this can serve as a good basis in establishing that, at the very least, this is both implementable and usable. This also corroborates additional materials outside of compilers who always target <code class="highlight"><c- n>CHAR_BIT</c-> <c- o>==</c-> <c- mi>8</c-></code>, such as the F2838x/F28069 series, and C28x series, of chips from Texas Instruments. For example, <a href="https://www.ti.com/lit/ug/spru430f/spru430f.pdf">the TMS320C28x reference guide</a> gives a listing for how to properly and effectively swap 8-bit bytes of a 32-bit integer, despite being a 16-bit architecture (Page 292). It is, at least in some cases, important enough to include in reference material and programming guides for these chips, even if the authors could not personally find implementations of publicly-discussable compilers which provided a C-style intrinsic for a <code class="highlight"><c- n>CHAR_BIT</c-> <c- o>==</c-> <c- mi>16</c-><c- o>/</c-><c- mi>32</c-><c- o>/</c-><c- mi>64</c-></code> platform.</p>
   <p>Regardless of how well its tested and checked, the paper still restricts the content to <code class="highlight"><c- n>CHAR_BIT</c-> <c- o>==</c-> <c- mi>8</c-></code> bits, and we know that this has both wide implementation experience and is implementable.</p>
   <h3 class="heading settled" data-level="4.6" id="design-bit"><span class="secno">4.6. </span><span class="content">Additional Modern Bit Utilities</span><a class="self-link" href="#design-bit"></a></h3>
   <p>Additionally to this, upon first pre_review of the paper there was a strong supporting groundswell for bit operations that have long been present in both hardware and as compiler intrinsics. This idea progressed naturally from the <code class="highlight"><c- n>bswap</c-></code> and <code class="highlight"><c- n>__builtin_bswap</c-></code> discussion. As indicated in <a data-link-type="biblio" href="#biblio-p0553" title="Bit operations">[p0553]</a> (merged into C++20 already), here’s a basic rundown of some common architectures and their support for various bit functionality:</p>
   <table>
    <tbody>
     <tr>
      <th>operation
      <th>Intel/AMD
      <th>ARM
      <th>PowerPC
     <tr>
      <td><code class="highlight"><c- n>rotl</c-></code>
      <td>ROL 
      <td>-
      <td>rldicl
     <tr>
      <td><code class="highlight"><c- n>rotr</c-></code>
      <td>ROR 
      <td>ROR, EXTR
      <td>-
   </table>
   <p>Many of the below bit functions are defined below to ease portability to these architectures. For places where specific compiler idioms and automatic detection are not possible, similar assembly tricks or optimized implementations can be provided by C. Further bit functions were also merged into C++, resulting in the current state of the <a href="https://en.cppreference.com/w/cpp/header/bit">C++ bit header</a>.</p>
   <p>There is further a bit of an "infamous" page amongst computer scientists <a data-link-type="biblio" href="#biblio-anderson-bit-hacks" title="Bit Twiddling Hacks">for Bit Twiddling Hacks</a>. These may not all map directly to instructions but they provide a broad set of useful functionality commonly found in not only CPU-based programming libraries, but GPU-based programming libraries and other high performance computing resources as well.</p>
   <p>We try to take the most useful subset of these functions that most closely represent functionality on both old and new CPU architectures as well as common, necessary operations that have been around in the last 25 years for various industries. We have left out operations such as sign extension, parity computation, bit merging, clear/setting bits, fast negation, bit swaps, lexicographic next bit permutation, and bit interleaving. The rest are more common and appear across a wide range of industries from cryptography to graphics to simulation to efficient property lookup and kernel scheduling.</p>
   <h4 class="heading settled" data-level="4.6.1" id="design-bit-generic"><span class="secno">4.6.1. </span><span class="content">Type-Generic Macros and Counts for Types</span><a class="self-link" href="#design-bit-generic"></a></h4>
   <p>All of the functions below have type generic macros associated with them. This can bring up an interesting question: if the return value depends on the type of the argument going into the function (i.e. for <code class="highlight"><c- n>rotate_left</c-></code>, and <code class="highlight"><c- n>rotate_right</c-></code>), is it bad for literal arguments? The answer to this question, however, is the same as its always been when dealing with literal values in C: use the suffix for the appropriate type, or cast, or put it in a <code class="highlight"><c- k>const</c-></code> variable so that it can be used with the expected semantics. We cannot sink macro-based generic code use cases in the off-chance that someone calls <code class="highlight"><c- n>stdc_rotate_left</c-><c- p>(</c-><c- mb>0b01100</c-><c- p>,</c-> <c- mi>2</c-><c- p>)</c-></code> and thinks it returns a dependable answers. Integers (and their literals) are the least portable part of Standard C code: use the exact-width types if you are expecting exact-width semantics. Or, call the fundamental-type suffixed versions to get answers dependable for that given fundamental type (e.g., <code class="highlight"><c- n>stdc_rotate_left_ui</c-><c- p>(</c-><c- mb>0b01100</c-><c- p>,</c-> <c- mi>2</c-><c- p>)</c-></code>), even if it means the size of that fundamental type might change.</p>
   <h4 class="heading settled" data-level="4.6.2" id="design-bit-arguments"><span class="secno">4.6.2. </span><span class="content">Argument Types</span><a class="self-link" href="#design-bit-arguments"></a></h4>
   <p>Many of the functions below are defined over the fundamental unsigned integer types, rather than their minimum width or exact width counterparts. This is done to provide maximum portability: users can combine information from the recently-introduced <code class="highlight"><c- p>(</c-><c- n>S</c-><c- o>/</c-><c- n>U</c-><c- p>)</c-><c- n>CHAR</c-><c- o>/</c-><c- p>(</c-><c- n>U</c-><c- p>)</c-><c- n>SHRT</c-><c- o>/</c-><c- p>(</c-><c- n>U</c-><c- p>)</c-><c- n>INT</c-><c- o>/</c-><c- p>(</c-><c- n>U</c-><c- p>)</c-><c- n>LONG</c-><c- o>/</c-><c- p>(</c-><c- n>U</c-><c- p>)</c-><c- n>LLONG_WIDTH</c-></code> macros to determine the width of the sizes at translation time as well as enjoy a disjoint and distinct set of fundamental types over which generic selection will <strong>always</strong> work.</p>
   <p>The <code class="highlight"><c- p>(</c-><c- n>u</c-><c- p>)</c-><c- n>int_leastN_t</c-></code> types also have <code class="highlight"><c- n>WIDTH</c-></code> macros, but those macros are not exactly guaranteed to cover a wide range of actual bit sizes either (if the <code class="highlight"><c- n>uintN_t</c-></code> types do not exist, then a conforming implementation can simply just name all of the types as typedefs for <code class="highlight"><c- p>(</c-><c- b>unsigned</c-><c- p>)</c-> <c- b>long</c-> <c- b>long</c-></code> and call it a day). While an implementation could also define each of the distinct fundamental types from <code class="highlight"><c- p>(</c-><c- b>unsigned</c-><c- p>)</c-> <c- b>char</c-></code> to <code class="highlight"><c- p>(</c-><c- b>unsigned</c-><c- p>)</c-> <c- b>long</c-> <c- b>long</c-></code> to all be the same width as well, we are at the very least guaranteed that they are, in fact, distinct types. This makes selection over types in <code class="highlight"><c- k>_Generic</c-></code> predictable and usable (i.e. <code class="highlight"><c- k>_Generic</c-><c- p>(</c-><c- n>x</c-><c- p>,</c-> <c- b>uint_least32_t</c-><c- o>:</c-> <c- mi>0</c-><c- p>,</c-> <c- b>uint_least64_t</c-><c- o>:</c-> <c- mi>1</c-><c- p>)</c-></code> is not guaranteed to compile since those types are not required to form a mutually exclusive or disjoint set).</p>
   <p>The exact-width types suffer from non-availability on specific platforms, which makes little sense for functions which do not depend on a no-padding bits requirement. As long as the values read from the array only involve <code class="highlight"><c- n>N</c-></code> bits (including the sign bit), and the rest are zero-initialized, we can have predictable semantics.</p>
   <p>Extended integer types, least-width integer types, and exact-width integer types, can all be used with the type-generic macros since the type-generic macros are required to work over all standard (unsigned) integer types and extended (unsigned) integer types, while excluding <code class="highlight"><c- b>bool</c-></code> and bit-precise (<code class="highlight"><c- n>_BitInt</c-><c- p>(</c-><c- n>N</c-><c- p>)</c-></code>) integer types that do not match pre-existing type widths. This provides a complete set of functionality that is maximally portable while also allowing for precise semantic control with exact or least-width types.</p>
   <p>Finally, in general <code class="highlight"><c- b>bool</c-></code> objects are disallowed from the above functions. There is just not a meaningful body of functionality that can be provided, and there is a fundamental difference between something that is expected to be a boolean value and something that is expected to be a 1-bit number (even if they can both serve similar purposes). It is also questionable to compute things such as rotation for <code class="highlight"><c- b>bool</c-></code> objects. If we can grow a consistent set of answers for these operations across the industry, than we can weaken the requirements and add the behavior in. (Note that if we put it in now and choose a behavior, we cut off any improvements made in the future, so it is best to be conservative here.)</p>
   <h4 class="heading settled" data-level="4.6.3" id="design-bit-returns"><span class="secno">4.6.3. </span><span class="content">Return Types</span><a class="self-link" href="#design-bit-returns"></a></h4>
   <p>Ostensibly, part of the motivation to capture here should be that the types used to do things such as rotations should be identical to the return type used to do things like count zeros, e.g. <code class="highlight"><c- n>stdc_rotate_left</c-><c- p>(</c-><c- n>value</c-><c- p>,</c-> <c- n>stdc_count_zeros</c-><c- p>(</c-><c- n>value</c-><c- p>));</c-></code>. This is mostly non-problematic until someone uses <code class="highlight"><c- n>_BitInt</c-></code>: Clang already supports several megabyte-large <code class="highlight"><c- n>_BitInt</c-></code>. On platforms where <code class="highlight"><c- b>unsigned</c-> <c- b>int</c-></code> is actually 16 bits, this is far too small to accommodate even a 1 MB <code class="highlight"><c- n>_BitInt</c-></code>.</p>
   <p>At the moment, the functions do not accept <strong>all</strong> bit-precise integer types (just ones that are bit-width equivalent to the existing standard and extended integer types), so this is <strong>technically</strong> a non-issue. But, if and when bit-precise integer types are given better handling in <code class="highlight"><c- k>_Generic</c-></code> macros or similar features that make them more suitable for type-generic macro implementations, this could become a problem. At the moment, we use wording to defer the issue by saying that type generic macros return a type suitably large for the range of the computed value. This allows us forward compatibility while fixing non-type-generic macro return types to <code class="highlight"><c- b>unsigned</c-> <c- b>int</c-></code>. The type-generic macros will have the flexibility from the specification to return larger signed integer types to aid in a smooth transition once bit-precise integer types sees more standard support.</p>
   <h4 class="heading settled" data-level="4.6.4" id="design-bit-stdc_rotate_left.stdc_rotate_right"><span class="secno">4.6.4. </span><span class="content"><code class="highlight"><c- n>stdc_rotate_left</c-></code>/<code class="highlight"><c- n>stdc_rotate_right</c-></code></span><a class="self-link" href="#design-bit-stdc_rotate_left.stdc_rotate_right"></a></h4>
   <p><code class="highlight"><c- n>stdc_rotate_left</c-></code>/<code class="highlight"><c- n>stdc_rotate_right</c-></code> are common CPU instructions and the forms of the commonly-used circular shifts. They are common operations with applications in cyclic codes. They are commonly expressed (for 32-bit numbers) as <code class="highlight"><c- n>value</c-> <c- o>&lt;</c->​<c- o>&lt;</c-> <c- n>count</c-> <c- o>|</c-> <c- n>value</c-> <c- o>></c->​<c- o>></c-> <c- p>(</c-><c- mi>32</c-> <c- o>-</c-> <c- n>count</c-><c- p>)</c-></code> (rotate left) or <code class="highlight"><c- n>value</c-> <c- o>>></c-> <c- n>count</c-> <c- o>|</c-> <c- n>value</c-> <c- o>&lt;&lt;</c-> <c- p>(</c-><c- mi>32</c-> <c- o>-</c-> <c- n>count</c-><c- p>)</c-></code> (rotate right).</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- b>unsigned</c-> <c- b>char</c-> <c- nf>stdc_rotate_left_uc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- nf>stdc_rotate_left_us</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- nf>stdc_rotate_left_ui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- nf>stdc_rotate_left_ul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- nf>stdc_rotate_left_ull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->

<c- b>unsigned</c-> <c- b>char</c-> <c- nf>stdc_rotate_right_uc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- nf>stdc_rotate_right_us</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- nf>stdc_rotate_right_ui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- nf>stdc_rotate_right_ul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- nf>stdc_rotate_right_ull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->

<c- c1>// type-generic macro</c->
<c- n>generic_value_type</c-> <c- nf>stdc_rotate_left</c-><c- p>(</c->
	<c- n>generic_value_type</c-> <c- n>value</c-><c- p>,</c-> <c- n>generic_count_type</c-> <c- n>count</c-><c- p>);</c->
<c- n>generic_value_type</c-> <c- nf>stdc_rotate_right</c-><c- p>(</c->
	<c- n>generic_value_type</c-> <c- n>value</c-><c- p>,</c-> <c- n>generic_count_type</c-> <c- n>count</c-><c- p>);</c->
</pre>
   <p>They cover all of the built-in unsigned integer types. A discussion of signed vs. unsigned integer types for the count type and the return type can be found in a previous section, here <a href="#design-signed.vs.unsigned">§ 4.3 Signed vs. Unsigned</a>.</p>
   <p>As for choosing a single function like <code class="highlight"><c- n>stdc_rotate</c-><c- p>(</c-><c- b>unsigned</c-><c- o>-</c-><c- n>integer</c-><c- o>-</c-><c- n>type</c-> <c- n>value</c-><c- p>,</c-> <c- n>some</c-><c- o>-</c-><c- n>integer</c-><c- o>-</c-><c- n>type</c-> <c- n>count</c-><c- p>);</c-></code> that chooses left / right based on the value, it unfortunately imposes the worst code generation properties of all the options. When using entirely runtime values, unless you have a deliberately have a variable-rotate/shift instruction, you are <strong>required</strong> to emit a branch in order to handle the two cases, as rotate left / right - despite being symmetric - need some help. Here is the <a href="https://godbolt.org/z/4TbPfhj1o">assembly for a technically optimal left/right rotate</a>:</p>
<pre class="language-s highlight"><c- n>f</c-><c- o>:</c->	<c- c1># @f</c->
	<c- n>mov</c->     <c- n>r8d</c-><c- p>,</c-> <c- n>edi</c->
	<c- n>mov</c->     <c- n>ecx</c-><c- p>,</c-> <c- n>esi</c->
	<c- n>rol</c->     <c- n>r8d</c-><c- p>,</c-> <c- n>cl</c->
	<c- n>mov</c->     <c- n>edx</c-><c- p>,</c-> <c- n>edi</c->
	<c- n>ror</c->     <c- n>edx</c-><c- p>,</c-> <c- n>cl</c->
	<c- n>mov</c->     <c- n>ecx</c-><c- p>,</c-> <c- n>esi</c->
	<c- n>neg</c->     <c- n>ecx</c->
	<c- n>mov</c->     <c- n>eax</c-><c- p>,</c-> <c- n>edi</c->
	<c- n>rol</c->     <c- n>eax</c-><c- p>,</c-> <c- n>cl</c->
	<c- n>ror</c->     <c- n>edi</c-><c- p>,</c-> <c- n>cl</c->
	<c- n>test</c->    <c- n>esi</c-><c- p>,</c-> <c- n>esi</c->
	<c- n>cmovs</c->   <c- n>edx</c-><c- p>,</c-> <c- n>r8d</c->
	<c- n>cmovle</c->  <c- n>eax</c-><c- p>,</c-> <c- n>edi</c->
	<c- n>add</c->     <c- n>eax</c-><c- p>,</c-> <c- n>edx</c->
	<c- n>ret</c->
</pre>
   <p>This is more than double the size of the rotates found using left/right directly in <a href="#design-signed.vs.unsigned">§ 4.3 Signed vs. Unsigned</a>. Due to this, we decided that it was not advantageous to have a signed count with an unknown left/right: it is important to be capable of biasing the optimizer to whether a given rotate is left/right oriented.</p>
   <h2 class="heading settled" data-level="5" id="wording"><span class="secno">5. </span><span class="content">Wording</span><a class="self-link" href="#wording"></a></h2>
   <p>The following wording is <a data-link-type="biblio" href="#biblio-n3054" title="N3054: ISO/IEC 9899:202x - Programming Languages, C">relative to N3054</a>.</p>
   <h3 class="heading settled" data-level="5.1" id="wording-7.18.✨17.18.memory-reversal"><span class="secno">5.1. </span><span class="content">Add a new §7.18.✨17 and §7.18.✨18 sub-sub-clauses for "8-bit Memory Reversal" in §7.18</span><a class="self-link" href="#wording-7.18.✨17.18.memory-reversal"></a></h3>
   <blockquote>
    <ins>
     <div class="wording-clause-header"> <span class="wording-clause-number">7.18.✨17</span> <span class="wording-clause-title">8-bit Memory Reversal</span> </div>
     <div class="wording-section">
      <div class="wording-clause-section-title"> Synopsis </div>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>
<c- cp>#include</c-> &lt;limit.h>

<c- cp>#if (CHAR_BIT) == 8</c->
<c- b>void</c-> <c- nf>stdc_memreverse8</c-><c- p>(</c-><c- b>size_t</c-> <c- n>n</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]);</c->
<c- cp>#endif</c->
</pre>
       </blockquote>
      </div>
      <div class="wording-clause-section-title"> Description </div>
      <div class="wording-numbered">
       <p>The <code class="highlight"><c- n>stdc_memreverse8</c-></code> function reverses the order of the bytes pointed to by <code class="highlight"><c- n>ptr</c-></code>. For every <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-></code> at offset <code class="highlight"><c- n>index</c-></code> in the range <code class="highlight"><c- p>[</c-><c- mi>0</c-><c- p>,</c-> <c- n>n</c-><c- o>/</c-><c- mi>2</c-><c- p>]</c-></code>, inclusive, swap the values at <code class="highlight"><c- n>ptr</c-><c- p>[</c-><c- n>index</c-><c- p>]</c-></code> and <code class="highlight"><c- n>ptr</c-><c- p>[</c-><c- n>n</c-> <c- o>-</c-> <c- n>index</c-> <c- o>-</c-> <c- mi>1</c-><c- p>]</c-></code>, except when <code class="highlight"><c- n>index</c-></code> == <code class="highlight"><c- n>n</c-> <c- o>-</c-> <c- n>index</c-> <c- o>-</c-> <c- mi>1</c-></code> in which case nothing is done.</p>
      </div>
      <div class="wording-clause-header"> <span class="wording-clause-number">§7.18.✨18</span> <span class="wording-clause-title">Exact-width 8-bit Memory Reversal</span> </div>
      <div class="wording-section">
       <div class="wording-clause-section-title"> Synopsis </div>
       <div class="wording-numbered">
        <blockquote>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>
<c- cp>#include</c-> &lt;limits.h>
<c- cp>#include</c-> &lt;stdint.h>

<c- cp>#if (CHAR_BIT == 8)</c->
<c- n>uintN_t</c-> <c- nf>stdc_memreverse8uN</c-><c- p>(</c-><c- n>uintN_t</c-> <c- n>value</c-><c- p>);</c->
<c- cp>#endif</c->
</pre>
        </blockquote>
       </div>
       <div class="wording-clause-section-title"> Description </div>
       <div class="wording-numbered">
        <p>The <code class="highlight"><c- n>stdc_memreverse8u</c-><i><c- n>N</c-></i></code> functions provide an interface to swap the bytes of a corresponding <code class="highlight"><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-></code> object, where <i>N</i> matches one of the exact-width integer types (7.20.1.1). If an implementation provides the corresponding <code class="highlight"><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-></code> typedef, it shall define the corresponding exact-width memory reversal function for that value of <code class="highlight"><i><c- n>N</c-></i></code>.</p>
       </div>
       <div class="wording-clause-section-title"> Returns </div>
       <div class="wording-numbered">
        <p>The <code class="highlight"><c- n>stdc_memreverse8u</c-><i><c- n>N</c-></i></code> functions returns the 8-bit memory reversed <code class="highlight"><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-></code> value, as if by invoking <code class="highlight"><c- n>stdc_memreverse8</c-><c- p>(</c-><c- k>sizeof</c-><c- p>(</c-><c- n>value</c-><c- p>),</c-> <c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-><c- o>*</c-><c- p>)</c-><c- o>&amp;</c-><c- n>value</c-><c- p>)</c-></code>.</p>
       </div>
      </div>
     </div>
    </ins>
   </blockquote>
   <h3 class="heading settled" data-level="5.2" id="wording-§7.18.✨19.endian.aware.load.store"><span class="secno">5.2. </span><span class="content">Add a new §7.18.✨19 sub-sub-clause for "Endian-Aware" functions in §7.18</span><a class="self-link" href="#wording-§7.18.✨19.endian.aware.load.store"></a></h3>
   <blockquote>
    <ins>
     <div class="wording-clause-header"> <span class="wording-clause-number">7.18.✨19</span> <span class="wording-clause-title">Endian-Aware 8-bit Load</span> </div>
     <div class="wording-section">
      <div class="wording-clause-section-title"> Synopsis </div>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- cp>#if (CHAR_BIT) == 8</c->
<c- n>uint_leastN_t</c-> <c- nf>stdc_load8_leuN</c-><c- p>(</c-><c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>uint_leastN_t</c-> <c- nf>stdc_load8_beuN</c-><c- p>(</c-><c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>uint_leastN_t</c-> <c- nf>stdc_load8_aligned_leuN</c-><c- p>(</c-><c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>uint_leastN_t</c-> <c- nf>stdc_load8_aligned_beuN</c-><c- p>(</c-><c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->

<c- n>int_leastN_t</c-> <c- nf>stdc_load8_lesN</c-><c- p>(</c-><c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>int_leastN_t</c-> <c- nf>stdc_load8_besN</c-><c- p>(</c-><c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>int_leastN_t</c-> <c- nf>stdc_load8_aligned_lesN</c-><c- p>(</c-><c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- n>int_leastN_t</c-> <c- nf>stdc_load8_aligned_besN</c-><c- p>(</c-><c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- cp>#endif</c->
</pre>
       </blockquote>
      </div>
      <div class="wording-clause-section-title"> Description </div>
      <div class="wording-numbered">
       <p>The 8-bit load family of functions functions read an <code class="highlight"><c- n>int_least</c-><i><c- n>N</c-></i><c- n>_t</c-></code> or <code class="highlight"><c- n>uint_least</c-><i><c- n>N</c-></i><c- n>_t</c-></code> object from the provided <code class="highlight"><c- n>ptr</c-></code> in an endian-aware (7.18.2) manner, where <i>N</i> matches an existing minimum-width integer type (7.20.1.2). If an implementation provides the corresponding <code class="highlight"><c- n>uint_least</c-><i><c- n>N</c-></i><c- n>_t</c-></code> typedef, it shall define the corresponding endian-aware load function function for that value of <code class="highlight"><i><c- n>N</c-></i></code>. If this function is present, <i>N</i> shall be a multiple of 8 and <code class="highlight"><c- n>CHAR_BIT</c-></code> shall be 8. The functions containing <code class="highlight"><c- n>_aligned</c-></code> in the name shall assume that <code class="highlight"><c- n>ptr</c-></code> is suitably aligned to access a signed or unsigned integer of width <i>N</i> for a signed or unsigned variant of the function, respectively. If the function name contains the <code class="highlight"><c- n>s</c-><i><c- n>N</c-></i></code> suffix in the name, it is a <i>signed variant</i>. Otherwise, the function is an <i>unsigned variant</i>. If the function name contains the <code class="highlight"><c- n>les</c-><i><c- n>N</c-></i></code> or <code class="highlight"><c- n>leu</c-><i><c- n>N</c-></i></code> suffix, it is a <i>little-endian variant</i>. Otherwise, if the function name contains the <code class="highlight"><c- n>bes</c-><i><c- n>N</c-></i></code> or <code class="highlight"><c- n>beu</c-><i><c- n>N</c-></i></code> suffix, it is a <i>big-endian variant</i>.</p>
      </div>
      <div class="wording-clause-section-title"> Returns </div>
      <div class="wording-numbered">
       <p>Let the computed value $result$ be:</p>
       <p>$$\sum_{index = 0}^{(N \div{} 8) - 1} b_{index} \times{} 2^{8 \times{} index}$$</p>
       <p>where $b_{index}$ is:</p>
       <dl>
        <dd data-md>
         <p>— <code class="highlight"><c- n>ptr</c-><c- p>[</c-><c- n>index</c-><c- p>]</c-></code>, if the function is the little-endian variant;</p>
        <dd data-md>
         <p>— otherwise, <code class="highlight"><c- n>ptr</c-><c- p>[</c-><c- n>N</c-> <c- o>-</c-> <c- n>index</c-> <c- o>-</c-> <c- mi>1</c-><c- p>]</c-></code>, if the function is the the big-endian variant.</p>
       </dl>
       <p>If the function is an unsigned variant, return $result$. Otherwise, if the function is a signed variant, return:</p>
       <dl>
        <dd data-md>
         <ul>
          <li data-md>
           <p>$result$, if $result$ is less than $2^{N-1}$;</p>
         </ul>
        <dd data-md>
         <ul>
          <li data-md>
           <p>otherwise, $result - 2^{N}$.</p>
         </ul>
       </dl>
      </div>
      <div class="wording-clause-header"> <span class="wording-clause-number">7.18.✨20</span> <span class="wording-clause-title">Endian-Aware 8-bit Store</span> </div>
      <div class="wording-section">
       <div class="wording-clause-section-title"> Synopsis </div>
       <div class="wording-numbered">
        <blockquote>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- cp>#if (CHAR_BIT) == 8</c->
<c- b>void</c-> <c- nf>stdc_store8_leuN</c-><c- p>(</c-><c- n>uint_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_beuN</c-><c- p>(</c-><c- n>uint_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_aligned_leuN</c-><c- p>(</c-><c- n>uint_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_aligned_beuN</c-><c- p>(</c-><c- n>uint_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->

<c- b>void</c-> <c- nf>stdc_store8_lesN</c-><c- p>(</c-><c- n>int_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_besN</c-><c- p>(</c-><c- n>int_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_aligned_lesN</c-><c- p>(</c-><c- n>int_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store8_aligned_besN</c-><c- p>(</c-><c- n>int_leastN_t</c-> <c- n>value</c-><c- p>,</c->
	<c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- p>(</c-><c- n>N</c-> <c- o>/</c-> <c- mi>8</c-><c- p>)]);</c->
<c- cp>#endif</c->
</pre>
        </blockquote>
       </div>
       <div class="wording-clause-section-title"> Description </div>
       <div class="wording-numbered">
        <p>The 8-bit store family of functions functions write a <code class="highlight"><c- n>int_least</c-><i><c- n>N</c-></i><c- n>_t</c-></code> or <code class="highlight"><c- n>uint_least</c-><i><c- n>N</c-></i><c- n>_t</c-></code> object into the provided <code class="highlight"><c- n>ptr</c-></code> in an endian-aware (7.18.2) manner, where <i>N</i> matches an existing minimum-width integer type (7.20.1.2). If an implementation provides the corresponding <code class="highlight"><c- n>uint_least</c-><i><c- n>N</c-></i><c- n>_t</c-></code> typedef, it shall define the corresponding endian-aware store function function for that value of <code class="highlight"><i><c- n>N</c-></i></code>. If this function is present, <i>N</i> shall be a multiple of 8 and <code class="highlight"><c- n>CHAR_BIT</c-></code> shall be 8. The functions containing <code class="highlight"><c- n>_aligned</c-></code> in the name shall assume that <code class="highlight"><c- n>ptr</c-></code> is suitably aligned to access a signed or unsigned integer of width <i>N</i>. If the function name contains the <code class="highlight"><c- n>s</c-><i><c- n>N</c-></i></code> suffix in the name, it is a <i>signed variant</i>. Otherwise, the function is an <i>unsigned variant</i>. If the function name contains the <code class="highlight"><c- n>les</c-><i><c- n>N</c-></i></code> or <code class="highlight"><c- n>leu</c-><i><c- n>N</c-></i></code> suffix, it is a <i>little-endian variant</i>. Otherwise, if the function name contains the <code class="highlight"><c- n>bes</c-><i><c- n>N</c-></i></code> or <code class="highlight"><c- n>beu</c-><i><c- n>N</c-></i></code> suffix, it is a <i>big-endian variant</i>.</p>
       </div>
       <div class="wording-numbered">
        <p>Let <code class="highlight"><c- n>value_unsigned</c-></code> be <code class="highlight"><c- n>value</c-></code> if the function is a unsigned variant. Otherwise, let <code class="highlight"><c- n>value_unsigned</c-></code> be the conversion of <code class="highlight"><c- n>value</c-></code> to its corresponding unsigned type, if the function is a signed variant.</p>
        <p>Let <code class="highlight"><c- n>index</c-></code> be an integer in a sequence that</p>
        <dl>
         <dd data-md>
          <p>— starts from 0 and increments by 8 in the range of [0, N), if the function is a little-endian variant;</p>
         <dd data-md>
          <p>— starts from <code class="highlight"><c- n>N</c-> <c- o>-</c-> <c- mi>8</c-></code> and decrements by 8 in the range of [0, N), if the function is a big-endian variant.</p>
        </dl>
        <p>Let <code class="highlight"><c- n>ptr_index</c-></code> be an integer that starts from 0. For each <code class="highlight"><c- n>index</c-></code> in the order of the above-specified sequence:</p>
        <dl>
         <dd data-md>
          <ol>
           <li data-md>
            <p>Sets the 8 bits in <code class="highlight"><c- n>ptr</c-><c- p>[</c-><c- n>ptr_index</c-><c- p>]</c-></code> to <code class="highlight"><c- p>(</c-><c- n>value_unsigned</c-> <c- o>>></c-> <c- n>index</c-><c- p>)</c-> <c- o>&amp;</c-> <c- mh>0xFF</c-></code>.</p>
          </ol>
         <dd data-md>
          <ol start="2">
           <li data-md>
            <p>Increments <code class="highlight"><c- n>ptr_index</c-></code> by 1.</p>
          </ol>
        </dl>
       </div>
      </div>
     </div>
    </ins>
   </blockquote>
   <h3 class="heading settled" data-level="5.3" id="wording-7.18.✨21.22.rotate_left.rotate_right"><span class="secno">5.3. </span><span class="content">Add a new §7.18.✨21 sub-sub-clause for Rotate Left and Rotate Right Bit Utilities in §7.18</span><a class="self-link" href="#wording-7.18.✨21.22.rotate_left.rotate_right"></a></h3>
   <blockquote>
    <ins>
     <div class="wording-clause-header"> <span class="wording-clause-number">7.18.✨21</span> <span class="wording-clause-title">Rotate Left</span> </div>
     <div class="wording-section">
      <div class="wording-clause-section-title"> Synopsis </div>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- nf>stdc_rotate_left_uc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- nf>stdc_rotate_left_us</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- nf>stdc_rotate_left_ui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- nf>stdc_rotate_left_ul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- nf>stdc_rotate_left_ull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->

<c- n>generic_value_type</c-> <c- nf>stdc_rotate_left</c-><c- p>(</c->
	<c- n>generic_value_type</c-> <c- n>value</c-><c- p>,</c-> <c- n>generic_count_type</c-> <c- n>count</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <div class="wording-clause-section-title"> Description </div>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_rotate_left</c-></code> functions perform a bitwise rotate left. This operation is typically known as a left circular shift. </div>
      <div class="wording-clause-section-title"> Returns </div>
      <div class="wording-numbered">
       <p>Let <em>N</em> be the width corresponding to the type of the input <code class="highlight"><c- n>value</c-></code>. Let <code class="highlight"><c- n>r</c-></code> be <code class="highlight"><c- n>count</c-> <c- o>%</c-> <c- n>N</c-></code>.</p>
       <dl>
        <dd data-md>
         <p>— If r is 0, returns <code class="highlight"><c- n>value</c-></code>;</p>
        <dd data-md>
         <p>— otherwise, returns <code class="highlight"><c- p>(</c-><c- n>value</c-> <c- o>&lt;</c->​<c- o>&lt;</c-> <c- n>r</c-><c- p>)</c-> <c- o>|</c-> <c- p>(</c-><c- n>value</c-> <c- o>>></c-> <c- p>(</c-><c- n>N</c-> <c- o>-</c-> <c- n>r</c-><c- p>))</c-></code>;</p>
       </dl>
      </div>
      <div class="wording-numbered">
       <p>The type-generic function (marked by its <code class="highlight"><c- n>generic_value_type</c-></code> argument) returns the above described result for a given input value so long as the <code class="highlight"><c- n>generic_value_type</c-></code> is an</p>
       <dl>
        <dd data-md>
         <p>— standard unsigned integer type, excluding <code class="highlight"><c- b>bool</c-></code>;</p>
        <dd data-md>
         <p>— extended unsigned integer type;</p>
        <dd data-md>
         <p>— or, bit-precise unsigned integer type whose width matches any standard or extended integer type excluding <code class="highlight"><c- b>bool</c-></code>.</p>
       </dl>
       <p>The <code class="highlight"><c- n>generic_count_type</c-></code> shall be an integer type whose value is non-negative.</p>
      </div>
     </div>
     <div class="wording-clause-header"> <span class="wording-clause-number">7.18.✨22</span> <span class="wording-clause-title">Rotate Right</span> </div>
     <div class="wording-section">
      <div class="wording-clause-section-title"> Synopsis </div>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- nf>stdc_rotate_right_uc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- nf>stdc_rotate_right_us</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- nf>stdc_rotate_right_ui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- nf>stdc_rotate_right_ul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- nf>stdc_rotate_right_ull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->

<c- n>generic_value_type</c-> <c- nf>stdc_rotate_right</c-><c- p>(</c->
	<c- n>generic_value_type</c-> <c- n>value</c-><c- p>,</c-> <c- n>generic_count_type</c-> <c- n>count</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <div class="wording-clause-section-title"> Description </div>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_rotate_right</c-></code> functions perform a bitwise rotate right. This operation is typically known as a right circular shift. </div>
      <div class="wording-clause-section-title"> Returns </div>
      <div class="wording-numbered">
       <p>Let <em>N</em> be the width corresponding to the type of the input <code class="highlight"><c- n>value</c-></code>. Let r be <code class="highlight"><c- n>count</c-> <c- o>%</c-> <c- n>N</c-></code>.</p>
       <dl>
        <dd data-md>
         <p>— If r is 0, returns <code class="highlight"><c- n>value</c-></code>;</p>
        <dd data-md>
         <p>— otherwise, returns <code class="highlight"><c- p>(</c-><c- n>value</c-> <c- o>>></c-> <c- n>r</c-><c- p>)</c-> <c- o>|</c-> <c- p>(</c-><c- n>value</c-> <c- o>&lt;&lt;</c-> <c- p>(</c-><c- n>N</c-> <c- o>-</c-> <c- n>r</c-><c- p>))</c-></code>;</p>
       </dl>
      </div>
      <div class="wording-numbered">
       <p>The type-generic function (marked by its <code class="highlight"><c- n>generic_value_type</c-></code> argument) returns the above described result for a given input value so long as the <code class="highlight"><c- n>generic_value_type</c-></code> is</p>
       <dl>
        <dd data-md>
         <p>— a standard unsigned integer type, excluding <code class="highlight"><c- b>bool</c-></code>;</p>
        <dd data-md>
         <p>— an extended unsigned integer type;</p>
        <dd data-md>
         <p>— or, a bit-precise unsigned integer type whose width matches any standard or extended integer type excluding <code class="highlight"><c- b>bool</c-></code>.</p>
       </dl>
       <p>The <code class="highlight"><c- n>generic_count_type</c-></code> shall be an integer type whose value is non-negative.</p>
      </div>
     </div>
    </ins>
   </blockquote>
   <h2 class="heading settled" data-level="6" id="appendix"><span class="secno">6. </span><span class="content">Appendix</span><a class="self-link" href="#appendix"></a></h2>
   <p>A collection of miscellaneous and helpful bits of information and implementation.</p>
   <h3 class="heading settled" data-level="6.1" id="appendix-implementations"><span class="secno">6.1. </span><span class="content">Example Implementations in Publicly-Available Libraries</span><a class="self-link" href="#appendix-implementations"></a></h3>
   <p>Optimized routines following the naming conventions present in this paper can be found in the <a href="https://github.com/soasis/idk">Shepherd’s Oasis Industrial Development Kit (IDK) library</a>, compilable with a conforming C11 compiler and tested on MSVC, GCC, and Clang on Windows, Mac, and Linux:</p>
   <ul>
    <li data-md>
     <p><a href="https://ztdidk.readthedocs.io/en/latest/c_api/bit.intrinsic.html">Bit Intrinsics</a> (<a href="https://github.com/soasis/idk/blob/main/include/ztd/idk/detail/bit.intrinsic.h#L53">Declarations</a>) (<a href="https://github.com/soasis/idk/blob/main/source/ztd/idk/bit.intrinsic.c#L49">Source</a>)</p>
    <li data-md>
     <p><a href="https://ztdidk.readthedocs.io/en/latest/c_api/bit.memreverse.html">Memory Reverse</a> (<a href="https://github.com/soasis/idk/blob/main/include/ztd/idk/detail/bit.memreverse.h#L52">Declarations</a>) (<a href="https://github.com/soasis/idk/blob/main/source/ztd/idk/bit.memreverse.c#L46">Source</a>)</p>
    <li data-md>
     <p><a href="https://ztdidk.readthedocs.io/en/latest/c_api/bit.store_load.html">Endian Load/Store</a> (<a href="https://github.com/soasis/idk/blob/main/include/ztd/idk/detail/bit.load_store.h#L52">Declarations</a>) (<a href="https://github.com/soasis/idk/blob/main/source/ztd/idk/bit.load_store.c#L45">Sources</a>)</p>
   </ul>
   <p>Optimized routines following the basic principles present in this paper and used as motivation to improve several C++ Standard Libraries can be found in the Itsy Bitsy Bit Libraries, compilable with a conforming C++17 and tested on MSVC, GCC, and Clang on Windows, Mac, and Linux:</p>
   <ul>
    <li data-md>
     <p>Bit Intrinsics (<a href="https://github.com/ThePhD/itsy_bitsy/blob/main/include/itsy/bit_operations.hpp#L63">Declarations</a>) (<a href="https://github.com/ThePhD/itsy_bitsy/blob/main/include/itsy/detail/bit_operations.hpp#L31">Sources</a>)</p>
   </ul>
   <p>Endianness routines and original motivation that spawned this proposal came from <a href="https://github.com/SoapGentoo/portable-endianness">David Seifert’s Portable Endianness library</a> and its deep dive into compiler optimizations and efficient code generation when alignment came into play:</p>
   <ul>
    <li data-md>
     <p>Endian Load/Store (<a href="https://github.com/SoapGentoo/portable-endianness/blob/main/include/portable-endianness.h#L11">Declarations</a>) (<a href="https://github.com/SoapGentoo/portable-endianness/blob/main/src/portable-endianness.c#L5">Sources</a>)</p>
   </ul>
   <h2 class="heading settled" data-level="7" id="acknowledgements"><span class="secno">7. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
   <p>Many thanks to David Seifert, Aaron Bachmann, Jens Gustedt, Tony Finch, Erin AO Shepherd, and many others who helped fight to get the semantics and wording into the right form, providing motivation, giving example code, pointing out existing libraries, and helping to justify this proposal.</p>
  </main>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-anderson-bit-hacks">[ANDERSON-BIT-HACKS]
   <dd>Sean Eron Anderson. <a href="https://graphics.stanford.edu/~seander/bithacks.html"><cite>Bit Twiddling Hacks</cite></a>. May 5th, 2005. URL: <a href="https://graphics.stanford.edu/~seander/bithacks.html">https://graphics.stanford.edu/~seander/bithacks.html</a>
   <dt id="biblio-clang-builtins">[CLANG-BUILTINS]
   <dd>LLVM Foundation; Clang Contributors. <a href="https://clang.llvm.org/docs/LanguageExtensions.html#intrinsics-support-within-constant-expressions"><cite>Clang Language Extensions: Clang Documentation</cite></a>. September 1st, 2021. URL: <a href="https://clang.llvm.org/docs/LanguageExtensions.html#intrinsics-support-within-constant-expressions">https://clang.llvm.org/docs/LanguageExtensions.html#intrinsics-support-within-constant-expressions</a>
   <dt id="biblio-endian-fallacy">[ENDIAN-FALLACY]
   <dd>Rob Pike. <a href="https://commandcenter.blogspot.com/2012/04/byte-order-fallacy.html"><cite>The Byte Order Fallacy</cite></a>. April 3rd, 2012. URL: <a href="https://commandcenter.blogspot.com/2012/04/byte-order-fallacy.html">https://commandcenter.blogspot.com/2012/04/byte-order-fallacy.html</a>
   <dt id="biblio-gcc-builtins">[GCC-BUILTINS]
   <dd>GCC Contributors. <a href="https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html"><cite>Other Built-in Functions Provided by GCC</cite></a>. September 1st, 2021. URL: <a href="https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html">https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html</a>
   <dt id="biblio-linux-endian">[LINUX-ENDIAN]
   <dd>Linux; BSD. <a href="https://linux.die.net/man/3/endian"><cite>endian(3)</cite></a>. September 1st, 2021. URL: <a href="https://linux.die.net/man/3/endian">https://linux.die.net/man/3/endian</a>
   <dt id="biblio-msvc-builtins">[MSVC-BUILTINS]
   <dd>Microsoft. <a href="https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/byteswap-uint64-byteswap-ulong-byteswap-ushort?view=msvc-160"><cite>_byteswap_uint64, _byteswap_ulong, _byteswap_ushort</cite></a>. November 4th, 2016. URL: <a href="https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/byteswap-uint64-byteswap-ulong-byteswap-ushort?view=msvc-160">https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/byteswap-uint64-byteswap-ulong-byteswap-ushort?view=msvc-160</a>
   <dt id="biblio-n3022">[N3022]
   <dd>JeanHeyd Meneide. <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3022.htm"><cite>N3022 - Modern Bit Utilities</cite></a>. July 6th, 2022. URL: <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3022.htm">https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3022.htm</a>
   <dt id="biblio-n3054">[N3054]
   <dd>ISO/IEC JTC1 SC22 WG14 - Programming Languages, C; JeanHeyd Meneide; Freek Wiedijk. <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/N3054.pdf"><cite>N3054: ISO/IEC 9899:202x - Programming Languages, C</cite></a>. June 8th, 2022. URL: <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/N3054.pdf">https://www.open-std.org/jtc1/sc22/wg14/www/docs/N3054.pdf</a>
   <dt id="biblio-ntohl">[NTOHL]
   <dd>Linux. <a href="https://linux.die.net/man/3/ntohl"><cite>ntohl(3)</cite></a>. September 30th, 2021. URL: <a href="https://linux.die.net/man/3/ntohl">https://linux.die.net/man/3/ntohl</a>
   <dt id="biblio-p0463">[P0463]
   <dd>Howard E. Hinnant. <a href="https://wg21.link/p0463"><cite>endian. Just endian.</cite></a>. July 13th, 2017. URL: <a href="https://wg21.link/p0463">https://wg21.link/p0463</a>
   <dt id="biblio-p0553">[P0553]
   <dd>Jens Maurer. <a href="https://wg21.link/p0553"><cite>Bit operations</cite></a>. March 1st, 2019. URL: <a href="https://wg21.link/p0553">https://wg21.link/p0553</a>
   <dt id="biblio-portable-endianness">[PORTABLE-ENDIANNESS]
   <dd>David Seifert. <a href="https://github.com/SoapGentoo/portable-endianness"><cite>portable-endianness</cite></a>. May 16th, 2021. URL: <a href="https://github.com/SoapGentoo/portable-endianness">https://github.com/SoapGentoo/portable-endianness</a>
   <dt id="biblio-rust-rotate_left">[RUST-ROTATE_LEFT]
   <dd>Rust Standard Library Collaborators. <a href="https://doc.rust-lang.org/std/primitive.u32.html#method.rotate_left"><cite>u32 methods: rotate_left</cite></a>. November 10th, 2021. URL: <a href="https://doc.rust-lang.org/std/primitive.u32.html#method.rotate_left">https://doc.rust-lang.org/std/primitive.u32.html#method.rotate_left</a>
   <dt id="biblio-sdcc">[SDCC]
   <dd>Dr. Philipp K. Krause. <a href="http://sdcc.sourceforge.net/doc/sdccman.pdf"><cite>SDCC Manual §8.1.9 - Bit Rotations</cite></a>. September 25th, 2021. URL: <a href="http://sdcc.sourceforge.net/doc/sdccman.pdf">http://sdcc.sourceforge.net/doc/sdccman.pdf</a>
   <dt id="biblio-ti-tms320c64x">[TI-TMS320C64X]
   <dd>Texas Instruments. <a href="https://www.ti.com/lit/ug/spru732j/spru732j.pdf"><cite>TMS320C64x/C64x+ DSP: CPU and Instruction Set</cite></a>. July 31st, 2010. URL: <a href="https://www.ti.com/lit/ug/spru732j/spru732j.pdf">https://www.ti.com/lit/ug/spru732j/spru732j.pdf</a>
  </dl>