<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>N28XX: Modern Bit Utilities</title>
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in § N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *     -> ins/del.c### for candidate and proposed changes (amendments)
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *   - .correction for "candidate corrections"       (div, aside, details, section)
 *   - .addition   for "candidate additions"         (div, aside, details, section)
 *   - .correction.proposed for "proposed corrections" (div, aside, details, section)
 *   - .addition.proposed   for "proposed additions"   (div, aside, details, section)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Outdated warning for old specs
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                    Body                                    */
/******************************************************************************/

	html {
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;			  /* limit line length to 50em for readability   */
		margin: 0 auto;				/* center text within page                    */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag    */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		color: black;
		color: var(--text);
		background: white top left fixed no-repeat;
		background: var(--bg) top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em; }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small; }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 3;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;	/* Inherit the font family. */
		line-height: 1.2;		/* Keep wrapped headings compact */
		hyphens: manual;		/* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#profile-and-date {
		/* #profile-and-date is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	border-left: 0.5em solid #DEF;
	border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	 padding: .5em;
	 border: thin solid #ddd;
	 border: thin solid var(--algo-border);
	 border-radius: .5em;
	 margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	 margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	 margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	margin-left: -2em;
	}
	dl.switch {
	padding-left: 2em;
	}
	dl.switch > dt {
	text-indent: -1.5em;
	margin-top: 1em;
	}
	dl.switch > dt + dt {
	margin-top: 0;
	}
	dl.switch > dt::before {
	content: '\21AA';
	padding: 0 0.5em 0 0;
	display: inline-block;
	width: 1em;
	text-align: right;
	line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: #aa0000;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #006100;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

	/* for amendments (candidate/proposed changes) */

	.amendment ins, .correction ins, .addition ins,
	ins[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment del, .correction del, .addition del,
	del[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment.proposed ins, .correction.proposed ins, .addition.proposed ins,
	ins[class^=c].proposed {
		text-decoration-style: double;
	}
	.amendment.proposed del, .correction.proposed del, .addition.proposed del,
	del[class^=c].proposed {
		text-decoration-style: double;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

	/* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: underline #707070;
		text-decoration: underline var(--a-normal-underline);
		text-decoration-skip-ink: none;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		text-decoration-color: #bbb;
		text-decoration-color: var(--a-visited-underline);
	}

	/* Indicate interaction with the link */
	a[href]:focus,
	a[href]:hover {
		text-decoration-thickness: 2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		text-decoration-color: #c00;
		text-decoration-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	  .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,	.sidefigure img,	figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em;
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em; }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote,
	.amendment, .correction, .addition {
		margin: 1em auto;
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	blockquote > :first-child,
	.note  > p:first-child,
	.issue > p:first-child,
	.amendment > p:first-child,
	.correction > p:first-child,
	.addition > p:first-child {
		margin-top: 0;
	}
	blockquote > :last-child,
	.note  > p:last-child,
	.issue > p:last-child,
	.amendment > p:last-child,
	.correction > p:last-child,
	.addition > p:last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker,
	.amendment::before, .amendment > .marker,
	details.amendment > summary > .marker,
	.addition::before, .addition > .marker,
	addition.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	correction.amendment > summary > .marker
	{
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	  or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	  or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	  or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Amendment Box *************************************************************/

	.amendment, .correction, .addition {
		border-color: #330099;
		border-color: var(--amendment-border);
		background: #F5F0FF;
		background: var(--amendment-bg);
		color: black;
		color: var(--amendment-text);
	}
	.amendment.proposed, .correction.proposed, .addition.proposed {
		border-style: solid;
		border-block-width: 0.25em;
	}
	.amendment::before, .amendment > .marker,
	details.amendment > summary::before, details.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	details.correction > summary::before, details.correction > summary > .marker,
	.addition::before, .addition > .marker,
	details.addition > summary::before, details.addition > summary > .marker {
		color: #220066;
		color: var(--amendmentheading-text);
	}
	.amendment.proposed::before, .amendment.proposed > .marker,
	details.amendment.proposed > summary::before, details.amendment.proposed > summary > .marker,
	.correction.proposed::before, .correction.proposed > .marker,
	details.correction.proposed > summary::before, details.correction.proposed > summary > .marker,
	.addition.proposed::before, .addition.proposed > .marker,
	details.addition.proposed > summary::before, details.addition.proposed > summary > .marker {
		font-weight: bold;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 2em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		<table class="data"> highlights structural relationships in a table
		when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		Use class="complex data" for particularly complicated tables --
		(This will draw more lines: busier, but clearer.)

		Use class="long" on table cells with paragraph-like contents
		(This will adjust text alignment accordingly.)
		Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding: 0.1rem 1px 0;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Switch to using border-bottom for underlines */
		text-decoration: none;
		border-bottom: 1px solid;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:focus,
	.toc a:hover {
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
	}
	.toc {
		line-height: 1.1em;
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li			{ font-weight: bold;   }
	.toc > li li		 { font-weight: normal; }
	.toc > li li li	  { font-size:   95%;	}
	.toc > li li li li	{ font-size:   90%;	}
	.toc > li li li li li { font-size:   85%;	}

	/* @supports not (display:grid) { */
		.toc > li			{ margin: 1.5rem 0;	}
		.toc > li li		 { margin: 0.3rem 0;	}
		.toc > li li li	  { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}
		.toc > li li li li .secno { font-size: 85%; }
		.toc > li li li li li .secno { font-size: 100%; }

		.toc li {
			clear: both;
		}

		:not(li) > .toc			 { margin-left:  5rem; }
		.toc .secno				 { margin-left: -5rem; }
		.toc > li li li .secno	  { margin-left: -7rem; }
		.toc > li li li li .secno	{ margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc			 { margin-left:  4rem; }
			.toc .secno				 { margin-left: -4rem; }
			.toc > li li li			 { margin-left:  1rem; }
			.toc > li li li .secno	  { margin-left: -5rem; }
			.toc > li li li li .secno	{ margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc			 { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno				 { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li			 { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno	  { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno	{ margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			  comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom: 3px solid #054572;
			border-bottom: 3px solid var(--toclink-underline);
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index	  { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li	{ margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em; }
	ul.index dl	{ margin-top: 0; }
	ul.index dt	{ margin: .2em 0 .2em 20px;}
	ul.index dd	{ margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span:not(.dfn-paneled) {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/** Outdated warning **********************************************************/

.outdated-spec {
	color: black;
	color: var(--outdatedspec-text);
	background-color: rgba(0,0,0,0.5);
	background-color: var(--outdatedspec-bg);
}

.outdated-warning {
	position: fixed;
	bottom: 50%;
	left: 0;
	right: 0;
	margin: 0 auto;
	width: 50%;
	background: maroon;
	background: var(--outdated-bg);
	color: white;
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	position: absolute;
	top: 0;
	right:0;
	margin: 0;
	border: 0;
	padding: 0.25em 0.5em;
	background: transparent;
	color: white;
	color: var(--outdated-text);
	font:1em sans-serif;
	text-align:center;
}

.outdated-warning span {
	display: block;
}

.outdated-collapsed {
	bottom: 0;
	border-radius: 0;
	width: 100%;
	padding: 0;
}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}

		.outdated-warning {
			position: absolute;
			border-style: solid;
			border-color: red;
		}

		.outdated-warning input {
			display: none;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good item positioning:
		  "content column" is 50ems wide at max; less on smaller screens.
		  Extra space (after ToC + content) is empty on the right.

		  1. When item < content column, centers item in column.
		  2. When content < item < available, left-aligns.
		  3. When item > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			* http://lea.verou.me/2012/04/background-attachment-local/
			*
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
						top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
						top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
<style type="text/css">
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      vertical-align: top;
    }
    th, td {
      border-left: none;
      border-right: none;
      padding: 0px 10px;
    }
    th {
      text-align: center;
    }
  </style>
  <meta content="Bikeshed version 4f053d00e, updated Tue Aug 10 14:13:32 2021 -0700" name="generator">
  <link href="https://thephd.dev/_vendor/future_cxx/papers/C%20-%20Moder%20Bit%20Utilities.html" rel="canonical">
  <link href="https://isocpp.org/favicon.ico" rel="icon">
  <meta content="501c6a2d504fde389a64454250de8c47ecd42af6" name="document-revision">
<style>

:root {
	/* Default (light) theme */
	--del-text-color: rgb(255, 25, 25);
	--del-text-background-color: rgb(255, 175, 175);
	--ins-text-color: rgb(10, 180, 35);
	--ins-text-background-color: rgb(175, 250, 190);
}

/* dark theme */
@media (prefers-color-scheme: dark) {
	:root {
		--del-text-color: rgb(255, 52, 52);
		--del-text-background-color: rgb(82, 25, 25);
		--ins-text-color: rgb(140, 255, 140);
		--ins-text-background-color: rgb(25, 82, 25);
	}
}

@media print {
	.pagebreak { break-after: always }
}

.tg  {
	border-collapse: collapse;
	border-spacing:0;
}

.tg td{
	padding:10px 10px;
	border-style: solid;
	border-width:1px;
	overflow: hidden;
	word-break: normal;
	border-color: var(--table-border-color, inherit);
}
.tg th{
	font-weight: normal;
	padding: 10px 10px;
	border-style: solid;
	border-width: 1px;
	overflow: hidden;
	word-break: normal;
	border-color: black;
}
.tg .tg-c3ow { 
	border-color: inherit;
	text-align: center;
	vertical-align: top
}

.ins, ins, ins p, ins div, span.ins, span.ins * {
	background-color: var(--ins-text-background-color);
	background: var(--ins-text-background-color);
	color: var(--ins-text-color);
}

ins * {
	text-decoration: underline;
	text-decoration-color: var(--ins-text-color);
}

.del, del, del p, del div, span.del, span.del * {
	background-color: var(--del-text-background-color);
	background: var(--del-text-background-color);
	color: var(--del-text-color);
}

del * {
	text-decoration: line-through;
	text-decoration-color: var(--del-text-color);
}

code.c-kw {
	font-weight: bold;
}

math, span.math {
	font-family: serif;
	font-style: italic;
}

ul {
	list-style-type: "— ";
}

div.wording-section-header {
	display: block;
	padding-bottom: 2em;
	clear: both;
}

.clause-title {
	float: left;
}

.stable-tag {
	float: right;
}

div.wording-section {
	counter-reset: wording-paragraph;
}

div.wording-numbered-0 {
	counter-reset: wording-paragraph -1;
}

div.wording-numbered-1 {
	counter-reset: wording-paragraph 0;
}

div.wording-numbered-2 {
	counter-reset: wording-paragraph 1;
}

div.wording-numbered-3 {
	counter-reset: wording-paragraph 2;
}

div.wording-numbered-4 {
	counter-reset: wording-paragraph 3;
}

div.wording-numbered-5 {
	counter-reset: wording-paragraph 4;
}

div.wording-numbered-6 {
	counter-reset: wording-paragraph 5;
}

div.wording-numbered-7 {
	counter-reset: wording-paragraph 6;
}

div.wording-numbered-8 {
	counter-reset: wording-paragraph 7;
}

div.wording-numbered-9 {
	counter-reset: wording-paragraph 8;
}

div.wording-numbered-10 {
	counter-reset: wording-paragraph 9;
}

div.wording-numbered, div.wording-newnumbered {
	margin-left: 2em;
	margin-top: 1em;
	margin-bottom: 1em;
}

div.wording-numbered:before, div.wording-newnumbered:before {
	position: absolute;
	margin-left: -2em;
	display: block;
}

div.wording-numbered:before {
	content: counter(wording-paragraph);
	counter-increment: wording-paragraph;
}

div.wording-newnumbered:before {
	content: "�";
}

div.wording-numbered ul, div.wording-newnumbered ul {
	counter-reset: wording-list-item;
}

div.wording-numbered li, div.wording-newnumbered li {
	margin-left: 3em;
}

div.wording-numbered li:before, div.wording-newnumbered li:before {
	position: absolute;
	margin-left: -4.8em;
	display-style: block;
}

div.wording-numbered li:before {
	content: "(" counter(wording-paragraph) "." counter(wording-list-item) ")";
	counter-increment: wording-list-item;
}

div.wording-newnumbered li:before {
	content: "(�." counter(wording-list-item) ")";
	counter-increment: wording-list-item;
}

div.wording-numbered li.c-list:before, div.wording-newnumbered li.c-list:before {
	content: "";
	counter-increment: wording-list-item;
}
</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">N28XX<br>Modern Bit Utilities</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">Published Proposal, <time class="dt-updated" datetime="2021-10-15">2021-10-15</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Previous Revisions:
     <dd>None
     <dt class="editor">Author:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:phdofthehouse@gmail.com">JeanHeyd Meneide</a>
     <dt>Paper Source:
     <dd><a href="https://github.com/ThePhD/future_cxx/tree/main/papers/source/C%20-%20EModern%20Bit%20Utilities.bs">GitHub</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/ThePhD/future_cxx/issues">GitHub</a>
     <dt>Project:
     <dd>ISO/IEC JTC1/SC22/WG14 9899: Programming Language — C
     <dt>Proposal Category:
     <dd>Change Request
     <dt>Target:
     <dd>General Developers
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Endian preprocessor and enumeration directives, alongside byte swapping and big endian / little endian functions.</p>
  </div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#changelog"><span class="secno">1</span> <span class="content">Changelog</span></a>
     <ol class="toc">
      <li><a href="#changelog-r0"><span class="secno">1.1</span> <span class="content">Revision 0 - October 15th, 2021</span></a>
     </ol>
    <li><a href="#motivation"><span class="secno">2</span> <span class="content">Introduction &amp; Motivation</span></a>
    <li>
     <a href="#design"><span class="secno">3</span> <span class="content">Design</span></a>
     <ol class="toc">
      <li><a href="#design-stdc"><span class="secno">3.1</span> <span class="content">Preliminary: Why the <code class="highlight"><c- n>stdc_</c-></code> prefix?</span></a>
      <li><a href="#design-enum"><span class="secno">3.2</span> <span class="content">The Endianness Enumeration</span></a>
      <li><a href="#design-run.time"><span class="secno">3.3</span> <span class="content">Hey! Some Architectures Can Change Their Endianness at Run-time!</span></a>
      <li>
       <a href="#design-floating"><span class="secno">3.4</span> <span class="content">Floating Point has a Byte Order, Too.</span></a>
       <ol class="toc">
        <li><a href="#design-byteswap-static.size"><span class="secno">3.4.1</span> <span class="content">Charter: <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- k>const</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>uintN_t</c-><c- p>)]</c-></code> and More?</span></a>
       </ol>
      <li>
       <a href="#design-byteswap"><span class="secno">3.5</span> <span class="content">Generic Byte Swap and Exact-width Byte Swap</span></a>
       <ol class="toc">
        <li><a href="#design-byteswap-danger"><span class="secno">3.5.1</span> <span class="content">But Byte Swap Is Dangerous?</span></a>
       </ol>
      <li><a href="#design-endianness"><span class="secno">3.6</span> <span class="content">Endian-Aware Load/Store Functions</span></a>
      <li>
       <a href="#design-bit"><span class="secno">3.7</span> <span class="content">Modern Bit Utilities</span></a>
       <ol class="toc">
        <li><a href="#design-arguments"><span class="secno">3.7.1</span> <span class="content">"Why not only generic interfaces or <code class="highlight"><c- p>(</c-><c- n>u</c-><c- p>)</c-><c- b>intmax_t</c-></code> interfaces?</span></a>
        <li><a href="#design-bit-popcount"><span class="secno">3.7.2</span> <span class="content"><code class="highlight"><c- n>popcount</c-></code></span></a>
        <li><a href="#design-bit-rotate_left.right"><span class="secno">3.7.3</span> <span class="content"><code class="highlight"><c- n>rotate_left</c-></code>/<code class="highlight"><c- n>rotate_right</c-></code></span></a>
        <li><a href="#design-bit-leading.trailing.zeroes.ones"><span class="secno">3.7.4</span> <span class="content"><code class="highlight"><c- n>leading_zeroes</c-></code>, <code class="highlight"><c- n>leading_ones</c-></code>, <code class="highlight"><c- n>trailing_zeroes</c-></code>, and <code class="highlight"><c- n>trailing_ones</c-></code></span></a>
        <li><a href="#design-bit-has_single_bit"><span class="secno">3.7.5</span> <span class="content"><code class="highlight"><c- n>has_single_bit</c-></code></span></a>
        <li><a href="#design-bit-bit_ceil"><span class="secno">3.7.6</span> <span class="content"><code class="highlight"><c- n>bit_width</c-></code>/<code class="highlight"><c- n>bit_ceil</c-></code>/<code class="highlight"><c- n>bit_floor</c-></code></span></a>
       </ol>
     </ol>
    <li><a href="#questions"><span class="secno">4</span> <span class="content">Committee Polls / Questions</span></a>
    <li>
     <a href="#wording"><span class="secno">5</span> <span class="content">Wording</span></a>
     <ol class="toc">
      <li><a href="#wording-4p6"><span class="secno">5.1</span> <span class="content">Add <code class="highlight"><c- o>&lt;</c-><c- n>stdbit</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> to freestanding headers in §4, paragraph 6</span></a>
      <li>
       <a href="#wording-7.3�x"><span class="secno">5.2</span> <span class="content">Add a new §7.3�x sub-clause for "Bit and Byte Utilities" in §7</span></a>
       <ol class="toc">
        <li><a href="#wording-7.3�x-endianness"><span class="secno">5.2.1</span> <span class="content">Add a new §7.3�x.1 sub-sub-clause for "Endian" in §7.3�x</span></a>
        <li><a href="#wording-7.3�x-byteswap"><span class="secno">5.2.2</span> <span class="content">Add a new §7.3�x.2 sub-sub-clause for "Byte Swap" in §7.3�x</span></a>
        <li><a href="#wording-7.3�x-endian.aware.load.store"><span class="secno">5.2.3</span> <span class="content">Add a new §7.3�x.4 sub-sub-clause for "Endian Aware" functions in §7.3�x</span></a>
        <li><a href="#wording-7.3�x-low.level.bit"><span class="secno">5.2.4</span> <span class="content">Add a new §7.3�x.6 sub-sub-clause for Low-Level Bit Utilities in §7.3�x</span></a>
        <li><a href="#wording-7.3�x-fundamental.bit"><span class="secno">5.2.5</span> <span class="content">Add a new §7.3�x.3 sub-sub-clause for Fundamental Bit Utilities in §7.3�x</span></a>
       </ol>
      <li><a href="#wording-annexj.3"><span class="secno">5.3</span> <span class="content">Add one new entry for Implementation-defined behavior in Annex J.3</span></a>
      <li><a href="#wording-7.1.3p1"><span class="secno">5.4</span> <span class="content">Add a new bullet point at the top for globally-reserved macro and library names to §7.1.3 "Reserved Identifiers, paragraph 1.</span></a>
     </ol>
    <li>
     <a href="#appendix"><span class="secno">6</span> <span class="content">Appendix</span></a>
     <ol class="toc">
      <li><a href="#appendix-popcount"><span class="secno">6.1</span> <span class="content">Implementation of Generic <code class="highlight"><c- n>popcount</c-></code></span></a>
      <li><a href="#appendix-bit_ceil"><span class="secno">6.2</span> <span class="content">Implementation of Generic <code class="highlight"><c- n>bit_ceil</c-></code></span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <div class="pagebreak"></div>
   <h2 class="heading settled" data-level="1" id="changelog"><span class="secno">1. </span><span class="content">Changelog</span><a class="self-link" href="#changelog"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="changelog-r0"><span class="secno">1.1. </span><span class="content">Revision 0 - October 15th, 2021</span><a class="self-link" href="#changelog-r0"></a></h3>
   <ul>
    <li data-md>
     <p>Initial release. ✨</p>
   </ul>
   <h2 class="heading settled" data-level="2" id="motivation"><span class="secno">2. </span><span class="content">Introduction &amp; Motivation</span><a class="self-link" href="#motivation"></a></h2>
   <p>There is a lot of proposals and work that goes into figuring out the "byte order" of integer values that occupy more than 1 octet (8 bits). This is nominally important when dealing with data that comes over network interfaces and is read from files, where the data can be laid out in various orders of octets for 2-, 3-, 4-, 6-, or 8-tuples of octets. The most well-known endian structures on existing architectures include "Big Endian", where the least significant bit comes "first" and is featured prominently in network protocols and file protocols; and, "Little Endian", where the least significant bit comes "last" and is typically the orientation of data for processor and user architectures most prevalent today.</p>
   <p>In more legacy architectures (Honeywell, PDP), there also exists other orientations called "mixed" or "middle" endian. The uses of such endianness are of dubious benefit and are vanishingly rare amongst commodity and readily available hardware today, but nevertheless still represent an applicable ordering of octets.</p>
   <p>In other related programming interfaces, the C functions/macros <code class="highlight"><c- n>ntoh</c-></code> ("network to host") and <code class="highlight"><c- n>hton</c-></code> ("host to network") (usually suffixed with <code class="highlight"><c- n>l</c-></code> or <code class="highlight"><c- n>ul</c-></code> or others to specify which native data type it was being performed on such as <code class="highlight"><c- b>long</c-></code>) were used to change the byte order of a value and returned that value (<a data-link-type="biblio" href="#biblio-ntohl">[ntohl]</a>). This became such a common operation that many compilers - among them Clang and GCC - optimized the code down to use an intrinsic <code class="highlight"><c- n>__builtin_bytewap</c-><c- p>(...)</c-></code>/<code class="highlight"><c- n>__builtin_bswap</c-><c- p>(...)</c-></code> (<a data-link-type="biblio" href="#biblio-msvc-builtins">for MSVC</a>, <a data-link-type="biblio" href="#biblio-clang-builtins">for Clang</a>, and <a data-link-type="biblio" href="#biblio-gcc-builtins">for GCC</a>). These intrinsics often compiled into binary code representing cheap, simple, and fast byte swapping instructions available on many CPUs for 16, 32, 64, and sometimes 128 bit numbers. The <code class="highlight"><c- n>bswap</c-></code>/<code class="highlight"><c- n>byteswap</c-></code> intrinsics were used as the fundamental underpinning for the <code class="highlight"><c- n>ntoh</c-></code> and <code class="highlight"><c- n>hton</c-></code> functions, where a check for the translation-time endianness of the program determined if the byte order would be flipped or not.</p>
   <p>This proposal puts forth the fundamentals that make a homegrown implementation of <code class="highlight"><c- n>htonl</c-></code>, <code class="highlight"><c- n>ntoh</c-></code>, and other endianness-based functions possible in Standard C code. It also addresses many of the compiler-based intrinsics found to generate efficient machine code, with a few simpler utilities layered on top of it.</p>
   <h2 class="heading settled" data-level="3" id="design"><span class="secno">3. </span><span class="content">Design</span><a class="self-link" href="#design"></a></h2>
   <p>This is a library addition. It is meant to expose both macros and enumeration values that can be used for both translation-time checks and for execution-time runs. It provides a way to check if the endianness within the preprocessor, and gives definitive names that allow for knowing whether the endianness is big, little, or neither. We state big, little, or neither, because there is no settled-upon name for the legacy endianness of "middle" or "mixed", nor any agreed upon ordering for such a "middle" or "mixed" endianness between architectures. This is not the case for big endian or little endian, where one is simply the reverse of the other, always, in every case, across architectures, file protocols, and network specifications.</p>
   <p>This design also provides a small but essential suite of utilities, all within the <code class="highlight"><c- cp>#include</c-> &lt;stdbit.h></code> header.</p>
   <h3 class="heading settled" data-level="3.1" id="design-stdc"><span class="secno">3.1. </span><span class="content">Preliminary: Why the <code class="highlight"><c- n>stdc_</c-></code> prefix?</span><a class="self-link" href="#design-stdc"></a></h3>
   <p>We use the <code class="highlight"><c- n>stdc_</c-></code> prefix for these functions so that we do not have to struggle with taking common words away from the end user. Because we now have 31 bytes of linker name significance, we can afford to have some sort of prefix rather than spend all of our time carving out reserved words or header-specific extensions. This will let us have good names that very clearly map to industry practice, without completely replacing or forcing compatible with existing code that already has taken the name with sometimes-conflict argument conventions.</p>
   <h3 class="heading settled" data-level="3.2" id="design-enum"><span class="secno">3.2. </span><span class="content">The Endianness Enumeration</span><a class="self-link" href="#design-enum"></a></h3>
   <p>The enumeration is specified as follows:</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- cp>#define __STDC_ENDIAN_LITTLE__ 1 </c-><c- d>/* some unique value */</c->
<c- cp>#define __STDC_ENDIAN_BIG__ 2 </c-><c- d>/* some other unique value */</c->
<c- cp>#define __STDC_ENDIAN_NATIVE__ </c-><c- d>/* see below! */</c->

<c- k>typedef</c-> <c- k>enum</c-> <c- nc>stdc_endian</c-> <c- p>{</c->
	<c- n>stdc_endian_little</c-> <c- o>=</c-> <c- n>__STDC_ENDIAN_LITTLE__</c-><c- p>,</c->
	<c- n>stdc_endian_big</c-> <c- o>=</c-> <c- n>__STDC_ENDIAN_BIG__</c-><c- p>,</c->
	<c- n>stdc_endian_native</c-> <c- o>=</c-> <c- n>__STDC_ENDIAN_NATIVE__</c->
<c- p>}</c-> <c- n>stdc_endian</c-><c- p>;</c->
</pre>
   <p>The goal of this enumeration is that if the system identifies as a "little endian" system, then <code class="highlight"><c- n>__STDC_ENDIAN_LITTLE__</c-> <c- o>==</c-> <c- n>__STDC_ENDIAN_NATIVE__</c-></code>, and that is how an end-user knows that the implementation is little endian. Similarly, a user can check <code class="highlight"><c- n>__STDC_ENDIAN_BIG__</c-> <c- o>==</c-> <c- n>__STDC_ENDIAN_NATIVE__</c-></code>, and they can know the implementation is big endian. Finally, if the system is neither big nor little endian, than <code class="highlight"><c- n>__STDC_ENDIAN_NATIVE__</c-></code> is a unique value that does not compare equal to either value:</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>
<c- cp>#include</c-> &lt;stdio.h>

<c- b>int</c-> <c- nf>main</c-> <c- p>()</c-> <c- p>{</c->
	<c- k>if</c-> <c- p>(</c-><c- n>stdc_endian_native</c-> <c- o>==</c-> <c- n>stdc_endian_little</c-><c- p>)</c-> <c- p>{</c->
		<c- n>printf</c-><c- p>(</c-><c- s>"little endian! uwu</c-><c- se>\n</c-><c- s>"</c-><c- p>);</c->
	<c- p>}</c->
	<c- k>else</c-> <c- k>if</c-> <c- p>(</c-><c- n>stdc_endian_native</c-> <c- o>==</c-> <c- n>stdc_endian_big</c-><c- p>)</c-> <c- p>{</c->
		<c- n>printf</c-><c- p>(</c-><c- s>"big endian OwO!</c-><c- se>\n</c-><c- s>"</c-><c- p>);</c->
	<c- p>}</c->
	<c- k>else</c-> <c- p>{</c->
		<c- n>printf</c-><c- p>(</c-><c- s>"what is this?!</c-><c- se>\n</c-><c- s>"</c-><c- p>);</c->
	<c- p>}</c->
	<c- k>return</c-> <c- mi>0</c-><c- p>;</c->
<c- p>}</c->
</pre>
   <p>If a user has a Honeywell architecture or a PDP architecture, it is up to them to figure out which flavor of "middle endian"/"mixed endian"/"bi endian" they are utilizing. We do not give these a name in the enumeration because neither the Honeywell or PDP communities ever figured out which flavor of the 32-bit byte order of <code class="highlight"><c- mi>2341</c-></code>/<code class="highlight"><c- mi>3412</c-></code>/<code class="highlight"><c- mi>2143</c-></code>/etc. was strongly assigned to which name ("mixed" endian? "mixed-big" endian? "bi-little" endian?), and since this is not a settled matter in existing practice we do not provide a name for it in the C Standard. It is also of dubious determination what the byte order for a 3-byte, 5-byte, 6-byte, or 7-byte integer is in these mixed-endian types, whereas both big and little have dependable orderings.</p>
   <p>These same enumerations come from the (accepted) C++20 paper and idioms found in <a data-link-type="biblio" href="#biblio-p0463">[p0463]</a>, which also went into a <code class="highlight"><c- o>&lt;</c-><c- n>bit</c-><c- o>></c-></code> header.</p>
   <h3 class="heading settled" data-level="3.3" id="design-run.time"><span class="secno">3.3. </span><span class="content">Hey! Some Architectures Can Change Their Endianness at Run-time!</span><a class="self-link" href="#design-run.time"></a></h3>
   <p>This is beyond the scope of this proposal. This is meant to capture the translation-time endianness. There also does not appear to be any operating system written today that can tolerate an endianness change happening arbitrarily at runtime, after a program has launched. This means that the property is effectively a translation-time property, and therefore can be exposed as a compile-time constant. A future proposal to determine the run-time byte order is more than welcome from someone who has suitable experience dealing with such architectures and programs, and this proposal does not preclude their ability to provide such a run-time function e.g. <code class="highlight"><c- n>stdc_endian</c-> <c- nf>get_execution_endian</c-><c- p>(</c-><c- b>void</c-><c- p>);</c-></code>.</p>
   <h3 class="heading settled" data-level="3.4" id="design-floating"><span class="secno">3.4. </span><span class="content">Floating Point has a Byte Order, Too.</span><a class="self-link" href="#design-floating"></a></h3>
   <p>For the design of this paper, we strictly consider the design space for (unsigned) integers, only. Floating point numbers already have an implementation-defined byte order, and none of these functions are meant to interact with the floating point types. While the <code class="highlight"><c- n>stdc_mem_byteswap</c-></code> function can work on any memory region, which includes any structure, scalar, or similar type with or without padding bits, the function just swaps bytes. Nothing needs to be said about padding bits in this case, since the operation is well-defined in all cases.</p>
   <p>The <code class="highlight"><c- n>stdc_store_</c-><c- o>*</c-></code> and <code class="highlight"><c- n>stdc_load_</c-><c- o>*</c-></code> functions are strictly for exact-width unsigned integers, which already have blanket-wording which states that these types have no padding bits. Therefore, we do not have to address the idea that certain built-in integer types may have padding bits that do not participate in the value representation. To emphasize this, the functions have a trailing <code class="highlight"><c- n>u</c-></code> before the *<code class="highlight"><c- n>N</c-></code>* bit count for the exact-width integer functions. In the future, if implementations settle on how bytes can be swapped and stores can be done for floating point numbers or other non-padded structures, a separate proposal can help move that along.</p>
   <p>It shall be noted that for C++, since C++20, it’s endian enumeration applies to all scalar types:</p>
   <blockquote>
    <p>This subclause describes the endianness of the scalar types of the execution environment.</p>
    <p>— C++ Standard Working Draft, <a href="http://eel.is/c++draft/bit.endian#1">bit.endian/p1</a></p>
   </blockquote>
   <p>It does not specify what this means for padding bits or similar; nor, I think, does it have to. Byte order means very little for padding bits until serialization comes into play. C++ does not define any functions which do byte-order aware serialization. So, it does not have to write any specification governing what may or may not happen.</p>
   <p>For this proposal, we focus purely on integer types and, more specifically, on integer types which do not have padding when we are defining the actual functions. While it is acknowledged that floating point types and pointers have byte orders too, we do not want to interact directly with these types when it comes to endianness load and store functions. Byte swaps, (bit) population counts, and other bit operations can be performed on floating point types after they have been copied or type-punned (with implementation checking/blessing) into equivalent unsigned integer objects to do the necessary work.</p>
   <h4 class="heading settled" data-level="3.4.1" id="design-byteswap-static.size"><span class="secno">3.4.1. </span><span class="content">Charter: <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- k>const</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>uintN_t</c-><c- p>)]</c-></code> and More?</span><a class="self-link" href="#design-byteswap-static.size"></a></h4>
   <p>There are 2 choices on how to represent sized pointer arguments. The first is a <code class="highlight"><c- b>void</c-><c- o>*</c-> <c- n>ptr</c-></code> convention for functions arguments in this proposal. The second is an <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]</c-></code>/<code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>sizeof</c-><c- p>(</c-><c- n>uintN_t</c-><c- p>)]</c-></code> convention.</p>
   <p>To start, we still put any <code class="highlight"><c- n>size</c-></code> + <code class="highlight"><c- n>ptr</c-></code> arguments in the proper "size first, pointer second" configuration so that implementation extensions which allow <code class="highlight"><c- b>void</c-> <c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]</c-></code> can exist no matter what choice is made here. That part does not change. The <code class="highlight"><c- b>void</c-><c- o>*</c-></code> argument convention mean that pointers to structures, or similar, can be passed to these functions without needing a cast. This represents the totality of the ease of use argument. The <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]</c-></code> argument convention can produce both better compile-time safety and articulate requirements using purely the function declaration, without needing to look up prose from the C Standard or implementation documentation. The cost is that any use of the function will require a cast in strictly conforming code.</p>
   <p>One of the tipping arguments in favor of our choice of <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]</c-></code> is that <code class="highlight"><c- b>void</c-><c- o>*</c-></code> can be dangerous, especially since we still do not have a <code class="highlight"><c- n>nullptr</c-></code> constant in the language and <code class="highlight"><c- mi>0</c-></code> can be used for both the size and the pointer argument. (Which is, very sadly, an actual bug that happens in existing code. Especially when users mix <code class="highlight"><c- n>memset</c-></code> and <code class="highlight"><c- n>memcpy</c-></code> calls and use the wrong <code class="highlight"><c- mi>0</c-></code> argument because of writing one and meaning the other, and copying values over a large part of their 0-pointer in their low-level driver code.) Using an <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-><c- o>*</c-></code> (or its statically-sized array function argument form) means that usage of the functions below would require explicit casting on the part of the user. This is, in fact, the way it is presented in <a data-link-type="biblio" href="#biblio-portable-endianness">[portable-endianness]</a>: as far as existing practice is concerned, users of the code would rather cast and preserve safety rather than easily use something like <code class="highlight"><c- n>stdc_mem_byteswap</c-></code> with the guts of their structure.</p>
   <h3 class="heading settled" data-level="3.5" id="design-byteswap"><span class="secno">3.5. </span><span class="content">Generic Byte Swap and Exact-width Byte Swap</span><a class="self-link" href="#design-byteswap"></a></h3>
   <p>In order to accommodate both a wide variety of architectures but also support exact-width integer optimized intrinsics, this proposal takes from the industry 2 forms of byteswap:</p>
   <ul>
    <li data-md>
     <p>one generic <code class="highlight"><c- n>mem_</c-></code> version which takes a pointer and the number of bytes to perform a reverse operation; and,</p>
    <li data-md>
     <p>a sequence of exact-width byte swapping instructions which map directly to intrinsics available in compilers and instructions in hardware.</p>
   </ul>
   <p>These end up inhabiting the <code class="highlight"><c- n>stdbit</c-><c- p>.</c-><c- n>h</c-></code> header and have the following interface:</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- b>void</c-> <c- nf>stdc_mem_byteswap</c-><c- p>(</c-><c- b>size_t</c-> <c- n>n</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]);</c->
<c- n>uintN_t</c-> <c- nf>stdc_byteswapN</c-><c- p>(</c-><c- n>uintN_t</c-> <c- n>value</c-><c- p>);</c->
</pre>
   <p>where <code class="highlight"><c- n>N</c-></code> is one of the exact-width integer types such as <code class="highlight"><c- mi>8</c-></code>, <code class="highlight"><c- mi>24</c-></code>, <code class="highlight"><c- mi>16</c-></code>, <code class="highlight"><c- mi>32</c-></code>, <code class="highlight"><c- mi>64</c-></code>, <code class="highlight"><c- mi>128</c-></code>, and others. This matches the builtins (<a data-link-type="biblio" href="#biblio-msvc-builtins">MSVC</a>, <a data-link-type="biblio" href="#biblio-clang-builtins">Clang</a>, <a data-link-type="biblio" href="#biblio-gcc-builtins">GCC</a>) and the result of compiler optimizations that produce instructions for many existing architectures as shown in the README of <a data-link-type="biblio" href="#biblio-portable-endianness">this portable endianness function implementation</a>.</p>
   <h4 class="heading settled" data-level="3.5.1" id="design-byteswap-danger"><span class="secno">3.5.1. </span><span class="content">But Byte Swap Is Dangerous?</span><a class="self-link" href="#design-byteswap-danger"></a></h4>
   <p>Byte swapping, by itself, is absolutely dangerous in terms of code portability. Users often program strictly for their own architecture when doing serialization, and do not take into consideration that their endianness can change. This means that, while <code class="highlight"><c- n>byteswap</c-></code> functions can compile down to intrinsics, those intrinsics get employed to change "little endian" to "big endian" without performing the necessary "am I already in the right endianness" check. Values that are <em>already</em> in the proper byte order for their target serialization get swapped, resulting in an incorrect byte order for the target network protocol, file format, or other binary serialization target.</p>
   <p>The inclusion of the <code class="highlight"><c- o>&lt;</c-><c- n>stdbit</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> header reduces this problem, but does not fully eliminate it. This is why many Linux and BSDs include functions which directly transcribe from one endianness to another. This is why the <a data-link-type="biblio" href="#biblio-endian-fallacy">Byte Order Fallacy</a> has spread so far in Systems Programming communities, and why many create their own versions of this both in official widespread vendor code (<a data-link-type="biblio" href="#biblio-linux-endian">[linux-endian]</a>) and in more personal code used for specific distributions (<a data-link-type="biblio" href="#biblio-portable-endianness">[portable-endianness]</a>).</p>
   <h3 class="heading settled" data-level="3.6" id="design-endianness"><span class="secno">3.6. </span><span class="content">Endian-Aware Load/Store Functions</span><a class="self-link" href="#design-endianness"></a></h3>
   <p>Functions meant to transport bytes to a specific endianness need 2 pieces of information:</p>
   <ul>
    <li data-md>
     <p>the byte order of the input; and,</p>
    <li data-md>
     <p>the desired byte order of the output.</p>
   </ul>
   <p>To represent any operation that goes from/to the byte order that things like <code class="highlight"><c- b>long</c-> <c- b>long</c-></code>s are kept in, the Linux/BSD/etc. APIs use the term "host", represented by <code class="highlight"><c- n>h</c-></code>. Every other operation is represented by explicitly naming it, particularly as <code class="highlight"><c- n>be</c-></code> or <code class="highlight"><c- n>le</c-></code> for "big endian" or "little endian". Again, because of the severe confusion that comes from what the exact byte order a "mixed endian" multi byte scalar is meant to be in, there seems not to exist any widely available practice regarding what to call a PDP/Honeywell endian configuration. Therefore, mixed/bi/middle-endian is not included in this proposal. It can be added at a later date if the community ever settles on a well-defined naming convention that can be shared between codebases, standards, and industries.</p>
   <p>The specification for the endianness functions borrows from many different sources listed above, and is as follows:</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- b>void</c-> <c- nf>stdc_store_leN</c-><c- p>(</c-><c- n>uintN_t</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>value</c-><c- p>)]);</c->
<c- n>uintN_t</c-> <c- nf>stdc_load_leN</c-><c- p>(</c-><c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>value</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store_beN</c-><c- p>(</c-><c- n>uintN_t</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>value</c-><c- p>)]);</c->
<c- n>uintN_t</c-> <c- nf>stdc_load_beN</c-><c- p>(</c-><c- k>const</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>value</c-><c- p>)]);</c->
</pre>
   <p>Note that this specification only exists for <code class="highlight"><c- n>N</c-></code> types, similarly to the <code class="highlight"><c- n>stdc_byteswapN</c-></code> functions. This is because the endianness need only be well-defined for exact-width types that contain no padding. Every other integer type in the C Standard does not have to be the advertised size, nor does it have to have no padding bits. This is unfortunate, but the only way we can preserve portable behavior amongst programs. The ultimate goal of these functions is portable behavior across implementations. Those relying on implementation-specific magic can continue to do so; this just makes a (very large) portion of serialization and deserialization work much more accessible and standard, without the risk of forgetting to properly check endianness. These functions do, of course, take into account the execution environment’s endianness, and therefore are suitable for the task at hand. This includes serializing bytes into <code class="highlight"><c- n>ptr</c-></code> without first doing a byteswap when the endianness of <code class="highlight"><c- n>value</c-></code> and the specified <code class="highlight"><c- n>be</c-></code>/<code class="highlight"><c- n>le</c-></code> endianness match.</p>
   <h3 class="heading settled" data-level="3.7" id="design-bit"><span class="secno">3.7. </span><span class="content">Modern Bit Utilities</span><a class="self-link" href="#design-bit"></a></h3>
   <p>Additionally to this, upon first pre_review of the paper there was a strong supporting groundswell for bit operations that have long been present in both hardware and as compiler intrinsics. This idea progressed naturally from the <code class="highlight"><c- n>bswap</c-></code> and <code class="highlight"><c- n>__builtin_bswap</c-></code> discussion. As indicated in <a data-link-type="biblio" href="#biblio-p0553">[p0553]</a> (merged into C++20 already), here’s a basic rundown of some common architectures and their support for various bit functionality:</p>
   <table>
    <tbody>
     <tr>
      <th>operation
      <th>Intel/AMD
      <th>ARM
      <th>PowerPC
     <tr>
      <td><code class="highlight"><c- n>rotl</c-></code>
      <td>ROL 
      <td>-
      <td>rldicl
     <tr>
      <td><code class="highlight"><c- n>rotr</c-></code>
      <td>ROR 
      <td>ROR, EXTR
      <td>-
     <tr>
      <td><code class="highlight"><c- n>popcount</c-></code>
      <td>POPCNT
      <td>-
      <td>popcntb
     <tr>
      <td><code class="highlight"><c- n>leading_zero</c-></code>
      <td>BSR, LZCNT
      <td>CLZ
      <td>cntlzd
     <tr>
      <td><code class="highlight"><c- n>leading_one</c-></code>
      <td>-
      <td>CLS
      <td>-
     <tr>
      <td><code class="highlight"><c- n>trailing_zero</c-></code>
      <td>BSF, TZCNT
      <td>-
      <td>-
     <tr>
      <td><code class="highlight"><c- n>trailing_one</c-></code>
      <td>-
      <td>-
      <td>-
   </table>
   <p>Many of the below bit functions are defined below to ease portability to these architectures. For places where specific compiler idioms and automatic detection are not possible, similar assembly tricks or optimized implementations can be provided by C. Further bit functions were also merged into C++, resulting in the current state of the [C++ <code class="highlight"><c- o>&lt;</c-><c- n>bit</c-><c- o>></c-></code> header](https://en.cppreference.com/w/cpp/header/bit). We try to take the most useful subset of these functions that most closely represent functionality on both old and new CPU architectures as well as common, necessary operations that have been around in the last 25 years for various industries.</p>
   <h4 class="heading settled" data-level="3.7.1" id="design-arguments"><span class="secno">3.7.1. </span><span class="content">"Why not only generic interfaces or <code class="highlight"><c- p>(</c-><c- n>u</c-><c- p>)</c-><c- b>intmax_t</c-></code> interfaces?</span><a class="self-link" href="#design-arguments"></a></h4>
   <p>For many of the bit-based utilities, you will see it introduces functions with several suffixes for the various types. Often, it is asked: why? Even the GCC builtins for things like <code class="highlight"><c- n>popcount</c-></code> only take <code class="highlight"><c- b>long</c-></code> and <code class="highlight"><c- b>long</c-> <c- b>long</c-></code>. The answer is in the blank spaces in the table above: for architectures that do not have perfect instruction mappings for a given built-in type (e.g., ARM for <code class="highlight"><c- n>popcount</c-></code>), the amount of bits one is utilizing for the given function is actually incredibly important. There is a difference between counting for 8 bits in a loop and counting 64 bits (or larger for extended integer types), so the various forms are provided to allow implementations to produce the most efficient implementation on their platforms when the user requests a specific size.</p>
   <p>The generic interfaces can be used by individuals who want automatic selection of the best. And, as shown in the <a href="#appendix">§ 6 Appendix</a>, platforms can use any builtins or techniques at their disposal to select an appropriate builtin, instruction, or function call to fit the use case.</p>
   <h4 class="heading settled" data-level="3.7.2" id="design-bit-popcount"><span class="secno">3.7.2. </span><span class="content"><code class="highlight"><c- n>popcount</c-></code></span><a class="self-link" href="#design-bit-popcount"></a></h4>
   <p><code class="highlight"><c- n>popcount</c-></code> (Population Count) is an older computer science term taken from the statistics / biology nomenclature to indicate how many bits are set within a grouping. It’s a very useful instruction with applications in everything from game development to scientific computing. It is also directly provided by many instruction sets. The API for it is as such:</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- b>int</c-> <c- nf>stdc_popcountuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_popcountus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_popcountui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_popcountul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_popcountull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- c1>// type-generic macro</c->
<c- b>int</c-> <c- nf>stdc_popcount</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
   <p>It covers all of the built-in unsigned integer types. The type-generic macro supports all of the built-in types as well as any of the implementation-defined extended integer types. See the <a href="#appendix-popcount">appendix for an implementation.</a></p>
   <h4 class="heading settled" data-level="3.7.3" id="design-bit-rotate_left.right"><span class="secno">3.7.3. </span><span class="content"><code class="highlight"><c- n>rotate_left</c-></code>/<code class="highlight"><c- n>rotate_right</c-></code></span><a class="self-link" href="#design-bit-rotate_left.right"></a></h4>
   <p><code class="highlight"><c- n>rotate_left</c-></code>/<code class="highlight"><c- n>rotate_right</c-></code> are common CPU instructions and the forms of the commonly-used circular shifts. They are common operations with applications in cyclic codes. They are commonly expressed (for 32-bit numbers) as <code class="highlight"><c- n>value</c-> <c- o>&lt;&lt;</c-> <c- n>count</c-> <c- o>|</c-> <c- n>value</c-> <c- o>>></c-> <c- p>(</c-><c- mi>32</c-> <c- o>-</c-> <c- n>count</c-><c- p>)</c-></code> (rotate left) or <code class="highlight"><c- n>value</c-> <c- o>>></c-> <c- n>count</c-> <c- o>|</c-> <c- n>value</c-> <c- o>&lt;&lt;</c-> <c- p>(</c-><c- mi>32</c-> <c- o>-</c-> <c- n>count</c-><c- p>)</c-></code> (rotate right).</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- b>unsigned</c-> <c- b>char</c-> <c- n>stdc_rotate_leftuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- n>stdc_rotate_leftus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- n>stdc_rotate_leftui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- n>stdc_rotate_leftul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>stdc_rotate_leftull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->

<c- b>unsigned</c-> <c- b>char</c-> <c- n>stdc_rotate_rightuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- n>stdc_rotate_rightus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- n>stdc_rotate_rightui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- n>stdc_rotate_rightul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>stdc_rotate_rightull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->

<c- c1>// type-generic macro</c->
<c- n>generic_integer_type</c-> <c- nf>stdc_rotate_left</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- n>generic_integer_type</c-> <c- nf>stdc_rotate_right</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
</pre>
   <p>They cover all of the built-in unsigned integer types. Note that <code class="highlight"><c- n>count</c-></code> is a signed integer: if <code class="highlight"><c- n>stdc_rotate_leftuc</c-><c- p>(</c-><c- mi>1</c-><c- p>,</c-> <c- mi>-1</c-><c- p>)</c-></code> or <code class="highlight"><c- n>stdc_rotate_rightuc</c-><c- p>(</c-><c- mi>1</c-><c- p>,</c-> <c- mi>-1</c-><c- p>)</c-></code> is called, it will call itself again with <code class="highlight"><c- n>stdc_rotate_leftuc</c-><c- p>(</c-><c- n>value</c-><c- p>,</c-> <c- o>-</c-><c- n>count</c-><c- p>)</c-></code> or <code class="highlight"><c- n>stdc_rotate_rightuc</c-><c- p>(</c-><c- n>value</c-><c- p>,</c-> <c- o>-</c-><c- n>count</c-><c- p>)</c-></code>. This matches the behavior from C++ and avoids undefined behavior, while also avoiding too-large shift errors from signed-to-unsigned conversions.</p>
   <h4 class="heading settled" data-level="3.7.4" id="design-bit-leading.trailing.zeroes.ones"><span class="secno">3.7.4. </span><span class="content"><code class="highlight"><c- n>leading_zeroes</c-></code>, <code class="highlight"><c- n>leading_ones</c-></code>, <code class="highlight"><c- n>trailing_zeroes</c-></code>, and <code class="highlight"><c- n>trailing_ones</c-></code></span><a class="self-link" href="#design-bit-leading.trailing.zeroes.ones"></a></h4>
   <p><code class="highlight"><c- n>leading_zeroes</c-></code>, <code class="highlight"><c- n>leading_ones</c-></code>, <code class="highlight"><c- n>trailing_zeroes</c-></code>, and <code class="highlight"><c- n>trailing_zeroes</c-></code> are semi-common CPU instruction for counting the number of zeroes/ones from the most significant bit ("leading") and the least significant bit ("trailing"). C++ adopted this one using the names of the form <code class="highlight"><c- n>count</c-><c- p>(</c-><c- n>l</c-><c- o>|</c-><c- n>r</c-><c- p>)</c-><c- n>_</c-><c- p>(</c-><c- n>zero</c-><c- o>|</c-><c- n>one</c-><c- p>)</c-></code>. The <code class="highlight"><c- n>l</c-></code>/<code class="highlight"><c- n>r</c-></code> stand for "left" and "right". C++ uses left to match the concept of the left hand side of integers in lexical parsing and left shift operators in C an C++. We choose "leading" and "trailing" here as that’s the more common instruction name, and tie in a little bit better with "most/least significant bit" than "left" or "right" do. The name <code class="highlight"><c- n>most_significant_zeroes</c-></code> (and its variations for the other 3 operations) can also work, albeit it would be one of the biggest names in the C standard library if we do choose it. (This could potentially be shortened to <code class="highlight"><c- n>most_signif_zeroes</c-></code> or even <code class="highlight"><c- n>most_sig_zeroes</c-></code>).</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- b>int</c-> <c- nf>stdc_leading_zeroesuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_zeroesus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_zeroesui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_zeroesul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_zeroesull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- b>int</c-> <c- nf>stdc_leading_onesuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_onesus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_onesui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_onesul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_onesull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- b>int</c-> <c- nf>stdc_trailing_zeroesuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_zeroesus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_zeroesui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_zeroesul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_zeroesull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- b>int</c-> <c- nf>stdc_trailing_onesuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_onesus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_onesui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_onesul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_onesull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- c1>// type-generic macros</c->
<c- b>int</c-> <c- nf>stdc_leading_zeroes</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_ones</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_zeroes</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_ones</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
   <h4 class="heading settled" data-level="3.7.5" id="design-bit-has_single_bit"><span class="secno">3.7.5. </span><span class="content"><code class="highlight"><c- n>has_single_bit</c-></code></span><a class="self-link" href="#design-bit-has_single_bit"></a></h4>
   <p>This is a function that determines if an unsigned integer is a power of 2. It can be written either using a normal expression such as <code class="highlight"><c- n>value</c-> <c- o>!=</c-> <c- mi>0</c-> <c- o>&amp;&amp;</c-> <c- p>((</c-><c- n>value</c-> <c- o>&amp;</c-> <c- p>(</c-><c- n>value</c-> <c- o>-</c-> <c- mi>1</c-><c- p>))</c-> <c- o>==</c-> <c- mi>0</c-><c- p>)</c-></code>, or by using <code class="highlight"><c- n>popcount</c-><c- p>(</c-><c- n>value</c-><c- p>)</c-> <c- o>==</c-> <c- mi>1</c-></code>. Checking that something is a power of 2 (or that it has a single bit set) is an operation used for checking if something can be turned into a mask value efficiently (useful in specific kinds of containers which specific bit limits like hash tables) and many other applications. This one does not map directly to a hardware instruction.</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- n>_Bool</c-> <c- nf>stdc_has_single_bituc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- n>_Bool</c-> <c- nf>stdc_has_single_bitus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- n>_Bool</c-> <c- nf>stdc_has_single_bitui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- n>_Bool</c-> <c- nf>stdc_has_single_bitul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- n>_Bool</c-> <c- nf>stdc_has_single_bitull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- c1>// type-generic macro</c->
<c- n>_Bool</c-> <c- nf>stdc_has_single_bit</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
   <h4 class="heading settled" data-level="3.7.6" id="design-bit-bit_ceil"><span class="secno">3.7.6. </span><span class="content"><code class="highlight"><c- n>bit_width</c-></code>/<code class="highlight"><c- n>bit_ceil</c-></code>/<code class="highlight"><c- n>bit_floor</c-></code></span><a class="self-link" href="#design-bit-bit_ceil"></a></h4>
   <p>These set of functions provide a way to determine the number of bits it takes to represent a given value (<code class="highlight"><c- n>bit_width</c-></code>), the next largest power of 2 from the value (<code class="highlight"><c- n>bit_ceil</c-></code>), the previous largest power of 2 from the value (<code class="highlight"><c- n>bit_floor</c-></code>), and the number of bits required to store the given value. All of these operations are extremely useful, especially in the context of GPUs. <code class="highlight"><c- n>bit_width</c-></code> can be used to drastically simplify the implementation of both <code class="highlight"><c- n>bit_ceil</c-></code> and <code class="highlight"><c- n>bit_floor</c-></code>.</p>
   <p><code class="highlight"><c- n>bit_width</c-></code> can be calculated with <code class="highlight"><c- n>VALUE_WIDTH</c-> <c- o>-</c-> <c- n>stdc_leading_zeroes</c-><c- p>(</c-><c- n>value</c-><c- p>)</c-></code>, where <code class="highlight"><c- n>VALUE_WIDTH</c-></code> is one of the <code class="highlight"><c- o>&lt;</c-><c- n>limits</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> macros for the given unsigned integer type. <code class="highlight"><c- n>bit_ceil</c-></code>'s computation is subtle and involves a bit of preparation to avoid problems with integer promotions and bit shifts in specific cases (typically <code class="highlight"><c- b>unsigned</c-> <c- b>char</c-></code>, <code class="highlight"><c- b>char</c-></code>, and <code class="highlight"><c- b>unsigned</c-> <c- b>short</c-></code>). This aids in making the case for a would make for a good candidate for standardization (since it can be hard to get right). See the <a href="#appendix-bit_ceil">appendix for an implementation</a>. <code class="highlight"><c- n>bit_floor</c-></code> is simpler, and is comprised of a simple computation of <code class="highlight"><c- n>x</c-> <c- o>==</c-> <c- mi>0</c-> <c- o>?</c-> <c- mi>0</c-> <c- o>:</c-> <c- p>(</c-><c- mi>1</c-> <c- o>&lt;&lt;</c-> <c- p>(</c-><c- n>stdc_bit_width</c-><c- p>(</c-><c- n>x</c-><c- p>)</c-> <c- o>-</c-> <c- mi>1</c-><c- p>))</c-></code> (with appropriately typed / casted constants so the right type is returned without promotions or casts).</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- b>unsigned</c-> <c- b>char</c-> <c- n>stdc_bit_flooruc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- n>stdc_bit_floorus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- n>stdc_bit_floorui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- n>stdc_bit_floorul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>stdc_bit_floorull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- b>unsigned</c-> <c- b>char</c-> <c- n>stdc_bit_ceiluc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- n>stdc_bit_ceilus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- n>stdc_bit_ceilui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- n>stdc_bit_ceilul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>stdc_bit_ceilull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- b>unsigned</c-> <c- b>char</c-> <c- n>stdc_bit_widthuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- n>stdc_bit_widthus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- n>stdc_bit_widthui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- n>stdc_bit_widthul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>stdc_bit_widthull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- c1>// type-generic macro</c->
<c- n>generic_integer_type</c-> <c- nf>stdc_bit_floor</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
<c- n>generic_integer_type</c-> <c- nf>stdc_bit_ceil</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
<c- n>generic_integer_type</c-> <c- nf>stdc_bit_width</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
   <h2 class="heading settled" data-level="4" id="questions"><span class="secno">4. </span><span class="content">Committee Polls / Questions</span><a class="self-link" href="#questions"></a></h2>
   <p>For the Committee, this proposal is, effectively, five parts:</p>
   <ol>
    <li data-md>
     <p>the endianness definitions;</p>
    <li data-md>
     <p>the <code class="highlight"><c- n>byteswap</c-></code> functions (generic and width-specific);</p>
    <li data-md>
     <p>the <code class="highlight"><c- n>load</c-></code>/<code class="highlight"><c- n>store</c-></code>, width-specific functions;</p>
    <li data-md>
     <p>the suite of low-level bit functions (mapping directly to instructions: <code class="highlight"><c- n>leading</c-><c- o>|</c-><c- n>trailing_zeroes</c-><c- o>|</c-><c- n>ones</c-></code>, <code class="highlight"><c- n>popcount</c-></code>, <code class="highlight"><c- n>rotate_left</c-><c- o>|</c-><c- n>right</c-></code>); and,</p>
    <li data-md>
     <p>the suite of useful bit functions which may not map directly to instructions (<code class="highlight"><c- n>bit_ceil</c-></code>, <code class="highlight"><c- n>bit_floor</c-></code>, <code class="highlight"><c- n>bit_width</c-></code>, <code class="highlight"><c- n>has_single_bit</c-></code>).</p>
   </ol>
   <p>These can be polled together or separately, depending on what the Committee desires. It is the author’s recommendation that all are adopted to make serialization and bit work with scalars much simpler and easier.</p>
   <h2 class="heading settled" data-level="5" id="wording"><span class="secno">5. </span><span class="content">Wording</span><a class="self-link" href="#wording"></a></h2>
   <p>The following wording is <a data-link-type="biblio" href="#biblio-n2596">relative to N2596</a>.</p>
   <h3 class="heading settled" data-level="5.1" id="wording-4p6"><span class="secno">5.1. </span><span class="content">Add <code class="highlight"><c- o>&lt;</c-><c- n>stdbit</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> to freestanding headers in §4, paragraph 6</span><a class="self-link" href="#wording-4p6"></a></h3>
   <blockquote>
     A conforming freestanding implementation shall accept any strictly conforming program in which the use of the features specified in the library clause (Clause 7) is confined to the contents of the standard headers <code class="highlight"><c- o>&lt;</c-><c- b>float</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code>, <code class="highlight"><c- o>&lt;</c-><c- n>iso646</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code>, <code class="highlight"><c- o>&lt;</c-><c- n>limits</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code>, <code class="highlight"><c- o>&lt;</c-><c- n>stdalign</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code>, <code class="highlight"><c- o>&lt;</c-><c- n>stdarg</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code>, <code class="highlight"><c- o>&lt;</c-><c- n>stdbool</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code>, <code class="highlight"><c- o>&lt;</c-><c- n>stddef</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code>, <code class="highlight"><c- o>&lt;</c-><c- n>stdint</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code>,
    <ins> <code class="highlight"><c- o>&lt;</c-><c- n>stdbit</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code>,</ins>
     and <code class="highlight"><c- o>&lt;</c-><c- n>stdnoreturn</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> 
   </blockquote>
   <h3 class="heading settled" data-level="5.2" id="wording-7.3�x"><span class="secno">5.2. </span><span class="content">Add a new §7.3�x sub-clause for "Bit and Byte Utilities" in §7</span><a class="self-link" href="#wording-7.3�x"></a></h3>
   <blockquote>
    <ins>
     <div class="wording-section">
      <p><b>7.3�x Bit and Byte Utilities <code class="highlight"><c- o>&lt;</c-><c- n>stdbit</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code></b> </p>
      <div class="wording-numbered"> The header <code class="highlight"><c- o>&lt;</c-><c- n>stdbit</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> defines the following macros and enumeration constants, as well as declares the following types and functions, to work with the byte and bit representation of many types, typically integer types. This header makes available the <code class="highlight"><c- b>size_t</c-></code> type name (7.19) and any <code class="highlight"><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-></code> type names defined by the implementation (7.20). </div>
     </div>
    </ins>
   </blockquote>
   <h4 class="heading settled" data-level="5.2.1" id="wording-7.3�x-endianness"><span class="secno">5.2.1. </span><span class="content">Add a new §7.3�x.1 sub-sub-clause for "Endian" in §7.3�x</span><a class="self-link" href="#wording-7.3�x-endianness"></a></h4>
   <blockquote>
    <ins>
     <p><b>7.3�x.1 Endian</b> </p>
     <div class="wording-section">
      <div class="wording-numbered"> Two common methods of byte ordering in multi-byte scalar types are <b>big-endian</b> and <b>little-endian</b>. Big-endian is a format for storage of binary data in which the most significant byte is placed first, with the rest in descending order. Little-endian is a format for storage or transmission of binary data in which the least significant byte is placed first, with the rest in ascending order. Other byte orderings are also possible. Declarations and definitions in 7.3�x, a suffix containing <code class="highlight"><c- n>le</c-></code> typically represents little endian. A suffix containing <code class="highlight"><c- n>be</c-></code> typically represents <em>big-endian</em>. This clause describes the endianness of the execution environment with respect to standard and extended integer types without padding bits. </div>
      <div class="wording-numbered">
        The macros are: 
       <blockquote>
<pre class="language-cpp highlight"><c- n>__STDC_ENDIAN_LITTLE__</c-> <c- mi>1</c->
</pre>
       </blockquote>
       <p>which represents a method of byte order storage least significant byte is placed first, and the rest are in ascending order is suitable for use in an <code class="highlight"><c- cp>#if</c-></code> preprocessing directive;</p>
       <blockquote>
<pre class="language-cpp highlight"><c- n>__STDC_ENDIAN_BIG__</c-> <c- mi>2</c->
</pre>
       </blockquote>
       <p>which represents a method of byte order storage most significant byte is placed first, and the rest are in descending order is suitable for use in an <code class="highlight"><c- cp>#if</c-></code> preprocessing directive;</p>
       <blockquote>
<pre class="language-cpp highlight"><c- n>__STDC_ENDIAN_NATIVE__</c-> <c- d>/* see below */</c->
</pre>
       </blockquote>
       <p>which represents the method of byte order storage for the execution environment and is suitable for use in an <code class="highlight"><c- cp>#if</c-></code> preprocessing directive.</p>
      </div>
      <div class="wording-numbered">
       <p><code class="highlight"><c- n>__STDC_ENDIAN_NATIVE__</c-></code> shall be identical to <code class="highlight"><c- n>__STDC_ENDIAN_LITTLE__</c-></code> if the execution environment is little-endian. Otherwise, <code class="highlight"><c- n>__STDC_ENDIAN_NATIVE__</c-></code> shall be identical to <code class="highlight"><c- n>__STDC_ENDIAN_BIG__</c-></code> if the execution environment is big-endian. If <code class="highlight"><c- n>__STDC_ENDIAN_NATIVE__</c-></code> is not equivalent to either, then the byte order for the execution environment is implementation-defined.</p>
      </div>
      <div class="wording-numbered">
        The enumeration type is 
       <blockquote>
<pre class="language-cpp highlight"><c- n>stdc_endian</c->
</pre>
       </blockquote>
       <p>which is both a typedef name and a tag name, whose corresponding enumeration constants are listed below.</p>
      </div>
      <div class="wording-numbered">
        The enumeration constants are: 
       <blockquote>
<pre class="language-cpp highlight"><c- n>stdc_endian_little</c-> <c- o>=</c-> <c- n>__STDC_ENDIAN_LITTLE__</c->
</pre>
       </blockquote>
       <p>which represents a method of byte order storage least significant byte is placed first, and the rest are in ascending order;</p>
       <blockquote>
<pre class="language-cpp highlight"><c- n>stdc_endian_big</c-> <c- o>=</c-> <c- n>__STDC_ENDIAN_BIG__</c->
</pre>
       </blockquote>
       <p>which represents a method of byte order storage most significant byte is placed first, and the rest are in descending order; and,</p>
       <blockquote>
<pre class="language-cpp highlight"><c- n>stdc_endian_native</c-> <c- o>=</c-> <c- n>__STDC_ENDIAN_NATIVE__</c->
</pre>
       </blockquote>
       <p>which represents the method of byte order storage for the execution environment.<sup>FOOTNOTE�0)</sup></p>
      </div>
      <p><sup>FOOTNOTE�0)</sup><sub>Comparing the enumeration constants by <code class="highlight"><c- n>stdc_endian_native</c-> <c- o>==</c-> <c- n>stdc_endian_little</c-></code> or <code class="highlight"><c- n>stdc_endian_native</c-> <c- o>==</c-> <c- n>stdc_endian_big</c-></code> is the same as checking the macros for whether or not the execution environment is big-endian, little-endian, or neither.</sub></p>
     </div>
    </ins>
   </blockquote>
   <h4 class="heading settled" data-level="5.2.2" id="wording-7.3�x-byteswap"><span class="secno">5.2.2. </span><span class="content">Add a new §7.3�x.2 sub-sub-clause for "Byte Swap" in §7.3�x</span><a class="self-link" href="#wording-7.3�x-byteswap"></a></h4>
   <blockquote>
    <ins>
     <p><b>7.3�x.2 Byte Swap</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- b>void</c-> <c- nf>stdc_mem_byteswap</c-><c- p>(</c-><c- b>size_t</c-> <c- n>n</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Description</b> </p>
      <div class="wording-numbered">
       <p>The <code class="highlight"><c- n>stdc_mem_byteswap</c-></code> function provides an interface to reverse the order of a given sequence of bytes. <code class="highlight"><c- n>ptr</c-></code> must be a pointer to an object of at least <code class="highlight"><c- n>n</c-></code> bytes. If <code class="highlight"><c- n>n</c-></code> is less than or equal to <code class="highlight"><c- mi>1</c-></code>, then the function has no effect. Otherwise, let <code class="highlight"><c- n>R</c-></code> represent the byte sequence represented by <code class="highlight"><c- n>ptr</c-></code> and <code class="highlight"><c- n>n</c-></code> in reverse order. Each byte’s value is exchanged with the value in its corresponding reverse position in <code class="highlight"><c- n>R</c-></code>.</p>
      </div>
     </div>
     <p><b>7.3�x.3 Exact-width Byte Swap</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- n>uintN_t</c-> <c- nf>stdc_byteswapuN</c-><c- p>(</c-><c- n>uintN_t</c-> <c- n>value</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Description</b> </p>
      <div class="wording-numbered">
       <p>The <code class="highlight"><c- n>stdc_mem_byteswap</c-><i><c- n>N</c-></i></code> functions provide an interface to swap the bytes of a corresponding <code class="highlight"><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-></code> object, where <i>N</i> matches an existing exact-width integer type (7.20.1.1). These functions are optional. However, if an implementation provides the corresponding <code class="highlight"><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-></code> typedef (7.20.1.1), it shall define the corresponding exact-width byte swap functions.</p>
      </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered">
       <p>Returns a byte swapped <code class="highlight"><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-></code> value.</p>
      </div>
     </div>
    </ins>
   </blockquote>
   <h4 class="heading settled" data-level="5.2.3" id="wording-7.3�x-endian.aware.load.store"><span class="secno">5.2.3. </span><span class="content">Add a new §7.3�x.4 sub-sub-clause for "Endian Aware" functions in §7.3�x</span><a class="self-link" href="#wording-7.3�x-endian.aware.load.store"></a></h4>
   <blockquote>
    <ins>
     <p><b>7.3�x.4 Exact-width Endian-Aware Load</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- n>uintN_t</c-> <c- nf>stdc_load_leuN</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- k>const</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>uintN_t</c-><c- p>)]);</c->
<c- n>uintN_t</c-> <c- nf>stdc_load_beuN</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- k>const</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>uintN_t</c-><c- p>)]);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Description</b> </p>
      <div class="wording-numbered">
       <p>The <code class="highlight"><c- n>stdc_load_le</c-><i><c- n>N</c-></i></code> and <code class="highlight"><c- n>stdc_load_be</c-><i><c- n>N</c-></i></code> functions return a <code class="highlight"><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-></code> object by loading bytes from <code class="highlight"><c- n>ptr</c-></code> in an endian-aware (7.3�x.1) manner, where <i>N</i> matches an existing exact-width integer type (7.20.1.1). These functions are optional. However, if an implementation provides the corresponding <code class="highlight"><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-></code> typedef (7.20.1.1), it shall define the corresponding exact-width endian-aware load functions.</p>
      </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered"></div>
      <p><b>7.3�x.5 Exact-width Endian-Aware Store</b> </p>
      <div class="wording-section">
       <p><b>Synopsis</b> </p>
       <div class="wording-numbered">
        <blockquote>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;stdbit.h>

<c- b>void</c-> <c- nf>stdc_store_leuN</c-><c- p>(</c-><c- n>uintN_t</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>uintN_t</c-><c- p>)]);</c->
<c- b>void</c-> <c- nf>stdc_store_beuN</c-><c- p>(</c-><c- n>uintN_t</c-> <c- n>value</c-><c- p>,</c-> <c- b>unsigned</c-> <c- b>char</c-> <c- n>ptr</c-><c- p>[</c-><c- k>static</c-> <c- k>sizeof</c-><c- p>(</c-><c- n>uintN_t</c-><c- p>)]);</c->
</pre>
        </blockquote>
       </div>
       <p><b>Description</b> </p>
       <div class="wording-numbered">
        <p>The <code class="highlight"><c- n>stdc_store_leu</c-><i><c- n>N</c-></i></code> and <code class="highlight"><c- n>stdc_store_beu</c-><i><c- n>N</c-></i></code> functions copy the bytes of an <code class="highlight"><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-></code> object to <code class="highlight"><c- n>ptr</c-></code> in an endian-aware (7.3�x) manner, where <i>N</i> matches an existing exact-width integer type (7.20.1.1). The <code class="highlight"><c- n>le</c-></code> stands for little-endian and the <code class="highlight"><c- n>be</c-></code> stands for big-endian. These functions are optional. However, if an implementation provides the corresponding <code class="highlight"><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-></code> typedef, it shall define the corresponding exact-width endian-aware load functions.</p>
       </div>
       <p><b>Returns</b> </p>
       <div class="wording-numbered"> For each byte in <code class="highlight"><c- n>ptr</c-></code> at <code class="highlight"><c- n>index</c-></code> from 0 to <code class="highlight"><c- k>sizeof</c-><c- p>(</c-><c- n>uint</c-><i><c- n>N</c-></i><c- n>_t</c-><c- p>)</c-></code>, let S be <code class="highlight"><c- n>index</c-> <c- o>*</c-> <c- n>CHAR_BIT</c-></code> for <code class="highlight"><c- n>le</c-></code> functions and <code class="highlight"><c- p>((</c-><c- n>N</c-> <c- o>-</c-> <c- n>CHAR_BIT</c-><c- p>)</c-> <c- o>-</c-> <c- p>(</c-><c- n>index</c-> <c- o>*</c-> <c- n>CHAR_BIT</c-><c- p>))</c-></code> for <code class="highlight"><c- n>be</c-></code> functions. Stores <code class="highlight"><c- n>value</c-> <c- o>>></c-> <c- n>S</c-></code> into <code class="highlight"><c- n>ptr</c-><c- p>[</c-><c- n>index</c-><c- p>]</c-></code>. </div>
      </div>
     </div>
    </ins>
   </blockquote>
   <h4 class="heading settled" data-level="5.2.4" id="wording-7.3�x-low.level.bit"><span class="secno">5.2.4. </span><span class="content">Add a new §7.3�x.6 sub-sub-clause for Low-Level Bit Utilities in §7.3�x</span><a class="self-link" href="#wording-7.3�x-low.level.bit"></a></h4>
   <blockquote>
    <ins>
     <p><b>7.3�x.6 Count Leading Zeroes</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>int</c-> <c- nf>stdc_leading_zeroesuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_zeroesus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_zeroesui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_zeroesul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_zeroesull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- b>int</c-> <c- nf>stdc_leading_zeroes</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered"> Returns the number of consecutive 1 bits in <code class="highlight"><c- n>value</c-></code>, starting from the most significant bit. The last function is a type-generic function that returns the appropriate value based on the type of the input value, so long as it is an unsigned integer type (standard or extended). </div>
     </div>
     <p><b>7.3�x.7 Count Leading Ones</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>int</c-> <c- nf>stdc_leading_onessuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_onesus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_onesui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_onesul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_leading_onesull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- b>int</c-> <c- nf>stdc_leading_ones</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered"> Returns the number of consecutive 0 bits in <code class="highlight"><c- n>value</c-></code>, starting from the most significant bit. The last function is a type-generic function that returns the appropriate value based on the type of the input value, so long as it is an unsigned integer type (standard or extended). </div>
     </div>
     <p><b>7.3�x.8 Count Trailing Zeroes</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>int</c-> <c- nf>stdc_trailing_zeroesuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_zeroesus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_zeroesui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_zeroesul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_zeroesull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- b>int</c-> <c- nf>stdc_trailing_zeroes</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered"> Returns the number of consecutive 1 bits in <code class="highlight"><c- n>value</c-></code>, starting from the least significant bit. The last function is a type-generic function that returns the appropriate value based on the type of the input value, so long as it is an unsigned integer type (standard or extended). </div>
     </div>
     <p><b>7.3�x.9 Count Trailing Ones</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>int</c-> <c- nf>stdc_trailing_onessuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_onesus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_onesui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_onesul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_trailing_onesull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- b>int</c-> <c- nf>stdc_trailing_ones</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered"> Returns the number of consecutive 0 bits in <code class="highlight"><c- n>value</c-></code>, starting from the least significant bit. The last function is a type-generic function that returns the appropriate value based on the type of the input value, so long as it is an unsigned integer type (standard or extended). </div>
     </div>
     <p><b>7.3�x.10 Rotate Left</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>stdc_rotate_leftuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- n>stdc_rotate_leftus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- n>stdc_rotate_leftui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- n>stdc_rotate_leftul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>stdc_rotate_leftull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->

<c- n>generic_integer_type</c-> <c- nf>stdc_rotate_left</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Description</b> </p>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_rotate_left</c-></code> functions perform a bitwise rotate left. This operation is typically known as a left circular shift. </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered">
        Let N be the value of the <code class="highlight"><c- n>_WIDTH</c-></code> macros in <code class="highlight"><c- o>&lt;</c-><c- n>limits</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> (5.2.4.2.1) corresponding to the type of the input <code class="highlight"><c- n>value</c-></code>. Let r be <code class="highlight"><c- n>count</c-> <c- o>%</c-> <c- n>N</c-></code>. 
       <dl>
        <dd>— If r is 0, returns <code class="highlight"><c- n>value</c-></code>;
        <dd>— Otherwise, if r is positive, returns <code class="highlight"><c- p>(</c-><c- n>value</c-> <c- o>&lt;&lt;</c-> <c- n>r</c-><c- p>)</c-> <c- o>|</c-> <c- p>(</c-><c- n>value</c-> <c- o>>></c-> <c- p>(</c-><c- n>N</c-> <c- o>-</c-> <c- n>r</c-><c- p>))</c-></code>;
        <dd>— Otherwise, if r is negative, returns <code class="highlight"><c- n>stdc_rotate_left</c-><c- p>(</c-><c- n>value</c-><c- p>,</c-> <c- o>-</c-><c- n>r</c-><c- p>)</c-></code>.
       </dl>
       <p>The last symbol is a pseudo-symbol representing a type-generic macro which returns the above described result for a given input value so long as its type is an unsigned integer type (standard or extended).</p>
      </div>
     </div>
     <p><b>7.3�x.11 Rotate Right</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>stdc_rotate_rightuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- n>stdc_rotate_rightus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- n>stdc_rotate_rightui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- n>stdc_rotate_rightul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>stdc_rotate_rightull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->

<c- n>generic_integer_type</c-> <c- nf>stdc_rotate_right</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>,</c-> <c- b>int</c-> <c- n>count</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Description</b> </p>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_rotate_right</c-></code> functions perform a bitwise rotate right. This operation is typically known as a right circular shift. </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered">
        Let N be the value of the <code class="highlight"><c- n>_WIDTH</c-></code> macros in <code class="highlight"><c- o>&lt;</c-><c- n>limits</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> (5.2.4.2.1) corresponding to the type of the input <code class="highlight"><c- n>value</c-></code>. Let r be <code class="highlight"><c- n>count</c-> <c- o>%</c-> <c- n>N</c-></code>. 
       <dl>
        <dd>— If r is 0, returns <code class="highlight"><c- n>value</c-></code>;
        <dd>— Otherwise, if r is positive, returns <code class="highlight"><c- p>(</c-><c- n>value</c-> <c- o>>></c-> <c- n>r</c-><c- p>)</c-> <c- o>|</c-> <c- p>(</c-><c- n>value</c-> <c- o>&lt;&lt;</c-> <c- p>(</c-><c- n>N</c-> <c- o>-</c-> <c- n>r</c-><c- p>))</c-></code>;
        <dd>— Otherwise, if r is negative, returns <code class="highlight"><c- n>stdc_rotate_right</c-><c- p>(</c-><c- n>value</c-><c- p>,</c-> <c- o>-</c-><c- n>r</c-><c- p>)</c-></code>.
       </dl>
       <p>The last symbol is a pseudo-symbol representing a type-generic macro which returns the above described result for a given input value so long as its type is an unsigned integer type (standard or extended).</p>
      </div>
     </div>
     <p><b>7.3�x.12 Population Count</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>int</c-> <c- nf>stdc_popcountuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_popcountus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_popcountui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_popcountul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>int</c-> <c- nf>stdc_popcountull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- b>int</c-> <c- nf>stdc_popcount</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_popcount</c-></code> functions returns the total number of 1 bits within the given <code class="highlight"><c- n>value</c-></code>. The last symbol is a pseudo-symbol representing a type-generic macro which returns the previously described result for a given input value so long as its type is an unsigned integer type (standard or extended). </div>
     </div>
    </ins>
   </blockquote>
   <h4 class="heading settled" data-level="5.2.5" id="wording-7.3�x-fundamental.bit"><span class="secno">5.2.5. </span><span class="content">Add a new §7.3�x.3 sub-sub-clause for Fundamental Bit Utilities in §7.3�x</span><a class="self-link" href="#wording-7.3�x-fundamental.bit"></a></h4>
   <blockquote>
    <ins>
     <p><b>7.3�x.13 Single-bit Check</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- n>_Bool</c-> <c- nf>stdc_has_single_bituc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- n>_Bool</c-> <c- nf>stdc_has_single_bitus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- n>_Bool</c-> <c- nf>stdc_has_single_bitui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- n>_Bool</c-> <c- nf>stdc_has_single_bitul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- n>_Bool</c-> <c- nf>stdc_has_single_bitull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- n>_Bool</c-> <c- nf>stdc_has_single_bit</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_has_single_bit</c-></code> functions returns the total number of 1 bits within the given <code class="highlight"><c- n>value</c-></code>. The last symbol is a pseudo-symbol representing a type-generic macro which returns the previously described result for a given input value so long as its type is an unsigned integer type (standard or extended). </div>
     </div>
     <p><b>7.3�x.14 Bit Width</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>stdc_bit_widthuc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- n>stdc_bit_widthus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- n>stdc_bit_widthui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- n>stdc_bit_widthul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>stdc_bit_widthull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- n>generic_integer_type</c-> <c- nf>stdc_bit_width</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Description</b> </p>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_bit_width</c-></code> functions compute the smallest number of bits needed to store <code class="highlight"><c- n>value</c-></code>. </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_bit_width</c-></code> functions return 0 if <code class="highlight"><c- n>value</c-></code> is 0. Otherwise, they return <code class="highlight"><c- mi>1</c-> <c- o>+</c-> ⌊<c- n>log</c-><sub><c- n>2</c-></sub><c- p>(</c-><c- n>value</c-><c- p>)</c->⌋</code>. The last symbol is a pseudo-symbol representing a type-generic macro which returns the previously described result for a given input value so long as its type is an unsigned integer type (standard or extended). </div>
     </div>
     <p><b>7.3�x.15 Bit Floor</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>stdc_bit_flooruc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- n>stdc_bit_floorus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- n>stdc_bit_floorui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- n>stdc_bit_floorul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>stdc_bit_floorull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- n>generic_integer_type</c-> <c- nf>stdc_bit_floor</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Description</b> </p>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_bit_floor</c-></code> functions compute the largest integral power of 2 that is not greater than <code class="highlight"><c- n>value</c-></code>. </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_bit_floor</c-></code> functions return 0 if <code class="highlight"><c- n>value</c-></code> is 0. Otherwise, they return the largest integral power of 2 that is not greater than <code class="highlight"><c- n>value</c-></code>. The last symbol is a pseudo-symbol representing a type-generic macro which returns the previously described result for a given input value so long as its type is an unsigned integer type (standard or extended). </div>
     </div>
     <p><b>7.3�x.16 Bit Ceiling</b> </p>
     <div class="wording-section">
      <p><b>Synopsis</b> </p>
      <div class="wording-numbered">
       <blockquote>
<pre class="language-cpp highlight"><c- b>unsigned</c-> <c- b>char</c-> <c- n>stdc_bit_ceiluc</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>char</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>short</c-> <c- n>stdc_bit_ceilus</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>short</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>int</c-> <c- n>stdc_bit_ceilui</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>int</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- n>stdc_bit_ceilul</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->
<c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>stdc_bit_ceilull</c-><c- p>(</c-><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-> <c- n>value</c-><c- p>);</c->

<c- n>generic_integer_type</c-> <c- nf>stdc_bit_ceil</c-><c- p>(</c-><c- n>generic_integer_type</c-> <c- n>value</c-><c- p>);</c->
</pre>
       </blockquote>
      </div>
      <p><b>Description</b> </p>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_bit_ceil</c-></code> functions compute the smallest integral power of 2 that is not less than <code class="highlight"><c- n>value</c-></code>. If the computation does not fit in the given return type, the behavior is undefined. </div>
      <p><b>Returns</b> </p>
      <div class="wording-numbered"> The <code class="highlight"><c- n>stdc_bit_ceil</c-></code> functions return the smallest integral power of 2 that is not less than <code class="highlight"><c- n>value</c-></code>. The last symbol is a pseudo-symbol representing a type-generic macro which returns the previously described result for a given input value so long as its type is an unsigned integer type (standard or extended). </div>
     </div>
    </ins>
   </blockquote>
   <h3 class="heading settled" data-level="5.3" id="wording-annexj.3"><span class="secno">5.3. </span><span class="content">Add one new entry for Implementation-defined behavior in Annex J.3</span><a class="self-link" href="#wording-annexj.3"></a></h3>
   <blockquote>
    <p>
     <ins>— The value of <code class="highlight"><c- n>stdc_endian_native</c-></code> and <code class="highlight"><c- n>__STDC_ENDIAN_NATIVE__</c-></code> if the execution environment is not big-endian or little-endian (7.3�x.1).</ins>
    </p>
   </blockquote>
   <h3 class="heading settled" data-level="5.4" id="wording-7.1.3p1"><span class="secno">5.4. </span><span class="content">Add a new bullet point at the top for globally-reserved macro and library names to §7.1.3 "Reserved Identifiers, paragraph 1.</span><a class="self-link" href="#wording-7.1.3p1"></a></h3>
   <blockquote>
    <p>
     <ins>— All identifiers beginning with <code class="highlight"><c- n>__STDC_</c-></code> and all functions starting with <code class="highlight"><c- n>stdc_</c-></code> are reserved for future use.</ins>
    </p>
   </blockquote>
   <h2 class="heading settled" data-level="6" id="appendix"><span class="secno">6. </span><span class="content">Appendix</span><a class="self-link" href="#appendix"></a></h2>
   <p>A collection of miscellaneous and helpful bits of information and implementation.</p>
   <h3 class="heading settled" data-level="6.1" id="appendix-popcount"><span class="secno">6.1. </span><span class="content">Implementation of Generic <code class="highlight"><c- n>popcount</c-></code></span><a class="self-link" href="#appendix-popcount"></a></h3>
   <p>Sample implementation on <a href="https://godbolt.org/z/411qsrhPG">Godbolt (clang/gcc specific builtins)</a>:</p>
<pre class="language-cpp highlight"><c- cp>#define stdc_popcount(...) \</c->
<c- cp>    _Generic((__VA_ARGS__), \</c->
<c- cp>        char: __builtin_popcount, \</c->
<c- cp>        unsigned char: __builtin_popcount, \</c->
<c- cp>        unsigned short: __builtin_popcount, \</c->
<c- cp>        unsigned int: __builtin_popcount, \</c->
<c- cp>        unsigned long: __builtin_popcountl, \</c->
<c- cp>        unsigned long long: __builtin_popcountll \</c->
<c- cp>    )(__VA_ARGS__)</c->

<c- b>int</c-> <c- nf>main</c-> <c- p>()</c-> <c- p>{</c->
    <c- k>return</c-> <c- n>stdc_popcount</c-><c- p>((</c-><c- b>unsigned</c-> <c- b>char</c-><c- p>)</c-><c- sc>'0'</c-><c- p>)</c-> <c- o>+</c-> <c- n>stdc_popcount</c-><c- p>(</c-><c- mi>13ull</c-><c- p>);</c->
<c- p>}</c->
</pre>
   <h3 class="heading settled" data-level="6.2" id="appendix-bit_ceil"><span class="secno">6.2. </span><span class="content">Implementation of Generic <code class="highlight"><c- n>bit_ceil</c-></code></span><a class="self-link" href="#appendix-bit_ceil"></a></h3>
   <p>Sample implementation on <a href="https://godbolt.org/z/7ePah1c8b">Godbolt (clang/gcc specific builtins)</a>:</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;limits.h>

<c- cp>#define stdc_leading_zeroes(...) \</c->
<c- cp>    (_Generic((__VA_ARGS__), \</c->
<c- cp>        char: __builtin_clz((__VA_ARGS__)) - ((sizeof(unsigned) - sizeof(char)) * CHAR_BIT), \</c->
<c- cp>        unsigned char: __builtin_clz((__VA_ARGS__)) - ((sizeof(unsigned) - sizeof(unsigned char)) * CHAR_BIT), \</c->
<c- cp>        unsigned short: __builtin_clz((__VA_ARGS__)) - ((sizeof(unsigned) - sizeof(unsigned short)) * CHAR_BIT), \</c->
<c- cp>        unsigned int: __builtin_clz((__VA_ARGS__)), \</c->
<c- cp>        unsigned long: __builtin_clzl((__VA_ARGS__)), \</c->
<c- cp>        unsigned long long: __builtin_clzll((__VA_ARGS__)) \</c->
<c- cp>    ))</c->

<c- cp>#define stdc_bit_width(...) \</c->
<c- cp>    _Generic((__VA_ARGS__), \</c->
<c- cp>        char: (CHAR_BIT - stdc_leading_zeroes((__VA_ARGS__))), \</c->
<c- cp>        unsigned char: (UCHAR_WIDTH - stdc_leading_zeroes((__VA_ARGS__))), \</c->
<c- cp>        unsigned short: (USHRT_WIDTH - stdc_leading_zeroes((__VA_ARGS__))), \</c->
<c- cp>        unsigned int: (UINT_WIDTH - stdc_leading_zeroes((__VA_ARGS__))), \</c->
<c- cp>        unsigned long: (ULONG_WIDTH - stdc_leading_zeroes((__VA_ARGS__))), \</c->
<c- cp>        unsigned long long: (ULLONG_WIDTH - stdc_leading_zeroes((__VA_ARGS__))) \</c->
<c- cp>    )</c->

<c- c1>// integer promotion rules means we need to</c->
<c- c1>// precisely calculate the value here ~_~</c->
<c- cp>#define __stdc_bit_ceil_promotion_protection(_Type, _Value) \</c->
<c- cp>    _Generic((_Value), \</c->
<c- cp>        char: (_Value &lt;= (_Type)1) ? (_Type)0 : (_Type)(1u &lt;fake-production-placeholder class=production bs-autolink-syntax='&lt;&lt; (stdc_bit_width((_Type)(_Value - 1)) + (UINT_WIDTH - UCHAR_WIDTH)) >>' data-opaque> (stdc_bit_width((_Type)(_Value - 1)) + (UINT_WIDTH - UCHAR_WIDTH)) &lt;/fake-production-placeholder> (UINT_WIDTH - UCHAR_WIDTH)), \</c->
<c- cp>        unsigned char: (_Value &lt;= (_Type)1) ? (_Type)0 : (_Type)(1u &lt;fake-production-placeholder class=production bs-autolink-syntax='&lt;&lt; (stdc_bit_width((_Type)(_Value - 1)) + (UINT_WIDTH - UCHAR_WIDTH)) >>' data-opaque> (stdc_bit_width((_Type)(_Value - 1)) + (UINT_WIDTH - UCHAR_WIDTH)) &lt;/fake-production-placeholder> (UINT_WIDTH - UCHAR_WIDTH)), \</c->
<c- cp>        unsigned short: (_Value &lt;= (_Type)1) ? (_Type)0 : (_Type)(1u &lt;fake-production-placeholder class=production bs-autolink-syntax='&lt;&lt; (stdc_bit_width((_Type)(_Value - 1)) + (UINT_WIDTH - USHRT_WIDTH)) >>' data-opaque> (stdc_bit_width((_Type)(_Value - 1)) + (UINT_WIDTH - USHRT_WIDTH)) &lt;/fake-production-placeholder> (UINT_WIDTH - USHRT_WIDTH)), \</c->
<c- cp>        default: (_Type)0 \</c->
<c- cp>    )</c->

<c- cp>#define stdc_bit_ceil(...) \</c->
<c- cp>    _Generic((__VA_ARGS__), \</c->
<c- cp>        char: __stdc_bit_ceil_promotion_protection(unsigned char, (__VA_ARGS__)), \</c->
<c- cp>        unsigned char: __stdc_bit_ceil_promotion_protection(unsigned char, (__VA_ARGS__)), \</c->
<c- cp>        unsigned short: __stdc_bit_ceil_promotion_protection(unsigned short, (__VA_ARGS__)), \</c->
<c- cp>        unsigned int: (unsigned int)(1u &lt;&lt; stdc_bit_width((unsigned int)((__VA_ARGS__) - 1))), \</c->
<c- cp>        unsigned long: (unsigned long)(1ul &lt;&lt; stdc_bit_width((unsigned long)((__VA_ARGS__) - 1))), \</c->
<c- cp>        unsigned long long: (unsigned long long)(1ull &lt;&lt; stdc_bit_width((unsigned long long)((__VA_ARGS__) - 1))) \</c->
<c- cp>    )</c->

<c- b>int</c-> <c- nf>main</c-> <c- p>()</c-> <c- p>{</c->
    <c- b>int</c-> <c- n>x</c-> <c- o>=</c-> <c- n>stdc_bit_ceil</c-><c- p>((</c-><c- b>unsigned</c-> <c- b>char</c-><c- p>)</c-><c- sc>'\x13'</c-><c- p>);</c->
    <c- b>int</c-> <c- n>y</c-> <c- o>=</c-> <c- n>stdc_bit_ceil</c-><c- p>(</c-><c- mi>33u</c-><c- p>);</c->
    <c- k>return</c-> <c- n>x</c-> <c- o>+</c-> <c- n>y</c-><c- p>;</c->
<c- p>}</c->
</pre>
  </main>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-clang-builtins">[CLANG-BUILTINS]
   <dd>LLVM Foundation; Clang Contributors. <a href="https://clang.llvm.org/docs/LanguageExtensions.html#intrinsics-support-within-constant-expressions"><cite>Clang Language Extensions: Clang Documentation</cite></a>. September 1st, 2021. URL: <a href="https://clang.llvm.org/docs/LanguageExtensions.html#intrinsics-support-within-constant-expressions">https://clang.llvm.org/docs/LanguageExtensions.html#intrinsics-support-within-constant-expressions</a>
   <dt id="biblio-endian-fallacy">[ENDIAN-FALLACY]
   <dd>Rob Pike. <a href="https://commandcenter.blogspot.com/2012/04/byte-order-fallacy.html"><cite>The Byte Order Fallacy</cite></a>. April 3rd, 2012. URL: <a href="https://commandcenter.blogspot.com/2012/04/byte-order-fallacy.html">https://commandcenter.blogspot.com/2012/04/byte-order-fallacy.html</a>
   <dt id="biblio-gcc-builtins">[GCC-BUILTINS]
   <dd>GCC Contributors. <a href="https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html"><cite>Other Built-in Functions Provided by GCC</cite></a>. September 1st, 2021. URL: <a href="https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html">https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html</a>
   <dt id="biblio-linux-endian">[LINUX-ENDIAN]
   <dd>Linux; BSD. <a href="https://linux.die.net/man/3/endian"><cite>endian(3)</cite></a>. September 1st, 2021. URL: <a href="https://linux.die.net/man/3/endian">https://linux.die.net/man/3/endian</a>
   <dt id="biblio-msvc-builtins">[MSVC-BUILTINS]
   <dd>Microsoft. <a href="https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/byteswap-uint64-byteswap-ulong-byteswap-ushort?view=msvc-160"><cite>_byteswap_uint64, _byteswap_ulong, _byteswap_ushort</cite></a>. November 4th, 2016. URL: <a href="https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/byteswap-uint64-byteswap-ulong-byteswap-ushort?view=msvc-160">https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/byteswap-uint64-byteswap-ulong-byteswap-ushort?view=msvc-160</a>
   <dt id="biblio-n2596">[N2596]
   <dd>ISO/IEC JTC1 SC22 WG14 - Programming Languages, C; JeanHeyd Meneide; Freek Wiedijk. <a href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2596.pdf"><cite>N2596: ISO/IEC 9899:202x - Programming Languages, C</cite></a>. December 11th, 2020. URL: <a href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2596.pdf">http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2596.pdf</a>
   <dt id="biblio-ntohl">[NTOHL]
   <dd>Linux. <a href="https://linux.die.net/man/3/ntohl"><cite>ntohl(3)</cite></a>. September 30th, 2021. URL: <a href="https://linux.die.net/man/3/ntohl">https://linux.die.net/man/3/ntohl</a>
   <dt id="biblio-p0463">[P0463]
   <dd>Howard E. Hinnant. <a href="https://wg21.link/p0463"><cite>endian. Just endian.</cite></a>. July 13th, 2017. URL: <a href="https://wg21.link/p0463">https://wg21.link/p0463</a>
   <dt id="biblio-p0553">[P0553]
   <dd>Jens Maurer. <a href="https://wg21.link/p0553"><cite>Bit operations</cite></a>. March 1st, 2019. URL: <a href="https://wg21.link/p0553">https://wg21.link/p0553</a>
   <dt id="biblio-portable-endianness">[PORTABLE-ENDIANNESS]
   <dd>David Seifert. <a href="https://github.com/SoapGentoo/portable-endianness"><cite>portable-endianness</cite></a>. May 16th, 2021. URL: <a href="https://github.com/SoapGentoo/portable-endianness">https://github.com/SoapGentoo/portable-endianness</a>
  </dl>