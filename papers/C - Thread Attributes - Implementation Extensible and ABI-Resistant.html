<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>N3554: Thread Attributes - Implementation Extensible and ABI-Resistant</title>
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in § N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *     -> ins/del.c### for candidate and proposed changes (amendments)
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *   - .correction for "candidate corrections"       (div, aside, details, section)
 *   - .addition   for "candidate additions"         (div, aside, details, section)
 *   - .correction.proposed for "proposed corrections" (div, aside, details, section)
 *   - .addition.proposed   for "proposed additions"   (div, aside, details, section)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Outdated warning for old specs
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                    Body                                    */
/******************************************************************************/

	html {
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;			  /* limit line length to 50em for readability   */
		margin: 0 auto;				/* center text within page                    */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag    */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		color: black;
		color: var(--text);
		background: white top left fixed no-repeat;
		background: var(--bg) top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em; }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small; }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 3;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;	/* Inherit the font family. */
		line-height: 1.2;		/* Keep wrapped headings compact */
		hyphens: manual;		/* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#profile-and-date {
		/* #profile-and-date is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	border-left: 0.5em solid #DEF;
	border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	 padding: .5em;
	 border: thin solid #ddd;
	 border: thin solid var(--algo-border);
	 border-radius: .5em;
	 margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	 margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	 margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	margin-left: -2em;
	}
	dl.switch {
	padding-left: 2em;
	}
	dl.switch > dt {
	text-indent: -1.5em;
	margin-top: 1em;
	}
	dl.switch > dt + dt {
	margin-top: 0;
	}
	dl.switch > dt::before {
	content: '\21AA';
	padding: 0 0.5em 0 0;
	display: inline-block;
	width: 1em;
	text-align: right;
	line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: #aa0000;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #006100;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

	/* for amendments (candidate/proposed changes) */

	.amendment ins, .correction ins, .addition ins,
	ins[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment del, .correction del, .addition del,
	del[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment.proposed ins, .correction.proposed ins, .addition.proposed ins,
	ins[class^=c].proposed {
		text-decoration-style: double;
	}
	.amendment.proposed del, .correction.proposed del, .addition.proposed del,
	del[class^=c].proposed {
		text-decoration-style: double;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

	/* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: underline #707070;
		text-decoration: underline var(--a-normal-underline);
		text-decoration-skip-ink: none;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		text-decoration-color: #bbb;
		text-decoration-color: var(--a-visited-underline);
	}

	/* Indicate interaction with the link */
	a[href]:focus,
	a[href]:hover {
		text-decoration-thickness: 2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		text-decoration-color: #c00;
		text-decoration-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	  .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,	.sidefigure img,	figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em;
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em; }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote,
	.amendment, .correction, .addition {
		margin: 1em auto;
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	blockquote > :first-child,
	.note  > p:first-child,
	.issue > p:first-child,
	.amendment > p:first-child,
	.correction > p:first-child,
	.addition > p:first-child {
		margin-top: 0;
	}
	blockquote > :last-child,
	.note  > p:last-child,
	.issue > p:last-child,
	.amendment > p:last-child,
	.correction > p:last-child,
	.addition > p:last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker,
	.amendment::before, .amendment > .marker,
	details.amendment > summary > .marker,
	.addition::before, .addition > .marker,
	addition.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	correction.amendment > summary > .marker
	{
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	  or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	  or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	  or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Amendment Box *************************************************************/

	.amendment, .correction, .addition {
		border-color: #330099;
		border-color: var(--amendment-border);
		background: #F5F0FF;
		background: var(--amendment-bg);
		color: black;
		color: var(--amendment-text);
	}
	.amendment.proposed, .correction.proposed, .addition.proposed {
		border-style: solid;
		border-block-width: 0.25em;
	}
	.amendment::before, .amendment > .marker,
	details.amendment > summary::before, details.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	details.correction > summary::before, details.correction > summary > .marker,
	.addition::before, .addition > .marker,
	details.addition > summary::before, details.addition > summary > .marker {
		color: #220066;
		color: var(--amendmentheading-text);
	}
	.amendment.proposed::before, .amendment.proposed > .marker,
	details.amendment.proposed > summary::before, details.amendment.proposed > summary > .marker,
	.correction.proposed::before, .correction.proposed > .marker,
	details.correction.proposed > summary::before, details.correction.proposed > summary > .marker,
	.addition.proposed::before, .addition.proposed > .marker,
	details.addition.proposed > summary::before, details.addition.proposed > summary > .marker {
		font-weight: bold;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 2em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		<table class="data"> highlights structural relationships in a table
		when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		Use class="complex data" for particularly complicated tables --
		(This will draw more lines: busier, but clearer.)

		Use class="long" on table cells with paragraph-like contents
		(This will adjust text alignment accordingly.)
		Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding: 0.1rem 1px 0;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Switch to using border-bottom for underlines */
		text-decoration: none;
		border-bottom: 1px solid;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:focus,
	.toc a:hover {
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
	}
	.toc {
		line-height: 1.1em;
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li			{ font-weight: bold;   }
	.toc > li li		 { font-weight: normal; }
	.toc > li li li	  { font-size:   95%;	}
	.toc > li li li li	{ font-size:   90%;	}
	.toc > li li li li li { font-size:   85%;	}

	/* @supports not (display:grid) { */
		.toc > li			{ margin: 1.5rem 0;	}
		.toc > li li		 { margin: 0.3rem 0;	}
		.toc > li li li	  { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}
		.toc > li li li li .secno { font-size: 85%; }
		.toc > li li li li li .secno { font-size: 100%; }

		.toc li {
			clear: both;
		}

		:not(li) > .toc			 { margin-left:  5rem; }
		.toc .secno				 { margin-left: -5rem; }
		.toc > li li li .secno	  { margin-left: -7rem; }
		.toc > li li li li .secno	{ margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc			 { margin-left:  4rem; }
			.toc .secno				 { margin-left: -4rem; }
			.toc > li li li			 { margin-left:  1rem; }
			.toc > li li li .secno	  { margin-left: -5rem; }
			.toc > li li li li .secno	{ margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc			 { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno				 { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li			 { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno	  { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno	{ margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			  comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
			border-bottom: 3px solid transparent;
			margin-bottom: -3px;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom-color: #054572;
			border-bottom-color: var(--toclink-underline);
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index	  { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li	{ margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em; }
	ul.index dl	{ margin-top: 0; }
	ul.index dt	{ margin: .2em 0 .2em 20px;}
	ul.index dd	{ margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li a + span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/** Outdated warning **********************************************************/

.outdated-spec {
	color: black;
	color: var(--outdatedspec-text);
	background-color: rgba(0,0,0,0.5);
	background-color: var(--outdatedspec-bg);
}

.outdated-warning {
	position: fixed;
	bottom: 50%;
	left: 0;
	right: 0;
	margin: 0 auto;
	width: 50%;
	background: maroon;
	background: var(--outdated-bg);
	color: white;
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	position: absolute;
	top: 0;
	right:0;
	margin: 0;
	border: 0;
	padding: 0.25em 0.5em;
	background: transparent;
	color: white;
	color: var(--outdated-text);
	font:1em sans-serif;
	text-align:center;
}

.outdated-warning span {
	display: block;
}

.outdated-collapsed {
	bottom: 0;
	border-radius: 0;
	width: 100%;
	padding: 0;
}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}

		.outdated-warning {
			position: absolute;
			border-style: solid;
			border-color: red;
		}

		.outdated-warning input {
			display: none;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good item positioning:
		  "content column" is 50ems wide at max; less on smaller screens.
		  Extra space (after ToC + content) is empty on the right.

		  1. When item < content column, centers item in column.
		  2. When content < item < available, left-aligns.
		  3. When item > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			* http://lea.verou.me/2012/04/background-attachment-local/
			*
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
						top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
						top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
<style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      vertical-align: top;
    }
    th, td {
      border-left: none;
      border-right: none;
      padding: 0px 10px;
    }
    th {
      text-align: center;
    }
  </style>
  <meta content="Bikeshed version c3a8ac783, updated Wed Jul 24 12:20:06 2024 -0700" name="generator">
  <link href="https://thephd.dev/_vendor/future_cxx/papers/C%20-%20Thread%20Attributes%20-%20Implementation%20Extensible%20and%20ABI-Resistant.html" rel="canonical">
  <link href="https://isocpp.org/favicon.ico" rel="icon">
  <meta content="cedd7f978e02015b413c3c267add6e8528a85591" name="revision">
  <meta content="dark light" name="color-scheme">
<style>
:root {
	/* Default (light) theme */
	--foreground-point: rgb(0,0,0);
	--background-point: rgb(255,255,255);

	--ins-text-color: rgb(0, 182, 15);
	--diff-ins-text-color: rgb(0, 176, 189);
	--del-text-color: rgb(255, 58, 58);
	--diff-del-text-color: rgb(139, 0, 194);
}

/* dark theme */
@media (prefers-color-scheme: dark) {
	:root {
		--foreground-point: rgb(255,255,255);
		--background-point: rgb(0,0,0);

		--ins-text-color: rgb(48, 255, 48);
		--diff-ins-text-color: rgb(91, 250, 255);
		--del-text-color: rgb(255, 52, 52);
		--diff-del-text-color: rgb(244, 129, 255);
	}
}

:root {
	--ins-text-background-color: color-mix(in srgb, var(--ins-text-color) 5%, var(--background-point));
	--ins-code-background-color: color-mix(in srgb, var(--ins-text-color) 15%, var(--background-point));
	--ins-text-decoration-color: color-mix(in srgb, var(--ins-text-color) 10%, var(--foreground-point));
	--ins-text-border-color: color-mix(in srgb, var(--ins-text-color) 50%, var(--foreground-point));
	--diff-ins-text-background-color: color-mix(in srgb, var(--diff-ins-text-color) 5%, var(--background-point));
	--diff-ins-code-background-color: color-mix(in srgb, var(--diff-ins-text-color) 15%, var(--background-point));
	--diff-ins-text-decoration-color: color-mix(in srgb, var(--diff-ins-text-color) 10%, var(--foreground-point));

	--del-text-background-color: color-mix(in srgb, var(--del-text-color) 5%, var(--background-point));
	--del-code-background-color: color-mix(in srgb, var(--del-text-color) 15%, var(--background-point));
	--del-text-decoration-color: color-mix(in srgb, var(--del-text-color) 10%, var(--foreground-point));
	--diff-del-text-background-color: color-mix(in srgb, var(--diff-del-text-color) 5%, var(--background-point));
	--diff-del-code-background-color: color-mix(in srgb, var(--diff-del-text-color) 15%, var(--background-point));
	--diff-del-text-decoration-color: color-mix(in srgb, var(--diff-del-text-color) 10%, var(--foreground-point));
}

@media print {
	.pagebreak { break-after: always }
}

ins .wording-section .highlight:not(.idl) { background: var(--ins-code-background-color); }
diff-ins .wording-section .highlight:not(.idl) { background: var(--diff-ins-code-background-color); }
del .wording-section .highlight:not(.idl) { background: var(--del-code-background-color); }
diff-del .wording-section .highlight:not(.idl) { background: var(--diff-del-code-background-color); }


.tg  {
	border-collapse: collapse;
	border-spacing:0;
}

.tg td{
	padding:10px 10px;
	border-style: solid;
	border-width:1px;
	overflow: hidden;
	word-break: normal;
	border-color: var(--table-border-color, unset);
}
.tg th{
	font-weight: normal;
	padding: 10px 10px;
	border-style: solid;
	border-width: 1px;
	overflow: hidden;
	word-break: normal;
	border-color: black;
}
.tg .tg-c3ow { 
	border-color: unset;
	text-align: center;
	vertical-align: top
}

.quote-ins, quote-ins, quote-ins p, quote-ins div, span.quote-ins, span.quote-ins * {
	border-color: var(--ins-text-border-color);
}

.ins, ins, ins p, ins div, span.ins, span.ins * {
	background-color: var(--ins-text-background-color);
	background: var(--ins-text-background-color);
	color: var(--ins-text-color);
	text-decoration: underline;
	text-decoration-color: var(--ins-text-decoration-color);
	border-color: var(--ins-text-decoration-color);
}

.diff-ins, diff-ins, diff-ins p, diff-ins div, span.diff-ins, span.diff-ins * {
	background-color: var(--diff-ins-text-background-color);
	background: var(--diff-ins-text-background-color);
	color: var(--diff-ins-text-color);
	text-decoration: underline double;
	text-decoration-color: var(--diff-ins-text-decoration-color);
}

.del, del, del p, del div, span.del, span.del * {
	background-color: var(--del-text-background-color);
	background: var(--del-text-background-color);
	color: var(--del-text-color);
	text-decoration: line-through;
	text-decoration-color: var(--del-text-decoration-color);
}

.diff-del, diff-del, diff-del p, diff-del div, span.diff-del, span.diff-del * {
	background-color: var(--diff-del-text-background-color);
	background: var(--diff-del-text-background-color);
	color: var(--diff-del-text-color);
	text-decoration: line-through double;
	text-decoration-color: var(--diff-del-text-decoration-color);
}

code.c-kw {
	font-weight: bold;
}

math, span.math {
	font-family: serif;
	font-style: italic;
}

ul {
	list-style-type: "— ";
}

.wording-clause {
	counter-reset: wording-paragraph;
}

.wording-clause-header {
	font-size: 115%;
	display: block;
	padding-bottom: 1em;
	clear: both;
}

.wording-clause-number {
	font-weight: bold;
}

.wording-clause-title {
	font-weight: bold;
	margin: 2em;
}

.wording-clause-stable-tag {
	float: right;
}

.wording-clause-section-title {
	font-size: 105%;
	font-weight: bold;
}

.clause-stable-tag {
	float: right;
}

.footnote-ref {
	font-size: 75%;
	vertical-align: super;
}

.footnote {
	font-size: 75%;
	vertical-align: bottom;
}

table.invis, table.printf-specifiers {
	padding: 15px;
	border: 0px;
	tr {
		border: 0px;
	}
	th {
		width: 13%;
		border: 0px;
	}
	th ~ th {
		width:initial;
		border: 0px;
	}
	td {
		border: 0px;
	}
}

div.wording-section {
	counter-reset: wording-paragraph;
}

div.wording-numbered, div.wording-newnumbered {
	margin-left: 2.5em;
	margin-top: 1em;
	margin-bottom: 1em;
}

div.wording-numbered:before, div.wording-newnumbered:before {
	position: absolute;
	margin-left: -2.5em;
	display: block;
}

div.wording-numbered:before {
	content: counter(wording-paragraph);
	counter-increment: wording-paragraph;
	font-size: smaller;
}

div.wording-newnumbered:before {
	content: counter(wording-paragraph)"✨";
	counter-increment: wording-paragraph;
	font-size: smaller;
}

div.wording-numbered-list ul, div.wording-newnumbered ul {
	counter-reset: wording-list-item;
}

div.wording-numbered-list li, div.wording-newnumbered li {
	margin-left: 4em;
}

div.wording-numbered-list li:before, div.wording-newnumbered li:before {
	position: absolute;
	margin-left: -4em;
	display: block;
}

div.wording-numbered-list li:before {
	font-size: smaller;
	content: "(" counter(wording-paragraph) "." counter(wording-list-item) ")";
	counter-increment: wording-list-item;
}

div.wording-newnumbered-list li:before {
	content: "(✨" counter(wording-paragraph) "." counter(wording-list-item) ")";
	counter-increment: wording-list-item;
}

div.wording-numbered-0 {
	counter-reset: wording-paragraph -1;
}

div.wording-numbered-1 {
	counter-reset: wording-paragraph 0;
}

div.wording-numbered-2 {
	counter-reset: wording-paragraph 1;
}

div.wording-numbered-3 {
	counter-reset: wording-paragraph 2;
}

div.wording-numbered-4 {
	counter-reset: wording-paragraph 3;
}

div.wording-numbered-5 {
	counter-reset: wording-paragraph 4;
}

div.wording-numbered-6 {
	counter-reset: wording-paragraph 5;
}

div.wording-numbered-7 {
	counter-reset: wording-paragraph 6;
}

div.wording-numbered-8 {
	counter-reset: wording-paragraph 7;
}

div.wording-numbered-9 {
	counter-reset: wording-paragraph 8;
}

div.wording-numbered-10 {
	counter-reset: wording-paragraph 9;
}

div.wording-numbered-11 {
	counter-reset: wording-paragraph 10;
}

div.wording-numbered-12 {
	counter-reset: wording-paragraph 11;
}

div.wording-numbered-13 {
	counter-reset: wording-paragraph 12;
}

div.wording-numbered-14 {
	counter-reset: wording-paragraph 13;
}

div.wording-numbered-15 {
	counter-reset: wording-paragraph 14;
}

div.wording-numbered-16 {
	counter-reset: wording-paragraph 15;
}

div.wording-numbered-17 {
	counter-reset: wording-paragraph 16;
}

div.wording-numbered-18 {
	counter-reset: wording-paragraph 17;
}

div.wording-numbered-19 {
	counter-reset: wording-paragraph 18;
}

div.wording-numbered-20 {
	counter-reset: wording-paragraph 19;
}

div.wording-numbered-21 {
	counter-reset: wording-paragraph 20;
}

div.wording-numbered-22 {
	counter-reset: wording-paragraph 21;
}

div.wording-numbered-23 {
	counter-reset: wording-paragraph 22;
}

div.wording-numbered-24 {
	counter-reset: wording-paragraph 23;
}

div.wording-numbered-25 {
	counter-reset: wording-paragraph 24;
}

div.wording-numbered-25 {
	counter-reset: wording-paragraph 24;
}

div.wording-numbered-25 {
	counter-reset: wording-paragraph 24;
}

div.wording-numbered-25 {
	counter-reset: wording-paragraph 24;
}

div.wording-numbered-30 {
	counter-reset: wording-paragraph 29;
}

div.wording-numbered-31 {
	counter-reset: wording-paragraph 30;
}

div.wording-numbered-32 {
	counter-reset: wording-paragraph 31;
}

div.wording-numbered-33 {
	counter-reset: wording-paragraph 32;
}

div.wording-numbered-34 {
	counter-reset: wording-paragraph 33;
}

div.wording-numbered-35 {
	counter-reset: wording-paragraph 34;
}

div.wording-numbered-36 {
	counter-reset: wording-paragraph 35;
}

div.wording-numbered-37 {
	counter-reset: wording-paragraph 36;
}

div.wording-numbered-38 {
	counter-reset: wording-paragraph 37;
}

div.wording-numbered-39 {
	counter-reset: wording-paragraph 38;
}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">N3554<br>Thread Attributes - Implementation Extensible and ABI-Resistant</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">Draft Proposal, <time class="dt-updated" datetime="2025-05-27">2025-05-27</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Previous Revisions:
     <dd>None
     <dt class="editor">Authors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:phdofthehouse@gmail.com">JeanHeyd Meneide</a>
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:shepherd@soasis.org">Shepherd (Shepherd's Oasis LLC)</a>
     <dt>Paper Source:
     <dd><a href="https://thephd.dev/_vendor/future_cxx/papers/C%20-%20Thread%20Attributes%20-%20Implementation%20Extensible%20and%20ABI-Resistant.bs">GitHub</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/ThePhD/future_cxx/issues">GitHub</a>
     <dt>Project:
     <dd>ISO/IEC 9899 Programming Languages — C, ISO/IEC JTC1/SC22/WG14
     <dt>Proposal Category:
     <dd>Change Request, Feature Request
     <dt>Target:
     <dd>C2y
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  </div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#changelog"><span class="secno">1</span> <span class="content">Revision History</span></a>
     <ol class="toc">
      <li><a href="#changelog-r1"><span class="secno">1.1</span> <span class="content">Revision 1 - June 24<sup>th</sup>, 2025</span></a>
      <li><a href="#changelog-r0"><span class="secno">1.2</span> <span class="content">Revision 0 - May 27<sup>th</sup>, 2025</span></a>
     </ol>
    <li><a href="#motivation"><span class="secno">2</span> <span class="content">Introduction &amp; Motivation</span></a>
    <li>
     <a href="#design"><span class="secno">3</span> <span class="content">Design</span></a>
     <ol class="toc">
      <li><a href="#design-attr_kind"><span class="secno">3.1</span> <span class="content">Thread Attribute Kind &amp; ABI-Resistance</span></a>
      <li>
       <a href="#design-attrs"><span class="secno">3.2</span> <span class="content">Thread Attributes</span></a>
       <ol class="toc">
        <li><a href="#design-attrs-thrd_attr_stack_size"><span class="secno">3.2.1</span> <span class="content"><code class="highlight"><c- n>thrd_attr_stack_size</c-></code></span></a>
        <li><a href="#design-attrs-thrd_attr_detached"><span class="secno">3.2.2</span> <span class="content"><code class="highlight"><c- n>thrd_attr_detached</c-></code></span></a>
        <li><a href="#design-attrs-thrd_attr_name"><span class="secno">3.2.3</span> <span class="content"><code class="highlight"><c- n>thrd_attr_</c-><c- p>{</c-><c- n>mwc</c-><c- o>/</c-><c- n>mc</c-><c- o>/</c-><c- n>c</c-><c- p>(</c-><c- mi>8</c-><c- o>|</c-><c- mi>16</c-><c- o>|</c-><c- mi>32</c-><c- o>|</c-><c- n>native</c-><c- p>)</c-><c- n>name</c-><c- p>}</c-></code></span></a>
       </ol>
      <li><a href="#design-get"><span class="secno">3.3</span> <span class="content">"Where is the <code class="highlight"><c- n>get</c-></code>-style API?"</span></a>
      <li><a href="#design-errors"><span class="secno">3.4</span> <span class="content">"How does this API handle errors?"</span></a>
      <li><a href="#design-others"><span class="secno">3.5</span> <span class="content">Other Designs?</span></a>
     </ol>
    <li><a href="#implementation"><span class="secno">4</span> <span class="content">Implementation Experience</span></a>
    <li>
     <a href="#wording"><span class="secno">5</span> <span class="content">Wording</span></a>
     <ol class="toc">
      <li><a href="#wording-7.29.1"><span class="secno">5.1</span> <span class="content">Modify §7.29.1 "Introduction" to add the new structures and an enumeration</span></a>
      <li><a href="#wording-7.29.2✨"><span class="secno">5.2</span> <span class="content">Add a new section §7.29.2✨ "Thread attributes" to make it rely on wording moved to other function</span></a>
      <li><a href="#wording-7.29.5.1"><span class="secno">5.3</span> <span class="content">Modify §7.29.5.1 "The <code class="highlight"><c- n>thrd_create</c-></code> function" to make it rely on wording moved to other function</span></a>
      <li><a href="#wording-7.29.5.2✨"><span class="secno">5.4</span> <span class="content">Add a new sub-clause "§7.29.5.2✨ The <code class="highlight"><c- n>thrd_create_attrs</c-></code> function" after "The <code class="highlight"><c- n>thrd_create</c-></code> function"</span></a>
      <li><a href="#wording-7.29.5.3✨"><span class="secno">5.5</span> <span class="content">Add a new sub-clause "§7.29.5.3✨ The <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> function" after "The <code class="highlight"><c- n>thrd_create_attrs</c-></code> function"</span></a>
      <li><a href="#wording-7.35.20"><span class="secno">5.6</span> <span class="content">Modify "§7.35.20 Threads" of "Future library directions"</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <div class="pagebreak"></div>
   <h2 class="heading settled" data-level="1" id="changelog"><span class="secno">1. </span><span class="content">Revision History</span><a class="self-link" href="#changelog"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="changelog-r1"><span class="secno">1.1. </span><span class="content">Revision 1 - June 24<sup>th</sup>, 2025</span><a class="self-link" href="#changelog-r1"></a></h3>
   <ul>
    <li data-md>
     <p>Wording fixes (thanks, Joseph Myers).</p>
     <ul>
      <li data-md>
       <p>For <code class="highlight"><c- n>thrd_attr_func_t</c-></code>, it should be described as a "function type" and not a "function pointer type".</p>
      <li data-md>
       <p>Turn "complete object of structure type" into "complete structure type"; object is not right in that wording and doesn’t make any sense.</p>
     </ul>
   </ul>
   <h3 class="heading settled" data-level="1.2" id="changelog-r0"><span class="secno">1.2. </span><span class="content">Revision 0 - May 27<sup>th</sup>, 2025</span><a class="self-link" href="#changelog-r0"></a></h3>
   <ul>
    <li data-md>
     <p>Initial release. ✨</p>
   </ul>
   <h2 class="heading settled" data-level="2" id="motivation"><span class="secno">2. </span><span class="content">Introduction &amp; Motivation</span><a class="self-link" href="#motivation"></a></h2>
   <p>It is impossible to set the name, stack size, stack address + size, (scheduler) priority, processor affinity, and more of a thread in standard C or C++, despite this being both widely available and critical necessities in C and C++ programs. After Bruce Dawson pinged a few C++ standards committee members in circa 2019/2020 asking about thread names, C++ -- particularly, Corentin Jabot -- embarked on an adventure to provide such attributes to their version of C11’s threads, <code class="highlight"><c- n>std</c-><c- o>::</c-><c- kr>thread</c-></code>. The effort was marred by platform incompatibilities, specific wording nits, and -- most glaringly -- ABI issues and API wars, resulting in no less than three (3) papers:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-p2019" title="P2019 - Thread Attributes">P2019 - https://wg21.link/p2019</a></p>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-p3022" title="P3022 - A Boring Thread Attributes Interface">P3022 - https://wg21.link/p3022</a></p>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-p3072" title="P3072 - Hassle-free Thread Attributes">P3072 - https://wg21.link/p3072</a></p>
   </ul>
   <p>They take many approaches to the problem, trying to offer a varying level of ease of use alongside high type safety. The most mature of the papers -- P2019 -- has reached its eighth revision after first being published on March 2nd, 2020 and has not seen success. In that time:</p>
   <ul>
    <li data-md>
     <p>Programming Languages and their standard libraries such as Swift, Java, C#, Haskell, C#, Rust, D, Perl, and many other languages either already supported or support using threads with an explicit stack size parameter and names;</p>
    <li data-md>
     <p>For C and C++, augmentation/replacement standard libraries like Qt, Boost, POCO, Chromium, Bloomberg Basic Development Environment, Intel TBB, Folly, TensorFlow, KallistaOS (Dreamcast OS), tinycthread, and many replace C++11 and C11 threads with their own abstraction in order to do threading.</p>
   </ul>
   <p>Importantly, in the case of C11 and C++11 threads, many of them need to rewrite the entire set of thread primitives because of (a) poor support for <code class="highlight"><c- o>&lt;</c-><c- n>threads</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> until very recently (as of writing: only Apple does not support C11 <code class="highlight"><c- o>&lt;</c-><c- n>threads</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code>; MSVC runtime, OpenBSD, FreeBSD, NetBSD, glibc, musl-libc, Bionic (Android), and more all support <code class="highlight"><c- o>&lt;</c-><c- n>threads</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code>); and, (b) many platforms do not support changing stack sizes, names, and more after thread creation. Therefore, an API cannot simply add <code class="highlight"><c- n>set_threadname</c-></code> or <code class="highlight"><c- n>get_threadname</c-></code>, or similar stack size parameters, with a thread handle parameter as shown by the POSIX Threads implementations. In fact, many implementations have wildly different getting and setting properties and most -- including Windows Threads -- mostly require you to set that information on thread creation, not after-the-fact. A table -- <a data-link-type="biblio" href="#biblio-p2019" title="P2019 - Thread Attributes">from P2019</a> -- is reproduced here:</p>
   <table>
    <thead>
     <tr>
      <th>Platform
      <th>At Creation
      <th>After
      <th>Query
    <tbody>
     <tr>
      <td>Linux
      <td>
      <td><code class="highlight"><c- n>pthread_setname_np</c-></code><sup>0</sup>
      <td><code class="highlight"><c- n>pthread_getname_np</c-></code>
     <tr>
      <td>QNX
      <td>
      <td><code class="highlight"><c- n>pthread_setname_np</c-></code>
      <td><code class="highlight"><c- n>pthread_getname_np</c-></code>
     <tr>
      <td>NetBSD
      <td>
      <td><code class="highlight"><c- n>pthread_setname_np</c-></code>
      <td><code class="highlight"><c- n>pthread_getname_np</c-></code>
     <tr>
      <td>Win32
      <td>
      <td><code class="highlight"><c- n>SetThreadDescription</c-></code><sup>1</sup>
      <td><code class="highlight"><c- n>GetThreadDescription</c-></code><sup>1</sup>
     <tr>
      <td>Darwin
      <td>
      <td><code class="highlight"><c- n>pthread_setname_np</c-></code><sup>2</sup>
      <td><code class="highlight"><c- n>pthread_getname_np</c-></code>
     <tr>
      <td>Fuchsia
      <td><code class="highlight"><c- n>zx_thread_create</c-></code>
      <td>
      <td>
     <tr>
      <td>Android
      <td><code class="highlight"><c- n>JavaVMAttachArgs</c-></code><sup>3</sup>
      <td>
      <td>
     <tr>
      <td>FreeBSD
      <td>
      <td><code class="highlight"><c- n>pthread_setname_np</c-></code>
      <td>
     <tr>
      <td>OpenBSD
      <td>
      <td><code class="highlight"><c- n>pthread_setname_np</c-></code>
      <td>
     <tr>
      <td>RTEMS <sup>4</sup>
      <td>
      <td><code class="highlight"><c- n>pthread_setname_np</c-></code>
      <td><code class="highlight"><c- n>pthread_getname_np</c-></code>
     <tr>
      <td>FreeRTOS
      <td><code class="highlight"><c- n>xTaskCreate</c-></code>
      <td>
      <td><code class="highlight"><c- n>pcTaskGetName</c-></code>
     <tr>
      <td>VxWorks
      <td><code class="highlight"><c- n>taskSpawn</c-></code>
      <td>
      <td>
     <tr>
      <td>eCos
      <td><code class="highlight"><c- n>cyg_thread_create</c-></code>
      <td>
      <td>
     <tr>
      <td>Plan 9
      <td><code class="highlight"><c- n>threadsetname</c-></code><sup>5</sup>
      <td><code class="highlight"><c- n>threadsetname</c-></code><sup>5</sup>
      <td>
     <tr>
      <td>Haiku
      <td><code class="highlight"><c- n>spawn_thread</c-></code>
      <td><code class="highlight"><c- n>rename_thread</c-></code>
      <td><code class="highlight"><c- n>get_thread_info</c-></code>
     <tr>
      <td>Keil RTX
      <td><code class="highlight"><c- n>osThreadNew</c-></code>
      <td>
      <td><code class="highlight"><c- n>osThreadGetName</c-></code>
     <tr>
      <td>WebAssembly
      <td>
      <td>
      <td>
   </table>
   <p><br></p>
   <div style="font-size: small"> <sup>0</sup> - GLIBC 2.12+, MUSL<br> <sup>1</sup> - Since Windows 10 1607 - In older versions, a name can be set only when a debugger is attached, by throwing an exception from the calling thread. See [https://stackoverflow.com/a/59490438/877556](Windows Documentation) and <a href="https://randomascii.wordpress.com/2015/10/26/thread-naming-in-windows-time-for-something-better/">this article by Bruce Dawson</a>.<br> <sup>2</sup> - Can only be called from the new thread.<br> <sup>3</sup> - See <a href="https://stackoverflow.com/a/59490438/877556">https://stackoverflow.com/a/59490438/877556</a>.<br> <sup>4</sup> - Since 2017.<br> <sup>5</sup> - Can only be called from the new thread.<br> </div>
   <p>Similarly, a lot of APIs suffer from ABI issues; <code class="highlight"><c- n>pthread_attr_t</c-></code> is meant to be ABI-resistant and an opaque type, but implementation still have to contend with issues improving or widening the amount of information it can store without breaking things. C++ <code class="highlight"><c- n>std</c-><c- o>::</c-><c- kr>thread</c-></code>’s and P2019, in its attempts to be ABI-resistant, have met a ton of pushback from all kinds of people trying to simplify or reduce the API space and avoid the templated constructors, desperate for a simpler interface and -- in some cases -- ignoring ABI issues with structures similar in purpose to <code class="highlight"><c- n>pthread_attr_t</c-></code>. This has been a consistent theme even among early papers that simply just tried to standardize existing practice without addressing their deficiencies, such as C++'s even earlier papers <a data-link-type="biblio" href="#biblio-p0320" title="Thread Constructor Attributes">[P0320]</a> and <a data-link-type="biblio" href="#biblio-n2178" title="Proposed Text for Chapter 30, Thread Support Library [threads]">[N2178]</a>.</p>
   <p>For C11 threads, these same concerns were voiced during the 2019 Ithaca discussion of Kamil Ryatorwski’s paper <a data-link-type="biblio" href="#biblio-n2419" title="N2419 -">[N2419]</a>.</p>
   <p>It is clear that this area has strong vendor concerns around extensibility, and even strong constraints around the ability to do this both before thread startup and during thread running.</p>
   <p>This paper provides an ABI that is standards-expandable, vendor-extensible, and resistant to Application Binary Interface (ABI) lock-in. It allows vendors to provide more direct ways to adding parameters without compromising current implementations and their structures.</p>
   <h2 class="heading settled" data-level="3" id="design"><span class="secno">3. </span><span class="content">Design</span><a class="self-link" href="#design"></a></h2>
   <p>The design is based off an existing API that has proved successful in not replacing but <em>supplementing</em> existing implementations without causing undue burden or breaking the ABIs of existing interfaces. It has been shown to:</p>
   <ul>
    <li data-md>
     <p>set name (in UTF-8/16/32, Execution, Wide Execution, and "direct" forms);</p>
    <li data-md>
     <p>set detached state (to have a thread start in a detached state, (critical for MSVC));</p>
    <li data-md>
     <p>set the stack size (taken as a parameter during startup for MSVC and for POSIX threads);</p>
    <li data-md>
     <p>and, set the stack buffer (a pointer plus size, usable for POSIX threads but not necessarily for MSVC itself).</p>
   </ul>
   <p>The API relies on 2 core language features to work:</p>
   <ul>
    <li data-md>
     <p>the pointer to the first member of a structure is identical to the pointer of the structure itself;</p>
    <li data-md>
     <p>and, casting from that first member to a pointer based on the value of that first member is well-defined behavior.</p>
   </ul>
   <p>In particular, there is a <code class="highlight"><c- n>thrd_attr_kind</c-></code> enumeration type that is the first member of a structure. It is a tag that tells the implementation what to cast a pointer of that type to, in order to interpret the full structure. It is also the first member of every thread attribute structure, which means it has the same address as the structure itself. This allows an array of <code class="highlight"><c- n>thrd_attr_kind</c-></code> pointers to be passed to <code class="highlight"><c- n>thrd_create_attrs</c-></code> that can be used as a standard and well-defined type-punning point and a sort of "tag" to determine which structure to cast to internally. The full enumeration and API looks as such:</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;threads.h>
<c- cp>#include</c-> &lt;stdint.h>

<c- k>typedef</c-> <c- k>enum</c-> <c- nc>thrd_attr_kind</c-> <c- o>:</c-> <c- b>int_least32_t</c-> <c- p>{</c->
  <c- n>thrd_attr_kind_native_name</c-><c- p>,</c->
  <c- n>thrd_attr_kind_native_name_sized</c-><c- p>,</c->
  <c- n>thrd_attr_kind_mcname</c-><c- p>,</c->
  <c- n>thrd_attr_kind_mcname_sized</c-><c- p>,</c->
  <c- n>thrd_attr_kind_mwcname</c-><c- p>,</c->
  <c- n>thrd_attr_kind_mwcname_sized</c-><c- p>,</c->
  <c- n>thrd_attr_kind_c8name</c-><c- p>,</c->
  <c- n>thrd_attr_kind_c8name_sized</c-><c- p>,</c->
  <c- n>thrd_attr_kind_c16name</c-><c- p>,</c->
  <c- n>thrd_attr_kind_c16name_sized</c-><c- p>,</c->
  <c- n>thrd_attr_kind_c32name</c-><c- p>,</c->
  <c- n>thrd_attr_kind_c32name_sized</c-><c- p>,</c->
  <c- n>thrd_attr_kind_stack_size</c-><c- p>,</c->
  <c- n>thrd_attr_kind_detached</c-><c- p>,</c->

  <c- n>thrd_attr_kind_implementation_defined</c-> <c- o>=</c-> <c- mh>0xFFFF</c-><c- p>,</c->
<c- p>}</c-> <c- n>thrd_attr_kind</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_native_name</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- b>void</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_native_name</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_native_name_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- b>void</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_native_name_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_mcname</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- b>char</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_mcname</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_mcname_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- b>char</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_mcname_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_mwcname</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- b>wchar_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_mwcname</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_mwcname_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- b>wchar_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_mwcname_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c8name</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- b>char8_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c8name</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c8name_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- b>char8_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c8name_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c16name</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- b>char16_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c16name</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c16name_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- b>char16_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c16name_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c32name</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- b>char32_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c32name</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c32name_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- b>char32_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c32name_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_stack_size</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_stack_size</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_detached</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>bool</c-> <c- n>detached</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_detached</c-><c- p>;</c->

<c- k>typedef</c-> <c- b>int</c-><c- p>(</c-><c- n>thrd_attr_err_func_t</c-><c- p>)(</c-><c- k>const</c-> <c- n>thrd_attr_kind</c-><c- p>[</c-><c- k>static</c-> <c- mi>1</c-><c- p>],</c-> <c- b>int</c-> <c- n>err</c-><c- p>,</c-> <c- b>void</c-><c- o>*</c-> <c- n>err_func_arg</c-><c- p>);</c->

<c- b>int</c-> <c- nf>thrd_create_attrs</c-><c- p>(</c-><c- n>thrd_start_func</c-> <c- n>func</c-><c- p>,</c-> <c- b>void</c-><c- o>*</c-> <c- n>arg</c-><c- p>,</c->
  <c- b>size_t</c-> <c- n>n</c-><c- p>,</c-> <c- k>const</c-> <c- n>thrd_attr_kind</c-> <c- o>*</c-><c- n>attrs</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>]);</c->

<c- b>int</c-> <c- nf>thrd_create_attrs_err</c-><c- p>(</c-><c- n>thrd_start_func</c-> <c- n>func</c-><c- p>,</c-> <c- b>void</c-><c- o>*</c-> <c- n>arg</c-><c- p>,</c->
  <c- b>size_t</c-> <c- n>n</c-><c- p>,</c-> <c- k>const</c-> <c- n>thrd_attr_kind</c-> <c- o>*</c-><c- n>attrs</c-><c- p>[</c-><c- k>static</c-> <c- n>n</c-><c- p>],</c->
  <c- n>thrd_attr_err_func_t</c-><c- o>*</c-> <c- n>err_func</c-><c- p>,</c-> <c- b>void</c-><c- o>*</c-> <c- n>err_func_arg</c-><c- p>);</c->
</pre>
   <h3 class="heading settled" data-level="3.1" id="design-attr_kind"><span class="secno">3.1. </span><span class="content">Thread Attribute Kind &amp; ABI-Resistance</span><a class="self-link" href="#design-attr_kind"></a></h3>
   <p>The thread attribute kind enumeration has 65,536 reserved values [0, 65’535] for the standard, and 2,147,418,112 reserved values [65’636, 2’147’483’647] for implementation-defined attributes. An implementation can add more attributes to cover more cases and information that the standard could not conceivably provide a unified interface for, such as:</p>
   <ul>
    <li data-md>
     <p>stack address + stack size (POSIX Threads);</p>
    <li data-md>
     <p>starting "Suspended" (Win32 Threads);</p>
    <li data-md>
     <p>setting implementation-specific processor/core affinity (Win32 and POSIX Threads);</p>
    <li data-md>
     <p>setting implementation-specific scheduler or thread priority (many different values for POSIX, fixed set of enumeration values for Win32);</p>
    <li data-md>
     <p>setting commit vs. reserved stack size values (Win32 Threads);</p>
   </ul>
   <p>and so much more. 65 thousand values for the standard more than covers the set of interfaces WG14 could possibly manage to standardize (one per standard structure), and 2.1 billion values (one per implementation-defined structure) gives implementations plenty of room to play around and not conflict with each other (hopefully they are nice and send each other e-mails so avoid potential conflicts, as they should in this day and age).</p>
   <p>This design is also ABI-resistant. If structures need to change, rather than trying to change them in-line and suffering from a problem of adding members or otherwise disturbing how reads and writes of such structures will be treated, a new one can be added seamlessly and without pain both on the standard side and the implementation side.</p>
   <p>Each enumeration is given a fixed value to prevent ABI disagreements for serialization purposes between platforms. The values themselves do not matter, and so any of them can be adjusted. The enumeration should fit a 32-bit signed integer, and so platforms with a 16 bit integer may need to use implementation-specific tricks or rely on C23’s enumeration specification abilities.</p>
   <h3 class="heading settled" data-level="3.2" id="design-attrs"><span class="secno">3.2. </span><span class="content">Thread Attributes</span><a class="self-link" href="#design-attrs"></a></h3>
   <p>Thread attributes are structures paired with one of the enumeration names that represent a specific kind of transformation to a thread. The standard will define several thread attribute structures, though the specification says that an implementation can process -- but ignore -- the desired effects of each attribute. This is mostly to allow for embedded implementations that do not care for keeping this information around, and keeps the cost of this paper to 0 for implementations that do not care.</p>
   <p>There are 14 different provided structures and 14 different enumeration constants to go with them:</p>
   <ul>
    <li data-md>
     <p><code class="highlight"><c- n>thrd_attr_stack_size</c-></code>: takes a <code class="highlight"><c- b>size_t</c-></code> and communicates the size (in bytes) of the stack.</p>
    <li data-md>
     <p><code class="highlight"><c- n>thrd_attr_detached</c-></code>: takes a <code class="highlight"><c- b>bool</c-></code> and communicates that the thread should be detached at the very start.</p>
    <li data-md>
     <p><code class="highlight"><c- n>thrd_attr_c8name</c-></code>, <code class="highlight"><c- n>thrd_attr_c8name_sized</c-></code>: takes a <code class="highlight"><c- k>const</c-> <c- n>char8_t</c-><c- o>*</c-></code> or a <code class="highlight"><c- k>const</c-> <c- n>char8_t</c-><c- o>*</c-></code> + <code class="highlight"><c- b>size_t</c-></code>, respectively. It represents a UTF-8-encoded name. The name is converted to the desired internal encoding of the thread name. Must be terminated by a null <code class="highlight"><c- n>char8_t</c-></code> value, or not contain a null <code class="highlight"><c- n>char8_t</c-></code> value within the buffer denoted by the range, respectively. The pointer may be null.</p>
    <li data-md>
     <p><code class="highlight"><c- n>thrd_attr_c16name</c-></code>, <code class="highlight"><c- n>thrd_attr_c16name_sized</c-></code>: takes a <code class="highlight"><c- k>const</c-> <c- n>char16_t</c-><c- o>*</c-></code> or a <code class="highlight"><c- k>const</c-> <c- n>char16_t</c-><c- o>*</c-></code> + <code class="highlight"><c- b>size_t</c-></code>, respectively. It represents a UTF-16-encoded name. The name is converted to the desired internal encoding of the thread name. Must be terminated by a null <code class="highlight"><c- n>char16_t</c-></code> value, or not contain a null <code class="highlight"><c- n>char16_t</c-></code> value within the buffer denoted by the range, respectively. The pointer may be null.</p>
    <li data-md>
     <p><code class="highlight"><c- n>thrd_attr_c32name</c-></code>, <code class="highlight"><c- n>thrd_attr_c32name_sized</c-></code>: takes a <code class="highlight"><c- k>const</c-> <c- n>char32_t</c-><c- o>*</c-></code> or a <code class="highlight"><c- k>const</c-> <c- n>char32_t</c-><c- o>*</c-></code> + <code class="highlight"><c- b>size_t</c-></code>, respectively. It represents a UTF-32-encoded name. The name is converted to the desired internal encoding of the thread name. Must be terminated by a null <code class="highlight"><c- n>char32_t</c-></code> value, or not contain a null <code class="highlight"><c- n>char32_t</c-></code> value within the buffer denoted by the range, respectively. The pointer may be null.</p>
    <li data-md>
     <p><code class="highlight"><c- n>thrd_attr_mcname</c-></code>, <code class="highlight"><c- n>thrd_attr_mcname_sized</c-></code>: takes a <code class="highlight"><c- k>const</c-> <c- b>char</c-><c- o>*</c-></code> or a <code class="highlight"><c- k>const</c-> <c- b>char</c-><c- o>*</c-></code> + <code class="highlight"><c- b>size_t</c-></code>, respectively. It represents an execution encoding-encoded name. The name is converted to the desired internal encoding of the thread name. Must be terminated by a null <code class="highlight"><c- b>char</c-></code> value, or not contain a null <code class="highlight"><c- b>char</c-></code> value within the buffer denoted by the range, respectively. The pointer may be null.</p>
    <li data-md>
     <p><code class="highlight"><c- n>thrd_attr_mwcname</c-></code>, <code class="highlight"><c- n>thrd_attr_mwcname_sized</c-></code>: takes a <code class="highlight"><c- k>const</c-> <c- b>wchar_t</c-><c- o>*</c-></code> or a <code class="highlight"><c- k>const</c-> <c- b>wchar_t</c-><c- o>*</c-></code> + <code class="highlight"><c- b>size_t</c-></code>, respectively. It represents a wide execution-encoded name. The name is converted to the desired internal encoding of the thread name. Must be terminated by a null <code class="highlight"><c- b>wchar_t</c-></code> value, or not contain a null <code class="highlight"><c- b>wchar_t</c-></code> value within the buffer denoted by the range, respectively. The pointer may be null.</p>
    <li data-md>
     <p><code class="highlight"><c- n>thrd_attr_native_name</c-></code>, <code class="highlight"><c- n>thrd_attr_native_name_sized</c-></code>: takes a <code class="highlight"><c- k>const</c-> <c- b>void</c-><c- o>*</c-></code> or a <code class="highlight"><c- k>const</c-> <c- b>void</c-><c- o>*</c-></code> + <code class="highlight"><c- b>size_t</c-></code>, respectively, and has its value copied directly into the thread. It’s performs no transformations or permutations on the name. The pointed-to data must not have a sequence of zero bytes of a length chosen by the implementation (typically 1 on POSIX implementations and 2 on Windows implementations). This is explicitly for sending data directly to the threading API without any conversions.</p>
   </ul>
   <h4 class="heading settled" data-level="3.2.1" id="design-attrs-thrd_attr_stack_size"><span class="secno">3.2.1. </span><span class="content"><code class="highlight"><c- n>thrd_attr_stack_size</c-></code></span><a class="self-link" href="#design-attrs-thrd_attr_stack_size"></a></h4>
   <p>This attribute is necessary because most platforms have a way to set the stack size, but sometimes can only do it at the start of the thread. Therefore, it needs to be passed in at creation time and let the implementation decide how and when to apply it. There are additional APIs for controlling the entire stack (with both a pointer and a size), but this is not as universal so a <code class="highlight"><c- n>thrd_attr_stack_storage</c-></code> attribute with both a <code class="highlight"><c- b>size_t</c-></code> and a <code class="highlight"><c- b>void</c-><c- o>*</c-></code> are not being proposed.</p>
   <p>Note that the <code class="highlight"><c- b>size_t</c-></code> passed by <code class="highlight"><c- n>thrd_attr_stack_size</c-></code> is, more or less, a suggestion: many platforms will change or round the value up to a lower limit, or make sure it is a multiple of an internal implementation size or alignment (e.g., page-aligned or 64-byte aligned). Additionally, implementations may also implement guard pages around the stack as well. Therefore, even if the implementation honors it, the final size is still entirely implementation-defined, and the specification is written to reflect this.</p>
   <h4 class="heading settled" data-level="3.2.2" id="design-attrs-thrd_attr_detached"><span class="secno">3.2.2. </span><span class="content"><code class="highlight"><c- n>thrd_attr_detached</c-></code></span><a class="self-link" href="#design-attrs-thrd_attr_detached"></a></h4>
   <p>This attribute is necessary because some platforms (e.g., Windows/MSVC) have issues with getting the proper thread control rights <em>after</em> creating the thread from a different thread in order to properly detach the thread. With this passed to the creation of the thread, a thread can be detached properly and follow POSIX semantics on creation, whereas otherwise it might not work from sinde the given <code class="highlight"><c- n>thrd_t</c-></code>, as documented by <a data-link-type="biblio" href="#biblio-msvc-threads-h" title="MSVC C11 threads.h">Visual C++ Library Maintainer Charlie Barto|</a>:</p>
   <blockquote>
    <p>A key difference between our implementation and C11 threads implementations based on pthreads is that threads can not detach themselves using <code class="highlight"><c- n>thrd_current</c-><c- p>()</c-></code> and <code class="highlight"><c- n>thrd_detach</c-><c- p>()</c-></code>. This is because of a fundamental difference in how threads work on Windows vs Unix descendants and we would require a shared datastructure that tracks thread handles to implement the typical behavior.</p>
   </blockquote>
   <p>Given this behavior, it’s better to provide this as an on-creation technique, where the original thread’s <code class="highlight"><c- n>HANDLE</c-></code> is still present and this can be invoked properly.</p>
   <h4 class="heading settled" data-level="3.2.3" id="design-attrs-thrd_attr_name"><span class="secno">3.2.3. </span><span class="content"><code class="highlight"><c- n>thrd_attr_</c-><c- p>{</c-><c- n>mwc</c-><c- o>/</c-><c- n>mc</c-><c- o>/</c-><c- n>c</c-><c- p>(</c-><c- mi>8</c-><c- o>|</c-><c- mi>16</c-><c- o>|</c-><c- mi>32</c-><c- o>|</c-><c- n>native</c-><c- p>)</c-><c- n>name</c-><c- p>}</c-></code></span><a class="self-link" href="#design-attrs-thrd_attr_name"></a></h4>
   <p>The name attributes are necessary because platforms differ <strong>wildly</strong> in how they can set the name. Some can only set the name inside of the thread after it has been started (many POSIX thread implementations); others can create a thread in suspended mode and then set all of the necessary information (Win32 Threads, IBM-styled POSIX threads).</p>
   <p>Furthermore, the actual internal storage, encoding, and more of threads varies across implementations. Win32 stores 16-bit <code class="highlight"><c- n>WCHAR</c-></code>/<code class="highlight"><c- b>wchar_t</c-></code> internally, which is more suitable to a UTF-16 or Wide Literal/Execution Encoding string on their platforms, while POSIX platforms tend to simply absorb any byte string with no encoding except that <code class="highlight">\<c- mi>0</c-></code> is not part of it. Most of these APIs rely explicitly on null termination.</p>
   <p>Thusly, to not unduly disadvantage any platform, we provide the 5 typical encodings that can be mapped to the internals of the implementation however they like. For example, POSIX platforms can take UTF-32, UTF-16, and Wide Execution encoded strings and convert them to UTF-8 or Execution encoded byte strings so that the null termination character is only a single byte and the whole name can be serialized properly. Windows can take UTF-32, UTF-8, and Execution encoded strings and convert them into 16-bit UTF-16/Wide Execution strings so that it has a proper 2-byte null terminator.</p>
   <p>Finally, for individuals who feel confident that their name will closely match the platform’s semantics, there is a plain <code class="highlight"><c- n>thrd_attr_native_name</c-></code>, which holds a <code class="highlight"><c- k>const</c-> <c- b>void</c-><c- o>*</c-></code>. This can just be copied directly into an implementation, and the consequences will be whatever happens.</p>
   <p>As a very, very important point: the strings passed in through these functions have no lifetime implications after <code class="highlight"><c- n>thrd_create_with_attrs</c-></code> returns. They can be rewritten, changed, adjusted, or freed once the <code class="highlight"><c- n>thrd_create_with_attrs</c-></code> function returns: all implementations tend to copy the names into some form of internal data anyways.</p>
   <p>If there is appetite to provide a string just via pointer where the lifetime of that string must be kept alive for the duration of the thread, additional attribute types can be created to offer that to standard users. The goal would, of course, be for implementations that do not have any internal storage to hold onto the smallest possible string VIA pointer alone and simply let the user manage both the data and the lifetime. However, we have encountered no platforms that have requested this hypothetical optimization, so a special <code class="highlight"><c- n>thrd_attr_static_name</c-></code> structure has not been provided.</p>
   <h3 class="heading settled" data-level="3.3" id="design-get"><span class="secno">3.3. </span><span class="content">"Where is the <code class="highlight"><c- n>get</c-></code>-style API?"</span><a class="self-link" href="#design-get"></a></h3>
   <p>We do not provide the <code class="highlight"><c- n>get</c-></code>/<code class="highlight"><c- n>query</c-></code> APIs in this paper. Much like thread creation, there are various APIs for getting a thread name, or its priority, or whether or not its detached. Some do not provide <em>any</em> API at all (a few of the BSDs). Getters also include the issue of synchronization, or possible Time Of Check vs. Time Of Use (TOCTOU) issues.</p>
   <p>We leave getter/query APIs to future papers after ironing out this paper.</p>
   <h3 class="heading settled" data-level="3.4" id="design-errors"><span class="secno">3.4. </span><span class="content">"How does this API handle errors?"</span><a class="self-link" href="#design-errors"></a></h3>
   <p>An important part of having thread attributes is recognizing that implementations have wildly different handling strategies, even for attributes that are spiritually the same on most platforms. For example, <code class="highlight"><c- n>stack_size</c-></code> is something that can be honored on all implementations we know about, including the Dreamcast Console implementation of threads. Unfortunately, the exact handling of the number actually differs on platforms.</p>
   <p>Win32 thread implementations will round the value up as alignment or to meet a minimum stack size. But, POSIX thread implementations simply error and ignore the provided size, and in some versions of glibc it will round the value <em>down</em> for alignment purposes (despite that not being allowed by the specification). This fact means that a number passed in to <code class="highlight"><c- n>thrd_attr_stack_size</c-></code> and propagated through the <code class="highlight"><c- n>thrd_create_attrs</c-></code> function can and will silently fail on a POSIX implementation while working on a Win32 implementation.</p>
   <p>The solution to this problem is the specification of a <code class="highlight"><c- n>thrd_attr_err_func</c-></code> function type, and taking a pointer to such a function in any given <code class="highlight"><c- n>thrd_create_attrs_err</c-><c- p>(...)</c-></code>. There will be cases where users do not care at all about attribute errors, either because they checked beforehand or because such failures don’t really concern them at all and the usage of such attributes are just nonchalant suggestions: in those cases, users can pass a function <code class="highlight"><c- n>accept_everything</c-></code> to <code class="highlight"><c- n>thrd_create_attrs_err</c-><c- p>(...)</c-></code>, pass <code class="highlight">NULL</code> which will do the same thing, or simply call <code class="highlight"><c- n>thrd_create_attrs</c-></code> which will do the same thing.</p>
   <p>Similarly, users can pick and choose the kinds of errors they care about:</p>
<pre class="language-cpp highlight"><c- cp>#include</c-> &lt;threads.h>
<c- cp>#include</c-> &lt;stdcountof.h>
<c- cp>#include</c-> &lt;stdio.h?>

<c- kr>inline</c-> <c- k>static</c-> <c- b>int</c-> <c- nf>thrd_main</c-><c- p>(</c-><c- b>void</c-><c- o>*</c-> <c- n>arg</c-><c- p>)</c-> <c- p>{</c->
  <c- p>(</c-><c- b>void</c-><c- p>)</c-><c- n>arg</c-><c- p>;</c->
  <c- d>/* ... */</c->
  <c- k>return</c-> <c- mi>0</c-><c- p>;</c->
<c- p>}</c->

<c- b>int</c-> <c- nf>handle_attribute_errors</c-><c- p>(</c-><c- k>const</c-> <c- n>thrd_attr_kind</c-><c- o>*</c-> <c- n>attr_kind</c-><c- p>,</c-> <c- b>int</c-> <c- n>err</c-><c- p>,</c-> <c- b>void</c-><c- o>*</c-> <c- n>userdata</c-><c- p>)</c-> <c- p>{</c->
  <c- p>(</c-><c- b>void</c-><c- p>)</c-><c- n>userdata</c-><c- p>;</c->
  <c- k>if</c-> <c- p>(</c-><c- o>*</c-><c- n>attr_kind</c-> <c- o>==</c-> <c- n>thrd_attr_kind_c32name</c-><c- p>)</c-> <c- p>{</c->
    <c- c1>// we don't care if name is unrecognized: not critical to us</c->
    <c- n>printf</c-><c- p>(</c-><c- s>"We could not set the name of the thread "</c->
      <c- s>"with a UTF-32 string (%d)"</c-><c- p>,</c-> <c- n>err</c-><c- p>);</c->
    <c- k>return</c-> <c- n>thrd_success</c-><c- p>;</c->
  <c- p>}</c->
  <c- k>else</c-> <c- k>if</c-> <c- p>(</c-><c- o>*</c-><c- n>attr_kind</c-> <c- o>==</c-> <c- n>thrd_attr_kind_stack_size</c-><c- p>)</c-> <c- p>{</c->
    <c- c1>// this matters to us: pipe the error through</c->
    <c- k>return</c-> <c- n>err</c-><c- p>;</c->
  <c- p>}</c->
  <c- c1>// attribute we either do not know or do not care about: just assume success</c->
  <c- k>return</c-> <c- n>thrd_success</c-><c- p>;</c->
<c- p>}</c->

<c- b>int</c-> <c- nf>main</c-><c- p>(</c-><c- b>void</c-><c- p>)</c-> <c- p>{</c->
  <c- n>thrd_t</c-> <c- n>t0</c-> <c- o>=</c-> <c- p>{};</c->

  <c- n>thrd_attr_c32name</c-> <c- n>name_attr</c-> <c- o>=</c-> <c- p>{</c->
    <c- p>.</c-><c- n>kind</c-> <c- o>=</c-> <c- n>thrd_attr_kind_c32name</c-><c- p>,</c->
    <c- p>.</c-><c- n>name</c-> <c- o>=</c-> U<c- s>"meow?!"</c->
  <c- p>};</c->
  <c- n>thrd_attr_stack_size</c-> <c- n>stack_size_attr</c-> <c- o>=</c-> <c- p>{</c->
    <c- p>.</c-><c- n>kind</c-> <c- o>=</c-> <c- n>thrd_attr_kind_stack_size</c-><c- p>,</c->
    <c- p>.</c-><c- n>size</c-> <c- o>=</c-> <c- mi>1024</c-><c- p>,</c-> <c- c1>// this is too small for POSIX threads</c->
    <c- c1>// and will cause an error</c->
  <c- p>};</c->
  <c- c1>// some random attribute to illustrate</c->
  <c- c1>// that we don't recognize it,</c->
  <c- c1>// and that we don't care.</c->
  <c- k>const</c-> <c- k>struct</c-> <c- nc>thrd_attr_priority</c-> <c- p>{</c->
    <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
    <c- b>int</c-> <c- n>priority</c-><c- p>;</c->
  <c- p>}</c-> <c- n>priority_attr</c-> <c- o>=</c-> <c- p>{</c->
    <c- c1>// some custom attribute or whatever</c->
    <c- p>.</c-><c- n>kind</c->     <c- o>=</c-> <c- p>(</c-><c- n>ztdc_thrd_attr_kind</c-><c- p>)</c-><c- mh>0x12345678</c-><c- p>,</c->
    <c- p>.</c-><c- n>priority</c-> <c- o>=</c-> <c- n>INT_MAX</c-><c- p>,</c->
  <c- p>};</c->

  <c- k>const</c-> <c- n>ztdc_thrd_attr_kind</c-><c- o>*</c-> <c- n>attrs</c-><c- p>[]</c-> <c- o>=</c-> <c- p>{</c->
    <c- o>&amp;</c-><c- n>priority_attr</c-><c- p>.</c-><c- n>kind</c-><c- p>,</c->
    <c- o>&amp;</c-><c- n>stack_size_attr</c-><c- p>.</c-><c- n>kind</c-><c- p>,</c->
    <c- o>&amp;</c-><c- n>name_attr</c-><c- p>.</c-><c- n>kind</c-><c- p>,</c->
  <c- p>};</c->

  <c- b>int</c-> <c- n>create_err</c-> <c- o>=</c-> <c- n>thrd_create_attrs_err</c-><c- p>(</c->
       <c- o>&amp;</c-><c- n>t0</c-><c- p>,</c-> <c- n>thrd_main</c-><c- p>,</c-> NULL<c- p>,</c-> <c- n>countof</c-><c- p>(</c-><c- n>attrs</c-><c- p>),</c-> <c- n>attrs</c-><c- p>,</c->
    <c- n>handle_attribute_errors</c-><c- p>,</c-> NULL<c- p>);</c->
  <c- n>assert</c-><c- p>(</c-><c- n>create_err</c-> <c- o>==</c-> <c- n>thrd_success</c-><c- p>);</c->

  <c- b>int</c-> <c- n>res0</c-> <c- o>=</c-> <c- mi>0</c-><c- p>;</c->
  <c- n>thrd_join</c-><c- p>(</c-><c- n>t0</c-><c- p>,</c-> <c- o>&amp;</c-><c- n>res0</c-><c- p>);</c->
  <c- n>assert</c-><c- p>(</c-><c- n>res0</c-> <c- o>==</c-> <c- mi>0</c-><c- p>);</c->
  <c- k>return</c-> <c- mi>0</c-><c- p>;</c->
<c- p>}</c->
</pre>
   <p>This code will stop thread creation if <code class="highlight"><c- n>stack_size_attr</c-></code> is not handled properly (e.g., the implementation does not recognize it OR the implementation tries to set the stack size but reports an error, like <code class="highlight"><c- n>pthread_attr_setstacksize</c-></code> would). It will explicitly acknowledge and ignore an issue with the thread name (but ignore it for the purposes of the implementation). This gives users the ultimate control over what is going on, in the form of a final say on whether or not thread creation should proceed.</p>
   <p>The function passed in, <code class="highlight"><c- n>handle_attribute_errors</c-></code>, is invoked on the same thread as the call to <code class="highlight"><c- n>thrd_create_attrs_err</c-></code>. This is to prevent needing additional synchronization accesses and checks.</p>
   <h3 class="heading settled" data-level="3.5" id="design-others"><span class="secno">3.5. </span><span class="content">Other Designs?</span><a class="self-link" href="#design-others"></a></h3>
   <p>There are other ways this API can be shaped. Unfortunately, most of those changes are not worth their bang or their buck: <a href="https://ztdthread.rtfd.io/en/latest/design/alternatives.html">see the library documentation here</a>.</p>
   <h2 class="heading settled" data-level="4" id="implementation"><span class="secno">4. </span><span class="content">Implementation Experience</span><a class="self-link" href="#implementation"></a></h2>
   <p>This was implemented in <a data-link-type="biblio" href="#biblio-ztdthread" title="ztd.thread">[ztd.thread]</a> as a proof of concept. It is tested on Win32, MacOS/Darwin, and Ubuntu/glibc in an automated fashion (GitHub CI) and by-hand on Win32/ARM64, Debian/glibc, Debian/musl-libc, and FreeBSD.</p>
   <p><a href="https://ztdthread.rtfd.io">Documentation for the library is contained here</a>.</p>
   <h2 class="heading settled" data-level="5" id="wording"><span class="secno">5. </span><span class="content">Wording</span><a class="self-link" href="#wording"></a></h2>
   <p>The following wording is against the latest draft of the C standard.</p>
   <h3 class="heading settled" data-level="5.1" id="wording-7.29.1"><span class="secno">5.1. </span><span class="content">Modify §7.29.1 "Introduction" to add the new structures and an enumeration</span><a class="self-link" href="#wording-7.29.1"></a></h3>
   <blockquote>
    <div class="wording-section">
     <div class="wording-numbered wording-numbered-4">
      <p>...</p>
<pre class="language-c highlight"><c- n>thrd_start_t</c->
</pre>
      <p>which is the function pointer type <code class="highlight"><c- b>int</c-> <c- p>(</c-><c- o>*</c-><c- p>)(</c-><c- b>void</c-><c- o>*</c-><c- p>)</c-></code> that is passed to <code class="highlight"><c- n>thrd_create</c-></code> to create a new thread;</p>
      <ins>
<pre class="language-c highlight"><c- n>thrd_attr_kind</c->
</pre>
       <p>which is an enumeration type that is compatible with <code class="highlight"><c- b>int_least32_t</c-></code> and used to provide type associations for the functions <code class="highlight"><c- n>thrd_create_attrs</c-></code> and <code class="highlight"><c- n>thrd_create_attrs_err</c-></code>;</p>
<pre class="language-c highlight"><c- n>thrd_attr_err_func_t</c->
</pre>
       <p>which is the function type <code class="highlight"><c- b>int</c-> <c- p>(</c-><c- k>const</c-> <c- n>thrd_attr_kind</c-><c- o>*</c-><c- p>,</c-> <c- b>int</c-><c- p>,</c-> <c- b>void</c-><c- o>*</c-><c- p>)</c-></code> that is passed to <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> to handle errors in thread attribute application;</p>
<pre class="language-c highlight"><c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_native_name</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- b>void</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_native_name</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_native_name_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- b>void</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_native_name_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_mcname</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- b>char</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_mcname</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_mcname_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- b>char</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_mcname_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_mwcname</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- b>wchar_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_mwcname</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_mwcname_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- b>wchar_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_mwcname_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c8name</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- n>char8_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c8name</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c8name_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- n>char8_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c8name_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c16name</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- n>char16_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c16name</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c16name_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- n>char16_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c16name_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c32name</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- k>const</c-> <c- n>char32_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c32name</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_c32name_sized</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
  <c- k>const</c-> <c- n>char32_t</c-><c- o>*</c-> <c- n>name</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_c32name_sized</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_stack_size</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>size_t</c-> <c- n>size</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_stack_size</c-><c- p>;</c->

<c- k>typedef</c-> <c- k>struct</c-> <c- nc>thrd_attr_detached</c-> <c- p>{</c->
  <c- n>thrd_attr_kind</c-> <c- n>kind</c-><c- p>;</c->
  <c- b>bool</c-> <c- n>detached</c-><c- p>;</c->
<c- p>}</c-> <c- n>thrd_attr_detached</c-><c- p>;</c->
</pre>
       <p>which represent standard thread attribute structures that are described in 7.29.2✨;</p>
      </ins>
      <p>...</p>
     </div>
     <div class="wording-numbered wording-numbered-6">
      <ins>
       <p>The enumeration constants part of <code class="highlight"><c- n>thrd_attr_kind</c-></code> are</p>
<pre class="language-c highlight"><c- n>thrd_attr_kind_native_name</c->
<c- n>thrd_attr_kind_native_name_sized</c->
<c- n>thrd_attr_kind_mcname</c->
<c- n>thrd_attr_kind_mcname_sized</c->
<c- n>thrd_attr_kind_mwcname</c->
<c- n>thrd_attr_kind_mwcname_sized</c->
<c- n>thrd_attr_kind_c8name</c->
<c- n>thrd_attr_kind_c8name_sized</c->
<c- n>thrd_attr_kind_c16name</c->
<c- n>thrd_attr_kind_c16name_sized</c->
<c- n>thrd_attr_kind_c32name</c->
<c- n>thrd_attr_kind_c32name_sized</c->
<c- n>thrd_attr_kind_stack_size</c->
<c- n>thrd_attr_kind_detached</c->
<c- n>thrd_attr_kind_implementation_defined</c-> <c- o>=</c-> <c- mh>0xFFFF</c->
</pre>
       <p>and are set as the value of the <code class="highlight"><c- n>kind</c-></code> member field of thread attributes described in 7.29.2✨. They provide a way to uniquely identify each thread attribute, except for the <code class="highlight"><c- n>thrd_attr_kind_implementation_defined</c-></code> which has no associated structure.</p>
      </ins>
     </div>
    </div>
   </blockquote>
   <h3 class="heading settled" data-level="5.2" id="wording-7.29.2✨"><span class="secno">5.2. </span><span class="content">Add a new section §7.29.2✨ "Thread attributes" to make it rely on wording moved to other function</span><a class="self-link" href="#wording-7.29.2✨"></a></h3>
   <blockquote class="quote-ins">
    <div class="wording-clause-header"> <span class="wording-clause-number">7.29.5.2✨</span><span class="wording-clause-title">Thread Attributes</span> </div>
    <div class="wording-section">
     <div class="wording-clause-section-title"> Description </div>
     <div class="wording-numbered">
      <p>The thread attribute enumeration and structures listed in the preceding subclause correspond to specific modifications that can be applied to a thread when passed as part of the <code class="highlight"><c- n>attrs</c-></code> array for <code class="highlight"><c- n>thrd_create_attrs</c-></code> and <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> function calls. <em>Standard thread attributes</em> are the structures and enumerations mentioned in this and the preceding subclause. Any other thread attribute structures and enumeration constants defined by the implementation as prescribed by this subclause are <em>implementation thread attributes</em>. The standard thread attributes shall be available when <code class="highlight"><c- o>&lt;</c-><c- n>threads</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> is included, but the effects each has on any given thread are conditionally supported and implementation-defined. Implementation thread attributes may not be available when <code class="highlight"><c- o>&lt;</c-><c- n>threads</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> is included and have implementation-defined effects, if any.</p>
     </div>
     <div class="wording-numbered">
      <p>For <code class="highlight"><c- n>thrd_create_attrs</c-></code> and <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> function calls, the behavior is unspecified if more than one of <code class="highlight"><c- n>thrd_attr_native_name</c-></code>, <code class="highlight"><c- n>thrd_attr_mcname</c-></code>, <code class="highlight"><c- n>thrd_attr_mwcname</c-></code>, <code class="highlight"><c- n>thrd_attr_c8name</c-></code>, <code class="highlight"><c- n>thrd_attr_c16name</c-></code>, <code class="highlight"><c- n>thrd_attr_c32name</c-></code>, or any of their <code class="highlight"><c- n>_sized</c-></code> counterparts, are used in the same <code class="highlight"><c- n>attrs</c-></code> array. The behavior is unspecified if more than one of any standard thread attribute is used in the <code class="highlight"><c- n>attrs</c-></code> array.</p>
     </div>
     <div class="wording-numbered">
      <p>With the exception of <code class="highlight"><c- n>thrd_attr_kind_implementation_defined</c-></code>, for every <code class="highlight"><c- n>thrd_attr_kind</c-></code> enumeration constant defined in this document of the form <code class="highlight"><c- n>thrd_attr_kind_X</c-></code>, where <code class="highlight"><c- n>X</c-></code> is the rest of the identifier, there is a corresponding <code class="highlight"><c- n>thrd_attr_X</c-></code> complete structure type. The <code class="highlight"><c- n>kind</c-></code> member must be set to the corresponding <code class="highlight"><c- n>thrd_attr_kind_X</c-></code> enumeration constant’s value for every <code class="highlight"><c- n>thrd_attr_X</c-></code> structure before use with the <code class="highlight"><c- n>thrd_create_attrs</c-></code> and <code class="highlight"><c- n>thrd_create_attrs_with</c-></code> functions, otherwise the behavior is undefined.</p>
     </div>
     <div class="wording-numbered">
      <p>Each identifier of the form <code class="highlight"><c- n>thrd_attr_kind_X</c-></code>, where <code class="highlight"><c- n>X</c-></code> is the rest of the identifier, is reserved for use by this document as a thread attribute enumeration constant whose value shall be less than <code class="highlight"><c- n>thrd_attr_kind_implementation_defined</c-></code>. Each identifier of the form <code class="highlight"><c- n>thrd_attr_X</c-></code> for the corresponding structure is also reserved by this document as a thread attribute structure. For thread attribute enumeration constants and structures defined by this document, <code class="highlight"><c- n>X</c-></code> will not begin with the character <code class="highlight"><c- n>_</c-></code> (U+005F LOW LINE). An implementation may define subsequent <code class="highlight"><c- n>thrd_attr_kind_Y</c-></code> enumeration constants as part of the <code class="highlight"><c- n>thrd_attr_kind</c-></code> enumerated type, where <code class="highlight"><c- n>Y</c-></code> is the rest of the identifier, for use as implementation-defined thread attributes. The value of such an enumeration constant shall be greater than <code class="highlight"><c- n>thrd_attr_kind_implementation_defined</c-></code>.</p>
     </div>
     <div class="wording-numbered">
      <p>The thread attributes <code class="highlight"><c- n>thrd_attr_mcname</c-></code>, <code class="highlight"><c- n>thrd_attr_mwcname</c-></code>, <code class="highlight"><c- n>thrd_attr_c8name</c-></code>, <code class="highlight"><c- n>thrd_attr_c16name</c-></code>, and <code class="highlight"><c- n>thrd_attr_c32name</c-></code> provide a thread with a name encoded in the execution, wide execution, UTF-8, UTF-16, and UTF-32 encodings (6.2.9), respectively, as a null terminated string. If the value of the <code class="highlight"><c- n>name</c-></code> field is a null pointer, then no change occurs. Otherwise, the value pointed to by the <code class="highlight"><c- n>name</c-></code> field must be valid for the function call. The thread attributes of the same name but suffixed with <code class="highlight"><c- n>_sized</c-></code> provide a thread with the same information, except that the <code class="highlight"><c- n>name</c-></code> field can be a non-null terminated pointer and whose size is denoted by the field <code class="highlight"><c- n>size</c-></code>. For these <code class="highlight"><c- n>_sized</c-></code> thread attributes, the <code class="highlight"><c- n>name</c-></code> field may not contain an appropriately typed null terminator in the range denoted by the <code class="highlight"><c- n>name</c-></code> and <code class="highlight"><c- n>size</c-></code> fields. The range denoted by <code class="highlight"><c- n>name</c-></code>, or by <code class="highlight"><c- n>name</c-></code> and <code class="highlight"><c- n>size</c-></code> for the <code class="highlight"><c- n>_sized</c-></code>-suffixed thread attributes, are not accessed by the implementation after the <code class="highlight"><c- n>thrd_create_attrs</c-></code> or <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> function calls return.</p>
     </div>
     <div class="wording-numbered">
      <p>The thread attribute <code class="highlight"><c- n>thrd_attr_native_name</c-></code> provides an pointer to <code class="highlight"><c- k>const</c-> <c- b>void</c-></code> whose value is meant to be used directly by the implementation to set the name of the thread. It has an implementation-defined encoding. If the <code class="highlight"><c- n>name</c-></code> field is a null pointer, there is no effect. Otherwise, the pointer shall be null terminated by a sequence of 0 bytes. The number of 0-valued bytes that make up the sequence of that null terminator is implementation-defined. The thread attribute <code class="highlight"><c- n>thrd_attr_native_name_sized</c-></code> is the same, except that the number of bytes in the <code class="highlight"><c- n>name</c-></code> field is equal to the value of the <code class="highlight"><c- n>size</c-></code> field. The <code class="highlight"><c- n>name</c-></code> field must not contain the implementation-defined null termination byte sequence in the range denoted by the <code class="highlight"><c- n>name</c-></code> and <code class="highlight"><c- n>size</c-></code> fields. The range denoted by <code class="highlight"><c- n>name</c-></code>, or by <code class="highlight"><c- n>name</c-></code> and <code class="highlight"><c- n>size</c-></code> for <code class="highlight"><c- n>thrd_attr_native_name_sized</c-></code>, are not accessed by the implementation after the <code class="highlight"><c- n>thrd_create_attrs</c-></code> or <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> function calls return.</p>
     </div>
     <div class="wording-clause-section-title"> Recommended Practice </div>
     <div class="wording-numbered">
      <p>The thread attributes <code class="highlight"><c- n>thrd_attr_mcname</c-></code>, <code class="highlight"><c- n>thrd_attr_mwcname</c-></code>, <code class="highlight"><c- n>thrd_attr_c8name</c-></code>, <code class="highlight"><c- n>thrd_attr_c16name</c-></code>, <code class="highlight"><c- n>thrd_attr_c32name</c-></code>, and their <code class="highlight"><c- n>_sized</c-></code>-suffixed analogues, should have their names converted to any unspecified yet appropriate encoding, if necessary, and set as the name of the thread. The thread attributes <code class="highlight"><c- n>thrd_attr_native_name</c-></code> and <code class="highlight"><c- n>thrd_attr_native_name_sized</c-></code> should have their name set without any conversion, if possible, as the name of the thread. An implementation should make the name available when thread information, possibly obtained by unspecified or implementation-defined means, is inspected.</p>
     </div>
     <div class="wording-numbered">
      <p>The thread attribute <code class="highlight"><c- n>thrd_attr_stack_size</c-></code> provides a recommendation for the size of the storage used for the thread with respect to automatic storage duration lifetime declarations for that thread.</p>
     </div>
     <div class="wording-numbered">
      <p>The thread attribute <code class="highlight"><c- n>thrd_attr_detached</c-></code> provides a value which determines whether or not a thread should be created in the detached state, or should immediately be detached upon creation as-if by calling <code class="highlight"><c- n>thrd_detach</c-></code> with the thread that is being created.</p>
     </div>
    </div>
   </blockquote>
   <h3 class="heading settled" data-level="5.3" id="wording-7.29.5.1"><span class="secno">5.3. </span><span class="content">Modify §7.29.5.1 "The <code class="highlight"><c- n>thrd_create</c-></code> function" to make it rely on wording moved to other function</span><a class="self-link" href="#wording-7.29.5.1"></a></h3>
   <blockquote>
    <div class="wording-clause-header"> <span class="wording-clause-number">7.29.5.1</span><span class="wording-clause-title">The <code class="highlight"><c- n>thrd_create</c-></code> function</span> </div>
    <div class="wording-section">
     <div class="wording-clause-section-title"> Synopsis </div>
     <div class="wording-numbered">
<pre class="language-c highlight"><c- cp>#include</c-> &lt;threads.h>
<c- b>int</c-> <c- nf>thrd_create</c-><c- p>(</c-><c- n>thrd_t</c-> <c- o>*</c-><c- n>thr</c-><c- p>,</c-> <c- n>thrd_start_t</c-> <c- n>func</c-><c- p>,</c-> <c- b>void</c-> <c- o>*</c-><c- n>arg</c-><c- p>);</c->
</pre>
     </div>
     <del>
      <div class="wording-clause-section-title"> Description </div>
      <div class="wording-numbered">
       <p>The <code class="highlight"><c- n>thrd_create</c-></code> function creates a new thread executing func(arg). If the <code class="highlight"><c- n>thrd_create</c-></code> function succeeds, it sets the object pointed to <code class="highlight"><c- n>by</c-> <c- n>thr</c-></code> to the identifier of the newly created thread. (A thread’s identifier can be reused for a different thread once the original thread has exited and either been detached or joined to another thread.) The completion of the <code class="highlight"><c- n>thrd_create</c-></code> function synchronizes with the beginning of the execution of the new thread.</p>
      </div>
      <div class="wording-numbered">
       <p>Returning from <code class="highlight"><c- n>func</c-></code> has the same behavior as invoking <code class="highlight"><c- n>thrd_exit</c-></code> with the value returned from <code class="highlight"><c- n>func</c-></code>.</p>
      </div>
     </del>
     <div class="wording-clause-section-title"> Returns </div>
     <del>
      <div class="wording-numbered">
       <p>The <code class="highlight"><c- n>thrd_create</c-></code> function returns <code class="highlight"><c- n>thrd_success</c-></code> on success, or <code class="highlight"><c- n>thrd_nomem</c-></code> if no memory could be allocated for the thread requested, or <code class="highlight"><c- n>thrd_error</c-></code> if the request could not be honored.</p>
      </div>
     </del>
     <ins>
      <div class="wording-numbered-2 wording-newnumbered">
       <p>The <code class="highlight"><c- n>thrd_create</c-></code> function returns and is equivalent to <code class="highlight"><c- n>thrd_create_attrs_err</c-><c- p>(</c-><c- n>thr</c-><c- p>,</c-> <c- n>func</c-><c- p>,</c-> <c- n>arg</c-><c- p>,</c-> <c- mi>0</c-><c- p>,</c-> <c- n>nullptr</c-><c- p>,</c-> <c- n>nullptr</c-><c- p>,</c-> <c- n>nullptr</c-><c- p>)</c-></code>.</p>
      </div>
     </ins>
    </div>
   </blockquote>
   <h3 class="heading settled" data-level="5.4" id="wording-7.29.5.2✨"><span class="secno">5.4. </span><span class="content">Add a new sub-clause "§7.29.5.2✨ The <code class="highlight"><c- n>thrd_create_attrs</c-></code> function" after "The <code class="highlight"><c- n>thrd_create</c-></code> function"</span><a class="self-link" href="#wording-7.29.5.2✨"></a></h3>
   <blockquote class="quote-ins">
    <div class="wording-clause-header"> <span class="wording-clause-number">7.29.5.2✨</span><span class="wording-clause-title">The <code class="highlight"><c- n>thrd_create_attrs</c-></code> function</span> </div>
    <div class="wording-section">
     <div class="wording-clause-section-title"> Synopsis </div>
     <div class="wording-numbered">
<pre class="language-c highlight"><c- cp>#include</c-> &lt;threads.h>
<c- b>int</c-> <c- nf>thrd_create_attrs</c-><c- p>(</c-><c- n>thrd_t</c-> <c- o>*</c-><c- n>thr</c-><c- p>,</c-> <c- n>thrd_start_t</c-> <c- n>func</c-><c- p>,</c-> <c- b>void</c-> <c- o>*</c-><c- n>arg</c-><c- p>,</c->
  <c- b>size_t</c-> <c- n>attrs_n</c-><c- p>,</c-> <c- k>const</c-> <c- n>thrd_attr_kind</c-><c- o>*</c-> <c- n>attrs</c-><c- p>[</c-><c- k>static</c-> <c- n>attrs_n</c-><c- p>]);</c->
</pre>
     </div>
     <div class="wording-clause-section-title"> Description </div>
     <div class="wording-numbered">
      <p>The <code class="highlight"><c- n>thrd_create_attrs</c-></code> function returns and is equivalent to <code class="highlight"><c- n>thrd_create_attrs_err</c-><c- p>(</c-><c- n>thr</c-><c- p>,</c-> <c- n>func</c-><c- p>,</c-> <c- n>arg</c-><c- p>,</c-> <c- n>attrs_n</c-><c- p>,</c-> <c- n>attrs</c-><c- p>,</c-> <c- n>nullptr</c-><c- p>,</c-> <c- n>nullptr</c-><c- p>)</c-></code>.</p>
     </div>
    </div>
   </blockquote>
   <h3 class="heading settled" data-level="5.5" id="wording-7.29.5.3✨"><span class="secno">5.5. </span><span class="content">Add a new sub-clause "§7.29.5.3✨ The <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> function" after "The <code class="highlight"><c- n>thrd_create_attrs</c-></code> function"</span><a class="self-link" href="#wording-7.29.5.3✨"></a></h3>
   <blockquote class="quote-ins">
    <div class="wording-clause-header"> <span class="wording-clause-number">7.29.5.3✨</span><span class="wording-clause-title">The <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> function</span> </div>
    <div class="wording-section">
     <div class="wording-clause-section-title"> Synopsis </div>
     <div class="wording-numbered">
<pre class="language-c highlight"><c- cp>#include</c-> &lt;threads.h>
<c- b>int</c-> <c- nf>thrd_create_attrs_err</c-><c- p>(</c-><c- n>thrd_t</c-> <c- o>*</c-><c- n>thr</c-><c- p>,</c-> <c- n>thrd_start_t</c-> <c- n>func</c-><c- p>,</c-> <c- b>void</c-> <c- o>*</c-><c- n>arg</c-><c- p>,</c->
  <c- b>size_t</c-> <c- n>attrs_n</c-><c- p>,</c-> <c- k>const</c-> <c- n>thrd_attr_kind</c-> <c- o>*</c-><c- n>attrs</c-><c- p>[</c-><c- k>static</c-> <c- n>attrs_n</c-><c- p>]</c->
  <c- n>thrd_attr_err_func_t</c-> <c- o>*</c-><c- n>err_func</c-><c- p>,</c-> <c- b>void</c-> <c- o>*</c-><c- n>err_func_arg</c-><c- p>);</c->
</pre>
     </div>
     <div class="wording-clause-section-title"> Description </div>
     <div class="wording-numbered">
      <p>The <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> function creates a new thread executing <code class="highlight"><c- n>func</c-><c- p>(</c-><c- n>arg</c-><c- p>)</c-></code> after applying any modifications to the thread through the thread attributes in the <code class="highlight"><c- n>attrs</c-></code> array, if any. If <code class="highlight"><c- n>err_func</c-></code> is a null pointer, this function behaves as if <code class="highlight"><c- n>err_func</c-></code> points to an appropriately typed function that returns <code class="highlight"><c- n>thrd_success</c-></code> no matter the input. If the <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> function succeeds, it sets the object pointed to by <code class="highlight"><c- n>thr</c-></code> to the identifier of the newly created thread. (A thread’s identifier can be reused for a different thread once the original thread has exited and either been detached or joined to another thread.)</p>
     </div>
     <div class="wording-numbered">
      <p>If <code class="highlight"><c- n>attrs</c-></code> is a null pointer, no thread attributes are processed. If <code class="highlight"><c- n>attrs_n</c-></code> is 0, no thread attributes are processed. Each pointer <code class="highlight"><c- n>p</c-></code> in the range <code class="highlight"><c- p>[</c-><c- n>attrs</c-><c- p>,</c-> <c- n>attrs</c-> <c- o>+</c-> <c- n>attrs_n</c-><c- p>)</c-></code> must point to a thread attribute or be a null pointer. If <code class="highlight"><c- n>p</c-></code> is a null pointer, it is ignored and has no effect. Otherwise, if <code class="highlight"><c- o>*</c-><c- n>p</c-></code> is a thread attribute that is not honored by the implementation, <code class="highlight"><c- n>err_func</c-></code> is called with the arguments <code class="highlight"><c- n>p</c-></code>,<code class="highlight"><c- n>thrd_error</c-></code>, and <code class="highlight"><c- n>err_func_arg</c-></code>. Otherwise, the implementation processes the attribute and affects the thread according to the semantics in 7.29.5.2✨. If the implementation encounters an error during the processing, <code class="highlight"><c- n>err_func</c-></code> is invoked with:</p>
      <ul>
       <li data-md>
        <p>the first argument as <code class="highlight"><c- n>p</c-></code>;</p>
       <li data-md>
        <p>the second argument as an unspecified value of one of <code class="highlight"><c- n>thrd_error</c-></code>, <code class="highlight"><c- n>thrd_nomem</c-></code>, <code class="highlight"><c- n>thrd_timedout</c-></code>, or <code class="highlight"><c- n>thrd_busy</c-></code>; and,</p>
       <li data-md>
        <p>the third argument as <code class="highlight"><c- n>err_func_arg</c-></code>.</p>
      </ul>
      <p><code class="highlight"><c- n>err_func</c-></code> returns one of <code class="highlight"><c- n>thrd_error</c-></code>, <code class="highlight"><c- n>thrd_nomem</c-></code>, <code class="highlight"><c- n>thrd_timeout</c-></code>, or <code class="highlight"><c- n>thrd_busy</c-></code>. If <code class="highlight"><c- n>err_func</c-></code> returns a value that is not <code class="highlight"><c- n>thrd_success</c-></code>, <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> returns that value and the thread is not created. The thread attribute pointed to by <code class="highlight"><c- n>p</c-></code> is no longer read after <code class="highlight"><c- n>err_func</c-></code> returns. If <code class="highlight"><c- n>err_func</c-></code> modifies other thread attributes passed to <code class="highlight"><c- n>thrd_create_attrs_err</c-></code>, the behavior is unspecified. If the <code class="highlight"><c- n>LC_CTYPE</c-></code> category is changed during the execution of <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> and a thread attribute containing an execution encoding string is yet to be processed, the behavior is unspecified.</p>
     </div>
     <div class="wording-numbered">
      <p>Returning from <code class="highlight"><c- n>func</c-></code> has the same behavior as invoking <code class="highlight"><c- n>thrd_exit</c-></code> with the value returned from <code class="highlight"><c- n>func</c-></code>. <code class="highlight"><c- n>err_func</c-></code> is always executed on the same thread that invoked <code class="highlight"><c- n>thrd_create_attrs_err</c-></code>. The processing of all thread attributes, the invocations and completions of any necessary calls to <code class="highlight"><c- n>err_func</c-></code>, and the completion of the <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> function synchronize with the beginning of the execution of <code class="highlight"><c- n>func</c-></code> in the new thread.</p>
     </div>
     <div class="wording-clause-section-title"> Returns </div>
     <div class="wording-numbered">
      <p>The <code class="highlight"><c- n>thrd_create_attrs_err</c-></code> function returns <code class="highlight"><c- n>thrd_success</c-></code> on success, or <code class="highlight"><c- n>thrd_nomem</c-></code> if no memory could be allocated for the thread requested, or <code class="highlight"><c- n>thrd_error</c-></code> if the request could not be honored.</p>
     </div>
     <div class="wording-clause-section-title"> Recommended Practice </div>
     <div class="wording-numbered">
      <p>Implementations should pass the closest analogous error code from the <code class="highlight"><c- n>thrd_error</c-></code>, <code class="highlight"><c- n>thrd_nomem</c-></code>, <code class="highlight"><c- n>thrd_timedout</c-></code>, or <code class="highlight"><c- n>thrd_busy</c-></code> enumeration constants that is related to any implementation-specific errors that occur during thread creation and thread attribute processing.</p>
     </div>
    </div>
   </blockquote>
   <h3 class="heading settled" data-level="5.6" id="wording-7.35.20"><span class="secno">5.6. </span><span class="content">Modify "§7.35.20 Threads" of "Future library directions"</span><a class="self-link" href="#wording-7.35.20"></a></h3>
   <blockquote>
    <div class="wording-clause-header"> <span class="wording-clause-number">7.35.20</span><span class="wording-clause-title">Threads <code class="highlight"><c- o>&lt;</c-><c- n>threads</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code></span> </div>
    <div class="wording-section">
     <div class="wording-numbered">
       Function names, type names, and enumeration constants that begin with either <code class="highlight"><c- n>cnd_</c-></code>, <code class="highlight"><c- n>mtx_</c-></code>, <code class="highlight"><c- n>thrd_</c-></code>, or <code class="highlight"><c- n>tss_</c-></code>, and a lowercase letter are potentially reserved identifiers and may be added to the declarations
in the <code class="highlight"><c- o>&lt;</c-><c- n>threads</c-><c- p>.</c-><c- n>h</c-><c- o>></c-></code> header. 
      <ins>
       Identifiers of the form <code class="highlight"><c- n>thrd_attr_X</c-></code> and <code class="highlight"><c- n>thrd_attr_kind_X</c-></code>, where <code class="highlight"><c- n>X</c-></code> is the rest of the identifier, are either: 
       <ul>
        <li data-md>
         <p>reserved by this document, if <code class="highlight"><c- n>X</c-></code> does not begin with <code class="highlight"><c- n>_</c-></code> (U+005F LOW LINE); or</p>
        <li data-md>
         <p>potentially reserved by the implementation, if <code class="highlight"><c- n>X</c-></code> does begin with <code class="highlight"><c- n>_</c-></code> (U+005F LOW LINE).</p>
       </ul>
      </ins>
     </div>
    </div>
   </blockquote>
  </main>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don't scroll to compensate for the ToC if we're above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don't know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn't exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn't standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don't have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we're at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can't find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-msvc-threads-h">[MSVC-THREADS-H]
   <dd>Charlie Barto; Microsoft. <a href="https://devblogs.microsoft.com/cppblog/c11-threads-in-visual-studio-2022-version-17-8-preview-2/"><cite>MSVC C11 threads.h</cite></a>. September 26th, 2023. URL: <a href="https://devblogs.microsoft.com/cppblog/c11-threads-in-visual-studio-2022-version-17-8-preview-2/">https://devblogs.microsoft.com/cppblog/c11-threads-in-visual-studio-2022-version-17-8-preview-2/</a>
   <dt id="biblio-n2178">[N2178]
   <dd>Peter Dimov. <a href="https://wg21.link/n2178"><cite>Proposed Text for Chapter 30, Thread Support Library [threads]</cite></a>. March 3rd, 2007. URL: <a href="https://wg21.link/n2178">https://wg21.link/n2178</a>
   <dt id="biblio-n2419">[N2419]
   <dd>Kamil Rytarowski. <a href="https://www.open-std.org/JTC1/SC22/WG14/www/docs/n2419.htm"><cite>N2419 -</cite></a>. September 3rd, 2019. URL: <a href="https://www.open-std.org/JTC1/SC22/WG14/www/docs/n2419.htm">https://www.open-std.org/JTC1/SC22/WG14/www/docs/n2419.htm</a>
   <dt id="biblio-p0320">[P0320]
   <dd>Vicente J. Botet Escribá. <a href="https://wg21.link/p0320"><cite>Thread Constructor Attributes</cite></a>. October 12th, 2016. URL: <a href="https://wg21.link/p0320">https://wg21.link/p0320</a>
   <dt id="biblio-p2019">[P2019]
   <dd>Corentin Jabot. <a href="https://wg21.link/p2019"><cite>P2019 - Thread Attributes</cite></a>. September 9th, 2024. URL: <a href="https://wg21.link/p2019">https://wg21.link/p2019</a>
   <dt id="biblio-p3022">[P3022]
   <dd>David Sankel; Darius Santu. <a href="https://wg21.link/p3022"><cite>P3022 - A Boring Thread Attributes Interface</cite></a>. November 28th, 2023. URL: <a href="https://wg21.link/p3022">https://wg21.link/p3022</a>
   <dt id="biblio-p3072">[P3072]
   <dd>Zhihao Yuan. <a href="https://wg21.link/p3072"><cite>P3072 - Hassle-free Thread Attributes</cite></a>. March 15h, 2024. URL: <a href="https://wg21.link/p3072">https://wg21.link/p3072</a>
   <dt id="biblio-ztdthread">[ZTD.THREAD]
   <dd>Shepherd's Oasis, LLC; JeanHeyd Meneide. <a href="https://github.com/soasis/thread"><cite>ztd.thread</cite></a>. March 27th, 2025. URL: <a href="https://github.com/soasis/thread">https://github.com/soasis/thread</a>
  </dl>